### search_filters = {FOCUS_FILTER_POLITICAL}
### search_filters = {FOCUS_FILTER_RESEARCH}
### search_filters = {FOCUS_FILTER_INDUSTRY}
### search_filters = {FOCUS_FILTER_STABILITY}
### search_filters = {FOCUS_FILTER_WAR_SUPPORT}
### search_filters = {FOCUS_FILTER_MANPOWER}
### search_filters = {FOCUS_FILTER_ANNEXATION}
### search_filters = {FOCUS_FILTER_SOV_POLITICAL_PARANOIA}
### search_filters = {FOCUS_FILTER_PROPAGANDA}
### search_filters = {FOCUS_FILTER_ARMY_XP}
### search_filters = {FOCUS_FILTER_NAVY_XP}
### search_filters = {FOCUS_FILTER_AIR_XP}
# Reminder that focus filters prio has to be handled in the generic focus file :)

focus_tree = {
	id = soviet_focus

	country = {
		factor = 0
		
		modifier = {
			add = 10
			tag = SOV
		}
	}
	
	default = no

	continuous_focus_position = { x = 55 y = 1500 }


##    ##  #######      ######  ######## ######## ########     ########     ###     ######  ##    ## 
###   ## ##     ##    ##    ##    ##    ##       ##     ##    ##     ##   ## ##   ##    ## ##   ##  
####  ## ##     ##    ##          ##    ##       ##     ##    ##     ##  ##   ##  ##       ##  ##   
## ## ## ##     ##     ######     ##    ######   ########     ########  ##     ## ##       #####    
##  #### ##     ##          ##    ##    ##       ##           ##     ## ######### ##       ##  ##   
##   ### ##     ##    ##    ##    ##    ##       ##           ##     ## ##     ## ##    ## ##   ##  
##    ##  #######      ######     ##    ######## ##           ########  ##     ##  ######  ##    ## 



 ######  #### ##     ## #### ##       ####    ###    ##    ##    #### ##    ## ########  ##     ##  ######  ######## ########  ##    ## 
##    ##  ##  ##     ##  ##  ##        ##    ## ##   ###   ##     ##  ###   ## ##     ## ##     ## ##    ##    ##    ##     ##  ##  ##  
##        ##  ##     ##  ##  ##        ##   ##   ##  ####  ##     ##  ####  ## ##     ## ##     ## ##          ##    ##     ##   ####   
##        ##  ##     ##  ##  ##        ##  ##     ## ## ## ##     ##  ## ## ## ##     ## ##     ##  ######     ##    ########     ##    
##        ##   ##   ##   ##  ##        ##  ######### ##  ####     ##  ##  #### ##     ## ##     ##       ##    ##    ##   ##      ##    
##    ##  ##    ## ##    ##  ##        ##  ##     ## ##   ###     ##  ##   ### ##     ## ##     ## ##    ##    ##    ##    ##     ##    
 ######  ####    ###    #### ######## #### ##     ## ##    ##    #### ##    ## ########   #######   ######     ##    ##     ##    ##    


	focus = {
		

		id = SOV_infrastructure_effort_nsb

		icon = GFX_goal_generic_road2
		x = 1
		y = 0
		cost = 5

		ai_will_do = {
			factor = 1
		}

		bypass = {
			custom_trigger_tooltip =  {
				tooltip = infrastructure_effort_tt
				all_owned_state = {
					free_building_slots = {
						building = infrastructure
						size < 2
					}
				}
			}
		}
		

		completion_reward = { #TODO_Manu: This is just copy-pasted from the old focus -> Is this what we want?
			if = {
				limit = {
					all_owned_state = {
						infrastructure > 2
					}
				}
				random_owned_controlled_state = {
					limit = {
						free_building_slots = {
							building = infrastructure
							size > 1
						}
					}
					add_building_construction = {
						type = infrastructure
						level = 2
						instant_build = yes						
					}
					set_state_flag = SOV_infrastructure_effort_3Inf
				}
				651 = {
					limit = {
						free_building_slots = {
							building = infrastructure
							size > 1
						}
					}
					add_building_construction = {
						type = infrastructure
						level = 2
						instant_build = yes
					}
					set_state_flag = SOV_infrastructure_effort_3Inf
				}				
			}
			218 = {
				limit = {
					infrastructure < 3
				}
				add_building_construction = {
					type = infrastructure
					level = 2
					instant_build = yes
				}
				set_state_flag = SOV_infrastructure_effort_3Inf	
			}
			234 = {
				limit = {
					infrastructure < 3
				}
				add_building_construction = {
					type = infrastructure
					level = 2
					instant_build = yes
				}
				set_state_flag = SOV_infrastructure_effort_3Inf	
			}
			653 = {
				limit = {
					infrastructure < 3
				}
				add_building_construction = {
					type = infrastructure
					level = 2
					instant_build = yes
				}
				set_state_flag = SOV_infrastructure_effort_3Inf	
			}
			252 = {
				limit = {
					infrastructure < 3
				}
				add_building_construction = {
					type = infrastructure
					level = 2
					instant_build = yes
				}
				set_state_flag = SOV_infrastructure_effort_3Inf	
			}
			#added this to motivate player to invest into industry #Fantom
			if = {
				limit = {
					has_idea = SOV_poor_railnetworks_0
				}
				swap_ideas = { 
					remove_idea = SOV_poor_railnetworks_0
					add_idea = SOV_poor_railnetworks_1
				}
				else = {
					if = {
						limit = {
							has_idea = SOV_poor_railnetworks_1
						}
						swap_ideas = { 
							remove_idea = SOV_poor_railnetworks_1 
							add_idea = SOV_poor_railnetworks_2
						}
					}
				}
			}
		}
		search_filters = {FOCUS_FILTER_INDUSTRY}
	}

	focus = {
		id = SOV_heavy_industry

		icon = GFX_goal_communist_factory
		x = 2
		y = 0
		relative_position_id = SOV_infrastructure_effort_nsb
		cost = 5

		ai_will_do = {
			factor = 1
		}

		completion_reward = { #TODO_Manu: This is just copy-pasted from the old focus -> Is this what we want?
			IF = {
				limit = {
					any_owned_state = {
						is_controlled_by = ROOT 
						industrial_complex > 0
						free_building_slots = {
							building = industrial_complex
							size > 0
							include_locked = yes
						}
						NOT = { has_state_flag = SOV_finish_five_year_plan_2IC }
					}
				}
				random_owned_controlled_state = {
					limit = {
						industrial_complex > 0
						free_building_slots = {
							building = industrial_complex
							size > 0
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
					set_state_flag = SOV_finish_five_year_plan_2IC
				}
			}
			ELSE = {
				random_owned_controlled_state = {
					limit = {
						# industrial_complex > 0
						free_building_slots = {
							building = industrial_complex
							size > 0
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
					set_state_flag = SOV_finish_five_year_plan_2IC
				}
			}
			IF = {
				limit = {
					check_variable = { num_owned_states > 1}
					any_owned_state = {
						is_controlled_by = ROOT 
						industrial_complex > 0
						free_building_slots = {
							building = industrial_complex
							size > 0
							include_locked = yes
						}
						NOT = { has_state_flag = SOV_finish_five_year_plan_2IC }
					}
				}
				random_owned_controlled_state = {
					limit = {
						industrial_complex > 0
						free_building_slots = {
							building = industrial_complex
							size > 0
							include_locked = yes
						}
						NOT = { has_state_flag = SOV_finish_five_year_plan_2IC }
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
					set_state_flag = SOV_finish_five_year_plan_2IC
				}
			}
			ELSE_IF = {
				limit = {
					check_variable = { num_owned_states > 1 }
				}
				random_owned_controlled_state = {
					limit = {
						# industrial_complex > 0
						free_building_slots = {
							building = industrial_complex
							size > 0
							include_locked = yes
						}
						NOT = { has_state_flag = SOV_finish_five_year_plan_2IC }
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
					set_state_flag = SOV_finish_five_year_plan_2IC
				}
			}
		}
		search_filters = {FOCUS_FILTER_INDUSTRY}
	}

	focus = {
		id = SOV_Mass_Immunizations
		icon = GFX_goal_medicine
		prerequisite = { focus = SOV_heavy_industry }
		x = 1
		y = 1
		relative_position_id = SOV_heavy_industry
		cost = 5
		ai_will_do = {
			factor = 11
		}

		available_if_capitulated = yes

		select_effect = {
			set_country_flag = SOV_mass_immunizations_happened
		}

		completion_reward = {
			if = {
				limit = {
					has_idea = SOV_risk_of_disease
				}
			 remove_ideas = SOV_risk_of_disease
			}
			if = {
				limit = {
					has_idea = SOV_proliferation_of_disease
				}
			 remove_ideas = SOV_proliferation_of_disease
			}
			if = {
				limit = {
					has_idea = SOV_widespread_outbreaks
				}
			 remove_ideas = SOV_widespread_outbreaks
			}
			add_tech_bonus = {
				name = hospital_bonus
				bonus = 1
				uses = 1
				category = hospital_tech
			}
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}

	focus = {
		id = SOV_finish_the_five_year_plan

		icon = GFX_five_year_plan_continue
		prerequisite = { focus = SOV_infrastructure_effort_nsb }
		prerequisite = { focus = SOV_heavy_industry }
		x = 1
		y = 1
		relative_position_id = SOV_infrastructure_effort_nsb
		cost = 10

		available = {
				date > 1936.06.01
		}
		

		completion_reward = { #TODO_Manu: This is just copy-pasted from the old focus -> Is this what we want?
			random_owned_controlled_state = {
				limit = {
					industrial_complex > 0
					free_building_slots = {
						building = industrial_complex
						size > 2
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
				set_state_flag = SOV_finish_five_year_plan_2IC
			}
			random_owned_controlled_state = {
				limit = {
					industrial_complex > 0
					free_building_slots = {
						building = industrial_complex
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
				set_state_flag = SOV_finish_five_year_plan_2IC
			}

			custom_effect_tooltip = available_political_advisor
			show_ideas_tooltip = SOV_lazar_kaganovich
			if = {
				limit = {
					has_idea = SOV_poor_railnetworks_0
				}
				swap_ideas = { 
					remove_idea = SOV_poor_railnetworks_0
					add_idea = SOV_poor_railnetworks_1
				}
				else = {
					if = {
						limit = {
							has_idea = SOV_poor_railnetworks_1
						}
						swap_ideas = { 
							remove_idea = SOV_poor_railnetworks_1 
							add_idea = SOV_poor_railnetworks_2
						}
					}
				}
			}
		}
		search_filters = {FOCUS_FILTER_INDUSTRY}
	}
	focus = {
		id = SOV_unleashing_the_bears_prosperity  
		icon = GFX_focus_SWE_the_beast_stirs
		cost = 10.00
		prerequisite = { focus = SOV_develop_the_urals }
		prerequisite = { focus = SOV_eastern_development }
		relative_position_id = SOV_finish_the_five_year_plan
		x = 4
		y = 3
		
		
		completion_reward = {
				add_ideas = SOV_under_the_bear }
		}

	focus = {
		id = SOV_improve_railway_network

		icon = GFX_focus_generic_public_works_A
		prerequisite = { focus = SOV_finish_the_five_year_plan }
		x = -2
		y = 1
		relative_position_id = SOV_finish_the_five_year_plan
		cost = 2

		ai_will_do = {
			factor = 11
		}

		completion_reward = {
			# Moscow - Rostov on Don
			build_railway = {
				path = { 9330 3356 6279 6230 6398 6341 413 3527 11475 11412 6591 3540 3519 11459 11450 11434 9417 }
			}
			# Stalingrad-Rostov on Don
			build_railway = {
				path = { 3529 9504 533 9516 509 500 11459 } #(Stalingrad - Conjunction near Millerovo)
			}
			# Stalingrad-Mikhaylovka 
			build_railway = {
				path = { 9504 3582 9436 11485 3539 9564 11408 } #(Conjunction right next to Stalingrad - Conjunction in West Saratov)
			}
			# Stalingrad - Astrakhan
			build_railway = {
				path = { 3529 11474 520 6516 6486 9455 11429 6620 9753 }
			}
			# Tbilisi - Yerevan
			build_railway = {
				path = { 1599 9702 12441 3564 12320 }
			}

			#Supply Hub in Yerevan
			230 = {
				add_building_construction = {
					type = supply_node
					level = 1
					province = 12320
					instant_build = yes
				}
			}
			#Supply Hub in Kandalaksha
			213 = {
				add_building_construction = {
					type = supply_node
					level = 1
					province = 6181
					instant_build = yes
				}
			}

			custom_effect_tooltip = available_designer
			show_ideas_tooltip = SOV_soviet_railways

			#Stops Industry slowdown events from firing
			hidden_effect = {
				set_country_flag = SOV_fixed_choo_choo
			}

			if = {
				limit = {
					has_idea = SOV_industry_slow_down
				}
				remove_ideas = SOV_industry_slow_down
			}
			remove_ideas = SOV_poor_railnetworks_2
		}
		search_filters = {FOCUS_FILTER_INDUSTRY}
	}

	focus = {
		id = SOV_third_five_year_plan

		icon = GFX_5year_plan_complete
		prerequisite = { focus = SOV_finish_the_five_year_plan }
		x = 0
		y = 1
		relative_position_id = SOV_finish_the_five_year_plan
		cost = 10

		available = {
			date > 1937.01.01
		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH}

		completion_reward = {
			hidden_effect = {
				add_to_variable = { SOV_fyp_production_factory_efficiency_gain_factor = 0.05 }
				add_to_variable = { SOV_fyp_consumer_goods_factor = -0.05 }
			}
			if = {
				limit = {
					has_government = communism
				}
				hidden_effect = {
					#Swap dynamic modifier to change icon
					remove_dynamic_modifier = { modifier = SOV_second_five_year_plan_dynamic_modifier }
					add_dynamic_modifier = { modifier = SOV_third_five_year_plan_dynamic_modifier }
				}
				custom_effect_tooltip = SOV_third_five_year_plan_ns_tt
				random_owned_controlled_state = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
			
				add_tech_bonus = {
					name = SOV_third_five_year_plan_default
					bonus = 1
					uses = 2
					category = construction_tech
				}
			}
			else = {
				custom_effect_tooltip = SOV_third_five_year_plan_ns_alt_tt
				hidden_effect = {
					#Swap dynamic modifier to change icon
					remove_dynamic_modifier = { modifier = SOV_second_five_year_plan_dynamic_modifier }
					add_dynamic_modifier = { modifier = SOV_third_five_year_plan_dynamic_modifier_alt }
				}
				random_owned_controlled_state = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
				}
				random_owned_controlled_state = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
				}
				add_tech_bonus = {
					name = SOV_third_five_year_plan_alt
					bonus = 1
					uses = 2
					category = construction_tech
				}
			}
		}
	}

	focus = {
		id = SOV_reorganize_the_pc_of_heavy_industry

		icon = GFX_goal_generic_election_chaos
		prerequisite = { focus = SOV_third_five_year_plan }
		x = -2
		y = 2
		relative_position_id = SOV_third_five_year_plan
		cost = 5

		mutually_exclusive = { focus = SOV_shift_to_armaments_production }

		available = {
			SOV_third_five_year_plan_available = yes
			custom_trigger_tooltip = {
				tooltip = SOV_fyp_controlled_factories_tier_3_tt
				NOT = { num_of_controlled_factories < SOV_fyp_factory_requirement_tier_3 }
			}
			NOT = { has_completed_focus = SOV_curtailment_of_the_collective_farms }
		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH}

		completion_reward = {
			hidden_effect = {
				add_to_variable = { SOV_fyp_consumer_goods_factor = -0.03 }
			}
			custom_effect_tooltip = SOV_reorganize_the_pc_of_heavy_industry_ns_tt
			if = {
				limit = {
					has_government = communism
				}
				hidden_effect = {
					#Swap dynamic modifier to change icon
					remove_dynamic_modifier = { modifier = SOV_third_five_year_plan_dynamic_modifier }
					add_dynamic_modifier = { modifier = SOV_third_five_year_plan_civilian_dynamic_modifier }
				}
				random_owned_controlled_state = {
					limit = {
						free_building_slots = {
							building = industrial_complex
							size > 1
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
				}
				add_tech_bonus = {
					name = SOV_reorganize_the_pc_of_heavy_industry_name_default
					bonus = 1.0
					uses = 2
					category = industry
					category = electronics
				}
			}
			else = {
				hidden_effect = {
					#Swap dynamic modifier to change icon
					remove_dynamic_modifier = { modifier = SOV_third_five_year_plan_dynamic_modifier_alt}
					add_dynamic_modifier = { modifier = SOV_third_five_year_plan_civilian_dynamic_modifier_alt }
				}
				random_owned_controlled_state = {
					limit = {
						free_building_slots = {
							building = arms_factory
							size > 0
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 2
						instant_build = yes
					}
				}
				add_tech_bonus = {
					name = SOV_reorganize_the_pc_of_heavy_industry_name_alt
					bonus = 1.0
					uses = 2
					category = industry
					category = electronics
				}
			}
		}
	}

	focus = {
		id = SOV_industrial_modernization

		icon = GFX_goal_reichsautobahn
		prerequisite = { focus = SOV_reorganize_the_pc_of_heavy_industry }
		x = 0
		y = 3
		relative_position_id = SOV_reorganize_the_pc_of_heavy_industry
		cost = 10

		available = {
			SOV_third_five_year_plan_available = yes
			custom_trigger_tooltip = {
				tooltip = SOV_fyp_controlled_factories_tier_4_tt
				NOT = { num_of_controlled_factories < SOV_fyp_factory_requirement_tier_4 }
			}
			NOT = { has_completed_focus = SOV_curtailment_of_the_collective_farms }
		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH}

		completion_reward = {
			add_to_variable = { SOV_fyp_production_factory_max_efficiency_factor = 0.05 }
			add_to_variable = { SOV_fyp_line_change_production_efficiency_factor = 0.1 }
			custom_effect_tooltip = SOV_industrial_modernization_ns_tt

			add_tech_bonus = {
				name = SOV_industrial_modernization
				ahead_reduction = 2
				bonus = 1.0
				uses = 1
				category = industry
			}
		}
	}

	focus = {
		id = SOV_increase_state_reserves

		icon = GFX_goal_oil
		prerequisite = { focus = SOV_third_five_year_plan }
		x = 0
		y = 1
		relative_position_id = SOV_third_five_year_plan
		cost = 5

		available = {
			SOV_third_five_year_plan_available = yes
			NOT = { has_completed_focus = SOV_curtailment_of_the_collective_farms }
		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY}

		completion_reward = {
			#Modify Third Year Plan NS
			set_variable = { SOV_fyp_local_resources_factor = 0.1 }
			custom_effect_tooltip = SOV_increase_state_reserves_ns_tt

			custom_effect_tooltip = SOV_increase_state_reserves_silo_tt
			set_temp_variable = { temp_targets_index = 0 }
			
			while_loop_effect = {
				limit = {
					check_variable = { temp_targets_index = 3 compare = less_than }
					any_owned_state = {
						infrastructure < 3
						free_building_slots = {
							building = fuel_silo
							size > 0
							include_locked = yes
						}
						NOT = { has_state_flag = SOV_increase_state_reserves_flag }
					}
				}
				if = { #If possible, prio low-infrastructure states for silos
					limit = {
						any_owned_state = {
							infrastructure < 3
							free_building_slots = {
								building = fuel_silo
								size > 0
								include_locked = yes
							}
							NOT = { has_state_flag = SOV_increase_state_reserves_flag }
						}
					}
					random_owned_controlled_state = {
						limit = {
							infrastructure < 3
							free_building_slots = {
								building = fuel_silo
								size > 0
								include_locked = yes
							}
							NOT = { has_state_flag = SOV_increase_state_reserves_flag }
						}
						set_state_flag = SOV_increase_state_reserves_flag
						add_extra_state_shared_building_slots = 1
						add_building_construction = {
							type = fuel_silo
							level = 1
							instant_build = yes
						}
					}
				}
				else = {
					random_owned_controlled_state = {
						limit = {
							free_building_slots = {
								building = fuel_silo
								size > 0
								include_locked = yes
							}
							NOT = { has_state_flag = SOV_increase_state_reserves_flag }
						}
						set_state_flag = SOV_increase_state_reserves_flag
						add_extra_state_shared_building_slots = 1
						add_building_construction = {
							type = fuel_silo
							level = 1
							instant_build = yes
						}
					}
				}
				add_to_temp_variable = { temp_targets_index = 1 }
			}
			every_owned_state = { #Tooltip purposes (lets you know which states have been selected once the focus is completed)
				limit = {
					has_state_flag = SOV_increase_state_reserves_flag
				}
			}
		}
	}

	focus = {
		id = SOV_shift_to_armaments_production

		icon = GFX_focus_generic_combined_arms
		prerequisite = { focus = SOV_third_five_year_plan }
		x = 2
		y = 2
		relative_position_id = SOV_third_five_year_plan
		cost = 10

		mutually_exclusive = { focus = SOV_reorganize_the_pc_of_heavy_industry}

		available = {
			SOV_third_five_year_plan_available = yes
			custom_trigger_tooltip = {
				tooltip = SOV_fyp_controlled_factories_tier_3_tt
				NOT = { num_of_controlled_factories < SOV_fyp_factory_requirement_tier_3 }
			}
			NOT = { has_completed_focus = SOV_curtailment_of_the_collective_farms }
		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH}

		completion_reward = {
			hidden_effect = {
				set_variable = { SOV_fyp_production_speed_industrial_complex_factor = 0 } #Remove Civ constr speed
			}
			if = {
				limit = {
					has_government = communism
				}
				hidden_effect = {
					#Swap dynamic modifier to change icon
					remove_dynamic_modifier = { modifier = SOV_third_five_year_plan_dynamic_modifier }
					add_dynamic_modifier = { modifier = SOV_third_five_year_plan_military_dynamic_modifier }
				}
			}
			else = {
				hidden_effect = {
					#Swap dynamic modifier to change icon
					remove_dynamic_modifier = { modifier = SOV_third_five_year_plan_dynamic_modifier }
					add_dynamic_modifier = { modifier = SOV_third_five_year_plan_military_dynamic_modifier }
				}
			}
			custom_effect_tooltip = SOV_shift_to_armaments_production_ns_tt
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
			add_tech_bonus = {
				name = SOV_shift_to_armaments_production
				bonus = 1.0
				uses = 2
				category = infantry_weapons
			}
		}
	}

	focus = {
		id = SOV_optimize_production_lines

		icon = GFX_focus_generic_tank_production
		prerequisite = { focus = SOV_shift_to_armaments_production }
		x = 0
		y = 3
		relative_position_id = SOV_shift_to_armaments_production
		cost = 10

		available = {
			SOV_third_five_year_plan_available = yes
			custom_trigger_tooltip = {
				tooltip = SOV_fyp_controlled_factories_tier_4_tt
				NOT = { num_of_controlled_factories < SOV_fyp_factory_requirement_tier_4 }
			}
			NOT = { has_completed_focus = SOV_curtailment_of_the_collective_farms }
		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH}

		completion_reward = {
			add_to_variable = { SOV_fyp_production_factory_efficiency_gain_factor = 0.05 } #Add efficiency gain
			add_to_variable = { SOV_fyp_production_factory_start_efficiency_factor = 0.05 } #Add efficiency start
			add_to_variable = { SOV_fyp_industrial_capacity_factory = 0.02 } #Add small output bonus
			custom_effect_tooltip = SOV_optimize_production_lines_ns_tt

			add_tech_bonus = {
				name = SOV_optimize_production_lines
				bonus = 1
				uses = 2
				category = cat_production
			}
		}
	}

	focus = {
		id = SOV_urbanization #Forced Urbanization
		icon = GFX_forced_urbanization
		prerequisite = { focus = SOV_industrial_modernization focus = SOV_optimize_production_lines }
		x = 0
		y = 1
		relative_position_id = SOV_optimize_production_lines
		cost = 10
		ai_will_do = {
			factor = 1000
		}
		available_if_capitulated = yes

		completion_reward = {
			add_ideas = SOV_urbanization_focus
			add_timed_idea = {
				idea = SOV_urbanization_focus_debuff
				days = 350
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY FOCUS_FILTER_MANPOWER }
	}

	focus = {
		id = SOV_steel_casting_industry

		icon = GFX_focus_generic_steel
		prerequisite = { focus = SOV_reorganize_the_pc_of_heavy_industry focus = SOV_shift_to_armaments_production }
		x = 2
		y = 1
		relative_position_id = SOV_reorganize_the_pc_of_heavy_industry
		cost = 10

		available = {
			any_owned_state = {
				is_controlled_by = ROOT
				has_resources_amount = {
					resource = steel
					amount > 0
				}
				free_building_slots = {
					building = industrial_complex
					size > 1
					include_locked = yes
				}
			}
			SOV_third_five_year_plan_available = yes
			NOT = { has_completed_focus = SOV_curtailment_of_the_collective_farms }
		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_STEEL }

		completion_reward = {
			set_variable = { SOV_fyp_industrial_capacity_factory = 0.05 }
			set_variable = { SOV_fyp_industrial_capacity_dockyard = 0.05 }

			custom_effect_tooltip = SOV_steel_casting_industry_ns_tt

			if = {
				limit = {
					NOT = { has_tech = assembly_line_production }
				}
				add_tech_bonus = {
					name = industrial_bonus
					bonus = 1
					ahead_reduction = 1
					uses = 1
					technology = assembly_line_production
				}
			}
			if = {
				limit = {
					has_tech = assembly_line_production
				}
				add_tech_bonus = {
					name = construction_bonus
					bonus = 0.5
					uses = 1
					category = construction_tech
				}
			}

			random_owned_controlled_state = {
				limit = {
					has_resources_amount = {
						resource = steel
						amount > 0
					}
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				
				add_building_construction = {
						type = arms_factory
						level = 2
						insant_build = yes
				}
				add_resource = {
					type = steel
					amount = 8
				}
				set_state_flag = SOV_steel_casting_industry_flag
			}
			if = {
				limit = {
					any_owned_state = {
						has_resources_amount = {
							resource = steel
							amount > 0
						}
						free_building_slots = {
							building = industrial_complex
							size > 1
							include_locked = yes
						}
						NOT = {	has_state_flag = SOV_steel_casting_industry_flag }
					}
				}
				random_owned_controlled_state = {
					limit = {
						has_resources_amount = {
							resource = steel
							amount > 0
						}
						free_building_slots = {
							building = industrial_complex
							size > 0
							include_locked = yes
						}
						NOT = {	has_state_flag = SOV_steel_casting_industry_flag }
					}
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
					
					add_resource = {
						type = steel
						amount = 8
					}
					set_state_flag = SOV_steel_casting_industry_flag
				}
			}
		}
	}

	focus = {
		id = SOV_synthetic_rubber

		icon = GFX_focus_generic_rubber
		prerequisite = { focus = SOV_steel_casting_industry }
		x = -1
		y = 1
		relative_position_id = SOV_steel_casting_industry
		cost = 5

		available = {
			has_tech = rubber_plant_a
			SOV_third_five_year_plan_available = yes
			NOT = { has_completed_focus = SOV_curtailment_of_the_collective_farms }
			has_full_control_of_state = 219 #MOSCOW
			OR = {
				has_full_control_of_state = 260 #VORONEZH
				has_full_control_of_state = 223 #TULA
			}
		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH FOCUS_FILTER_RUBBER }

		completion_reward = {
			# ADD SYNTHETICS IN HISTORICAL STATES (VORONEZH AND TULA)
			if = {
				limit = {
					has_full_control_of_state = 260 #VORONEZH
				}
				260 = { #VORONEZH
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = rubber_refinery
						level = 1
						instant_build = yes
					}
				}
				if = {
					limit = {
						has_full_control_of_state = 254 #RYAZAN
						has_full_control_of_state = 258 #LIPETSK
					}
					# Moscow - Voronezh
					build_railway = {
						path = { 6380 6414 9348 9282 11268 9330 3356 6279 6230 6398 6341 413 3527 }
					}
				}
			}
			if = {
				limit = {
					has_full_control_of_state = 223 #TULA
				}
				223 = { #TULA
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = rubber_refinery
						level = 1
						instant_build = yes
					}
				}
				# Moscow - Tula
				build_railway = {
					path = { 6380 6414 9348 6290 6396 6262 }
				}
			}
			add_tech_bonus = {
				name = SOV_synthetic_rubber
				bonus = 1
				uses = 2
				category = cat_synth_rubber
			}
			modify_building_resources = {
				building = rubber_refinery
				resource = rubber
				amount = 2
			 }
		}
	}

	focus = {
		id = SOV_oil_production

		icon = GFX_goal_refining
		prerequisite = { focus = SOV_steel_casting_industry }
		x = 1
		y = 1
		relative_position_id = SOV_steel_casting_industry
		cost = 7.16

		available = {
			SOV_third_five_year_plan_available = yes
			NOT = { has_completed_focus = SOV_curtailment_of_the_collective_farms }
		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_OIL }

		completion_reward = {
			set_variable = { SOV_fyp_fuel_gain_factor_from_states = 0.05 }
			set_variable = { SOV_fyp_production_oil_factor = 0.05 }
			custom_effect_tooltip = SOV_oil_production_ns_tt
			
			set_temp_variable = { SOV_silos_from_focus = 0 }
			every_owned_state = {
				limit ={
					is_fully_controlled_by = ROOT
					has_resources_amount = {
						resource = oil
						amount > 0
					}
					infrastructure < 3
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes						
				}
				hidden_effect = {
					if = {
						limit = {
							check_variable = { SOV_silos_from_focus = 2 compare = less_than_or_equals }
						}		
						add_extra_state_shared_building_slots = 1	
						add_building_construction = {
							type = fuel_silo
							level = 1
							instant_build = yes						
						}
						add_to_temp_variable = { SOV_silos_from_focus = 1 }
					}
				}
				custom_effect_tooltip = SOV_oil_production_silo_tt
			}
			#Build Railways in Caucasus
			if = {
				limit = {
					has_full_control_of_state = 229 #BAKU
					has_full_control_of_state = 230 #ARMENIA
					has_full_control_of_state = 231 #GEORGIA
				}
				# Baku - Tbilisi
				build_railway = {
					path = { 7661 1536 4614 4477 11645 11674 1539 11708 1599 }
				}
			}
			if = {
				limit = {
					has_full_control_of_state = 232 #DAGESTAN
					has_full_control_of_state = 821 #CHECHNYA-INGUSHETIA
				}
				# Makhachkala (Hub province) - Grozny
				build_railway = {
					path = { 3668 3682 3672 }
				}
			}
			if = {
				limit = {
					has_country_flag = prospect_volga_ural_basin
				}
				add_resource = {
					type = oil
					amount = 2
					state = 249
				}				
			}
			if = {
				limit = {
					NOT = {
						has_country_flag = prospect_volga_ural_basin
					}
				}
				add_resource = {
					type = oil
					amount = 2
					state = 232
				}				
			}

			if = {
				limit = {
					has_full_control_of_state = 229
					NOT = {
						has_country_flag = prospect_volga_ural_basin
					}					
				}
				add_resource = {
					type = oil
					amount = 26
					state = 229
				}				
			}
			if = {
				limit = {
					AZR = {
						has_full_control_of_state = 229
						is_puppet_of = SOV
					}
					NOT = {
						has_country_flag = prospect_volga_ural_basin
					}
				}
				add_resource = {
					type = oil
					amount = 26
					state = 229
				}				
			}
			if = {
				limit = {
					ARM = {
						has_full_control_of_state = 229
						is_puppet_of = SOV
					}
					NOT = {
						has_country_flag = prospect_volga_ural_basin
					}					
				}
				add_resource = {
					type = oil
					amount = 26
					state = 229
				}				
			}

			if = {
				limit = {
					has_full_control_of_state = 651
					has_country_flag = prospect_volga_ural_basin
				}
				add_resource = {
					type = oil
					amount = 26
					state = 651
				}				
			}
		}
	}

	focus = { #unlock this focus once the war with a major is over
		id = SOV_restoration_and_development

		icon = GFX_goal_r56_CAN_industry
		prerequisite = { focus = SOV_industrial_modernization focus = SOV_optimize_production_lines }
		x = 2
		y = 1
		relative_position_id = SOV_industrial_modernization
		cost = 5

		cancel_if_invalid = no

		available = {
			SOV_fourth_five_year_plan_available = yes
			NOT = { has_completed_focus = SOV_curtailment_of_the_collective_farms }
		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_PROPAGANDA}

		completion_reward = {
			add_timed_idea = {
				idea = SOV_restoration_and_development_idea
				days = 365
			}

			if = {
				limit = {
					has_government = communism
				}
				custom_effect_tooltip = unlock_propaganda_campaign_tt
				unlock_decision_tooltip = SOV_propaganda_rebuild_to_glory
				unlock_decision_tooltip = SOV_propaganda_peace
				unlock_decision_tooltip = SOV_propaganda_happy_life
				custom_effect_tooltip = propaganda_campaign_requirement_tt
			}
		}
	}

	focus = {
		id = SOV_fourth_five_year_plan

		icon = GFX_goal_generic_industrial_unionism
		prerequisite = { focus = SOV_restoration_and_development }
		x = 0
		y = 1
		relative_position_id = SOV_restoration_and_development
		cost = 10

		available = {
			custom_trigger_tooltip = {
				tooltip = SOV_fyp_controlled_factories_tier_5_tt
				NOT = { num_of_controlled_factories < SOV_fyp_factory_requirement_tier_5 }
			}
			NOT = { has_completed_focus = SOV_curtailment_of_the_collective_farms }
		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY}

		completion_reward = {
			hidden_effect = {
				add_to_variable = { SOV_fyp_consumer_goods_factor = -0.03 } #Bonus to CG
				add_to_variable = { SOV_fyp_production_factory_max_efficiency_factor = 0.05 } #Bonus to max efficicency
				if = {
					limit = {
						has_government = communism
					}
					#Swap dynamic modifier to change icon
					if = {
						limit = {
							has_dynamic_modifier = { modifier = SOV_third_five_year_plan_civilian_dynamic_modifier }
						}
						remove_dynamic_modifier = { modifier = SOV_third_five_year_plan_civilian_dynamic_modifier }
					}
					else_if = {
						limit = {
							has_dynamic_modifier = { modifier = SOV_third_five_year_plan_military_dynamic_modifier }
						}
						remove_dynamic_modifier = { modifier = SOV_third_five_year_plan_military_dynamic_modifier }
					}
					else_if = {
						limit = {
							has_dynamic_modifier = { modifier = SOV_third_five_year_plan_dynamic_modifier }
						}
						remove_dynamic_modifier = { modifier = SOV_third_five_year_plan_dynamic_modifier }
					}
					add_dynamic_modifier = { modifier = SOV_fourth_five_year_plan_dynamic_modifier }
				}
				else = {
					#Swap dynamic modifier to change icon
					if = {
						limit = {
							has_dynamic_modifier = { modifier = SOV_third_five_year_plan_civilian_dynamic_modifier_alt }
						}
						remove_dynamic_modifier = { modifier = SOV_third_five_year_plan_civilian_dynamic_modifier_alt }
					}
					else_if = {
						limit = {
							has_dynamic_modifier = { modifier = SOV_third_five_year_plan_military_dynamic_modifier_alt }
						}
						remove_dynamic_modifier = { modifier = SOV_third_five_year_plan_military_dynamic_modifier_alt }
					}
					else_if = {
						limit = {
							has_dynamic_modifier = { modifier = SOV_third_five_year_plan_dynamic_modifier_alt }
						}
						remove_dynamic_modifier = { modifier = SOV_third_five_year_plan_dynamic_modifier_alt }
					}
					add_dynamic_modifier = { modifier = SOV_fourth_five_year_plan_dynamic_modifier_alt }
				}
			}
			custom_effect_tooltip = SOV_fourth_five_year_plan_ns_tt
		}
	}

	# focus = { MOVED INTO IRON CURTAIN
	# 	id = SOV_found_the_comecon

	# 	icon = GFX_focus_SOV_the_comecon
	# 	prerequisite = { focus = SOV_fourth_five_year_plan }
	# 	x = 0
	# 	y = 1
	# 	relative_position_id = SOV_fourth_five_year_plan
	# 	cost = 10

	# 	allow_branch = {
	# 		has_government = communism
	# 	}

	# 	available = {
	# 		num_subjects > 0
	# 		NOT = { has_completed_focus = SOV_curtailment_of_the_collective_farms }
	# 	}
		
	# 	search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH}

	# 	completion_reward = {
	# 		if = {
	# 			limit = {
	# 				num_subjects > 0
	# 			}
	# 			add_ideas = SOV_comecon_sov_default
	# 			custom_effect_tooltip = SOV_found_the_comecon_subjects_tt
	# 			every_other_country = {
	# 				limit = {
	# 					is_subject_of = ROOT
	# 				}
	# 				add_ideas = SOV_comecon_puppet_default
	# 			}

	# 			custom_effect_tooltip = SOV_found_the_comecon_program_tt
	# 			hidden_effect = {
	# 				add_to_tech_sharing_group = SOV_comecon
	# 				every_country = {
	# 					limit = {
	# 						is_subject_of = ROOT
	# 					}
	# 					add_to_tech_sharing_group = SOV_comecon
	# 				}
	# 			}
	# 		}
	# 		else = { #Early tooltip for when Soviets have no subjects
	# 			effect_tooltip = {
	# 				add_ideas = SOV_comecon_sov_default
	# 			}
	# 			custom_effect_tooltip = SOV_found_the_comecon_subjects_tt
	# 			effect_tooltip = {
	# 				add_ideas = SOV_comecon_puppet_default
	# 			}
	# 			custom_effect_tooltip = SOV_found_the_comecon_program_tt
	# 		}

	# 		unlock_decision_category_tooltip = SOV_comecon_dec_cat
	# 	}
	# }

	focus = {
		id = SOV_the_common_economic_space_initiative

		icon = GFX_goal_anschluss
		prerequisite = { focus = SOV_fourth_five_year_plan }
		x = 0
		y = 1
		relative_position_id = SOV_fourth_five_year_plan
		cost = 10

		allow_branch = {
			NOT = { has_government = communism }
		}

		available = {
			num_subjects > 0
		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH}

		completion_reward = {
			if = {
				limit = {
					num_subjects > 0
				}
				add_ideas = SOV_common_economic_space_sov_default
				custom_effect_tooltip = SOV_found_the_comecon_subjects_tt
				every_other_country = {
					limit = {
						is_subject_of = ROOT
					}
					add_ideas = SOV_common_economic_space_puppet_default
				}

				custom_effect_tooltip = SOV_found_the_comecon_program_tt
				hidden_effect = {
					add_to_tech_sharing_group = SOV_common_economic_space
					every_country = {
						limit = {
							is_subject_of = ROOT
						}
						add_to_tech_sharing_group = SOV_comecon
					}
				}
			}
			else = { #Early tooltip for when Soviets have no subjects
				effect_tooltip = {
					add_ideas = SOV_common_economic_space_sov_default
				}
				custom_effect_tooltip = SOV_found_the_comecon_subjects_tt
				effect_tooltip = {
					add_ideas = SOV_common_economic_space_puppet_default
				}
				custom_effect_tooltip = SOV_found_the_comecon_program_tt
			}

			unlock_decision_category_tooltip = SOV_comecon_dec_cat
		}
	}

	focus = {
		id = SOV_no_time_for_peace

		icon = GFX_goal_soviet_rocketry
		prerequisite = { focus = SOV_fourth_five_year_plan }
		prerequisite = { focus = SOV_national_academies_of_sciences }
		x = 3
		y = 1
		relative_position_id = SOV_fourth_five_year_plan
		cost = 10
		
		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH}

		completion_reward = {
			add_tech_bonus = {
				name = SOV_no_time_for_peace
				bonus = 0.75
				uses = 2
				category = nuclear
				category = rocketry
			}

			add_ideas = SOV_no_time_for_peace_idea
		}
	}

	focus = {
		id = SOV_national_specialists

		icon = GFX_goal_generic_citizens
		prerequisite = { focus = SOV_finish_the_five_year_plan }
		x = 3
		y = 1
		relative_position_id = SOV_finish_the_five_year_plan
		cost = 5

		mutually_exclusive = { focus = SOV_foreign_experts }
		
		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH}

		completion_reward = {
			custom_effect_tooltip = SOV_national_specialists_tt

			SOV_replace_industrial_designer = yes #"National" Industrial Designers get +5% research bonus
			hidden_effect = {
				add_ideas = SOV_national_specialists_ns
			}
		}
	}

	focus = {
		id = SOV_foreign_experts

		icon = GFX_focus_spa_the_spanish_miracle
		prerequisite = { focus = SOV_finish_the_five_year_plan }
		x = 2
		y = 0
		relative_position_id = SOV_national_specialists
		cost = 5

		mutually_exclusive = { focus = SOV_national_specialists }
		
		search_filters = {FOCUS_FILTER_INDUSTRY}

		completion_reward = {
			custom_effect_tooltip = available_designer
			show_ideas_tooltip = SOV_gosproyektstroy_1
			
		}
	}

	focus = {
		id = SOV_eastern_development

		icon = GFX_goal_generic_construction_tools
		prerequisite = { focus = SOV_national_specialists focus = SOV_foreign_experts }
		x = 0
		y = 1
		relative_position_id = SOV_national_specialists
		cost = 5

		bypass = {
			408 = { #VLADIVOSTOK
				is_fully_controlled_by = ROOT
				NOT = {
					infrastructure < 5
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
				}
			}
			409 = { #KHABAROVSK
				is_fully_controlled_by = ROOT
				is_fully_controlled_by = ROOT
				NOT = {
					infrastructure < 5
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
				}
			}
			566 = { #IRKUTSK
				is_fully_controlled_by = ROOT
				is_fully_controlled_by = ROOT
				NOT = {
					infrastructure < 5
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
				}
			}
			564 = { #ULAN UDE
				is_fully_controlled_by = ROOT
				is_fully_controlled_by = ROOT
				NOT = {
					infrastructure < 5
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
				}
			}
		}

		available = {
			OR = {
				408 = { #VLADIVOSTOK
					is_fully_controlled_by = ROOT
				}
				409 = { #KHABAROVSK
					is_fully_controlled_by = ROOT
				}
				566 = { #IRKUTSK
					is_fully_controlled_by = ROOT
				}
				564 = { #ULAN UDE
					is_fully_controlled_by = ROOT
				}
			}
		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY}

		completion_reward = {
			set_temp_variable = { SOV_states_targeted_eastern_development = 0 } #Used this way to prioritize between desirable states
			if = {
				limit = {
					408 = { #VLADIVOSTOK
						is_fully_controlled_by = ROOT
						infrastructure < 5
						free_building_slots = {
							building = industrial_complex
							size > 0
							include_locked = yes
						}
					}
				}
				408 = { #VLADIVOSTOK
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
				}
				add_to_temp_variable = { SOV_states_targeted_eastern_development = 1 }
			}
			else_if = { #Irkutsk replaces Vladivostok if necessary
				limit = {
					check_variable = { SOV_states_targeted_eastern_development = 2 compare = less_than_or_equals }
					566 = { #IRKUTSK
						is_fully_controlled_by = ROOT
						infrastructure < 5
						free_building_slots = {
							building = industrial_complex
							size > 0
							include_locked = yes
						}
					}
				}
				566 = { #IRKUTSK
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
				}
			}

			if = {
				limit = {
					409 = { #KHABAROVSK
						is_fully_controlled_by = ROOT
						infrastructure < 5
						free_building_slots = {
							building = industrial_complex
							size > 0
							include_locked = yes
						}
					}
				}
				409 = { #KHABAROVSK
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
				}
				add_to_temp_variable = { SOV_states_targeted_eastern_development = 1 }
			}
			else_if = { #Ulan Ude replaces Khabarovsk if necessary
				limit = {
					check_variable = { SOV_states_targeted_eastern_development = 2 compare = less_than_or_equals }
					564 = { #ULAN UDE
						is_fully_controlled_by = ROOT
						infrastructure < 5
						free_building_slots = {
							building = industrial_complex
							size > 0
							include_locked = yes
						}
					}
				}
				564 = { #ULAN UDE
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
				}
			}
		}
	}

	focus = {
		id = SOV_develop_the_urals

		icon = GFX_goal_generic_light_industry
		prerequisite = { focus = SOV_national_specialists focus = SOV_foreign_experts }
		x = 2
		y = 0
		relative_position_id = SOV_eastern_development
		cost = 5

		bypass = {
			572 = { #CHELYABISNK
				is_fully_controlled_by = ROOT
				NOT = {
					infrastructure < 5
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
				}
			}
			573 = { #ZLATOUST
				is_fully_controlled_by = ROOT
				is_fully_controlled_by = ROOT
				NOT = {
					infrastructure < 5
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
				}
			}
			582 = { #MAGNITOGORSK
				is_fully_controlled_by = ROOT
				is_fully_controlled_by = ROOT
				NOT = {
					infrastructure < 5
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
				}
			}
			653 = { #SVERDLOVSK
				is_fully_controlled_by = ROOT
				is_fully_controlled_by = ROOT
				NOT = {
					infrastructure < 5
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
				}
			}
		}

		available = {
			OR = {
				572 = { #CHELYABISNK
					is_fully_controlled_by = ROOT
				}
				573 = { #ZLATOUST
					is_fully_controlled_by = ROOT
				}
				582 = { #MAGNITOGORSK
					is_fully_controlled_by = ROOT
				}
				653 = { #SVERDLOVSK
					is_fully_controlled_by = ROOT
				}
			}
		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY}

		completion_reward = {
			set_temp_variable = { SOV_states_targeted_eastern_development = 0 } #Used this way to prioritize between desirable states
			if = {
				limit = {
					572 = { #CHELYABISNK
						is_fully_controlled_by = ROOT
						infrastructure < 5
						free_building_slots = {
							building = industrial_complex
							size > 0
							include_locked = yes
						}
					}
				}
				572 = { #CHELYABISNK
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
				}
				add_to_temp_variable = { SOV_states_targeted_eastern_development = 1 }
			}
			else_if = { #Magnitogorsk replaces Chelyabinsk if necessary
				limit = {
					check_variable = { SOV_states_targeted_eastern_development = 2 compare = less_than_or_equals }
					582 = { #MAGNITOGORSK
						is_fully_controlled_by = ROOT
						infrastructure < 5
						free_building_slots = {
							building = industrial_complex
							size > 0
							include_locked = yes
						}
					}
				}
				582 = { #MAGNITOGORSK
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
				}
				add_resource = {
					type = oil
					amount = 2
					state = 582
				}
			}

			if = {
				limit = {
					573 = { #ZLATOUST
						is_fully_controlled_by = ROOT
						infrastructure < 5
						free_building_slots = {
							building = industrial_complex
							size > 0
							include_locked = yes
						}
					}
				}
				573 = { #ZLATOUST
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
				}
				add_resource = {
					type = chromium
					amount = 3
					state = 573
				}
				add_to_temp_variable = { SOV_states_targeted_eastern_development = 1 }
			}
			else_if = { #Sverdlovsk replaces Zlatoust if necessary
				limit = {
					check_variable = { SOV_states_targeted_eastern_development = 2 compare = less_than_or_equals }
					653 = { #SVERDLOVSK
						is_fully_controlled_by = ROOT
						infrastructure < 5
						free_building_slots = {
							building = industrial_complex
							size > 0
							include_locked = yes
						}
					}
				}
				653 = { #SVERDLOVSK
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
				}
			}
			add_resource = {
				type = aluminium
				amount = 1
				state = 581
			}
		}
	}

	focus = {
		id = SOV_the_ussr_academy_of_sciences

		icon = GFX_goal_SOV_education_initiative
		prerequisite = { focus = SOV_unleashing_the_bears_prosperity }
	
		x = 1
		y = 2
		relative_position_id = SOV_eastern_development
		cost = 10
		
		search_filters = {FOCUS_FILTER_RESEARCH}

		completion_reward = {
			add_research_slot = 1
			if = {
				limit = {
					any_country = {
						SOV_is_valid_academy_of_sciences_target = yes
					}
				}
				if = { #ALT IDEOLOGY
					limit = {
						NOT = { has_government = communism }
					}
					add_to_tech_sharing_group = SOV_imperial_academies_of_sciences_joint_program
					every_country = {
						limit = {
							SOV_is_valid_academy_of_sciences_target = yes
						}
						add_to_tech_sharing_group = SOV_imperial_academies_of_sciences_joint_program
					}
				}
				else = { #DEFAULT COMMUNISM
					add_to_tech_sharing_group = SOV_soviet_academies_of_sciences_joint_program
					every_country = {
						limit = {
							SOV_is_valid_academy_of_sciences_target = yes
						}
						add_to_tech_sharing_group = SOV_soviet_academies_of_sciences_joint_program
					}
				}
			}
			if = { #ALT IDEOLOGY
				limit = {
					NOT = { has_government = communism }
				}
				hidden_effect = {
					add_dynamic_modifier = { modifier = SOV_ussr_academy_of_sciences_dynamic_modifier_alt }
				}
				effect_tooltip = { add_ideas = SOV_national_academy_of_sciences_alt_fake }
			}
			else = { #DEFAULT COMMUNISM
				hidden_effect = {
					add_dynamic_modifier = { modifier = SOV_ussr_academy_of_sciences_dynamic_modifier }
				}
				effect_tooltip = { add_ideas = SOV_national_academy_of_sciences_fake }
			}
		}
	}
	focus = {
		id = SOV_Social_Welfare
		icon = GFX_social_welfare
		prerequisite = { focus = SOV_the_ussr_academy_of_sciences }
		x = -1
		y = 1
		relative_position_id = SOV_the_ussr_academy_of_sciences
		cost = 5
		ai_will_do = {
			factor = 11
		}

		available = {
			if = {
				limit = {
					is_ai = no
				}
				custom_trigger_tooltip = {
					tooltip = SOV_fyp_controlled_factories_tier_1_tt
					NOT = { num_of_controlled_factories < SOV_fyp_factory_requirement_tier_1 }
				}
				surrender_progress < 0.25 #listen if you wanted this long to take this you fucked up
			}
			else = {
				custom_trigger_tooltip = {
					tooltip = SOV_fyp_controlled_factories_tier_1_tt
					NOT = { num_of_controlled_factories < SOV_fyp_factory_requirement_tier_1 }
				}
				surrender_progress < 0.25 
			}
		}


		bypass = {
			NOT = { has_government = communism }
		}

		completion_reward = {
			add_political_power = 25
			add_ideas = SOV_social_welfare_focus
		}
		search_filters = { FOCUS_FILTER_INDUSTRY FOCUS_FILTER_STABILITY }
	}


	focus = {
		id = SOV_Invest_in_Engineering
		icon = GFX_focus_generic_socialist_science
		prerequisite = { focus = SOV_the_ussr_academy_of_sciences }
		x = 1
		y = 1
		relative_position_id = SOV_the_ussr_academy_of_sciences
		cost = 5
		ai_will_do = {
			factor = 1000
		}

		completion_reward = {
			add_ideas = SOV_invest_in_engineering_focus
			add_tech_bonus = {
				name = electronics_bonus
				bonus = 0.5
				uses = 1
				category = electronics
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH }
	}

	focus = {
		id = SOV_national_academies_of_sciences

		icon = GFX_focus_research2
		prerequisite = { focus = SOV_the_ussr_academy_of_sciences }
		x = 0
		y = 3
		relative_position_id = SOV_the_ussr_academy_of_sciences
		cost = 5
		
		search_filters = {FOCUS_FILTER_RESEARCH}

		completion_reward = {
			custom_effect_tooltip = SOV_national_academies_of_sciences_tt
		}
	}

	focus = {
		id = SOV_progress_cult
		icon = GFX_goal_supremacy_of_will
		prerequisite = { focus = SOV_national_academies_of_sciences }
		x = 0
		y = 1
		relative_position_id = SOV_national_academies_of_sciences
		cost = 14.30
		ai_will_do = {
			factor = 7
		}

		available = {
			custom_trigger_tooltip = {
				tooltip = SOV_fyp_controlled_factories_tier_5_tt
				NOT = { num_of_controlled_factories < SOV_fyp_factory_requirement_tier_5 }
			}
		}

		available_if_capitulated = yes

		completion_reward = {
			add_ideas = progress_cult_focus_2
			add_tech_bonus = {
				name = nuclear_bonus
				bonus = 1
				uses = 1
				category = nuclear
			}
			add_tech_bonus = {
				name = nuclear_bonus
				bonus = 1
				uses = 1
				category = rocketry
			}
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}

	focus = {
		id = SOV_transformation_of_nature

		icon = GFX_goal_generic_soviet_construction
		prerequisite = { focus = SOV_fourth_five_year_plan }
		prerequisite = { focus = SOV_national_academies_of_sciences }
		x = 2
		y = 0
		relative_position_id = SOV_no_time_for_peace
		cost = 10

		allow_branch = {
			has_government = communism
		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY}

		completion_reward = {
			add_ideas = SOV_transformation_of_nature_idea
			if = {
				limit = {
					has_full_control_of_state = 404
				}
				add_resource = {
					type = rubber
					amount = 8
					state = 404
				}
			}
		}
	}

	focus = {
		id = SOV_transformation_of_nature_alt

		icon = GFX_goal_generic_construction2
		prerequisite = { focus = SOV_fourth_five_year_plan }
		prerequisite = { focus = SOV_national_academies_of_sciences }
		x = 2
		y = 0
		relative_position_id = SOV_no_time_for_peace
		cost = 10

		allow_branch = {
			NOT = { has_government = communism }
		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY}

		completion_reward = {
			add_ideas = SOV_transformation_of_nature
			if = {
				limit = {
					has_full_control_of_state = 404
				}
				add_resource = {
					type = rubber
					amount = 8
					state = 404
				}
			}
		}
	}


   ###    #### ########   ######  ########     ###    ######## ######## 
  ## ##    ##  ##     ## ##    ## ##     ##   ## ##   ##          ##    
 ##   ##   ##  ##     ## ##       ##     ##  ##   ##  ##          ##    
##     ##  ##  ########  ##       ########  ##     ## ######      ##    
#########  ##  ##   ##   ##       ##   ##   ######### ##          ##    
##     ##  ##  ##    ##  ##    ## ##    ##  ##     ## ##          ##    
##     ## #### ##     ##  ######  ##     ## ##     ## ##          ##    



	focus = {
		id = SOV_transpolar_flights

		icon = GFX_goal_generic_air_fighter2
		x = 10
		y = 0
		relative_position_id = SOV_infrastructure_effort_nsb
		cost = 5

		ai_will_do = {
			factor = 1
		}

		available = {
			has_war = no
		}

		bypass = {
			AND = {
				date > 1939.1.1
				has_war = yes
			}
		}

		completion_reward = {
			air_experience = 5
			if = {
				limit = {
					has_dlc = "La Resistance"
				}
				add_tech_bonus = {
					bonus = 1.0
					uses = 1
					category = light_air 
				}
				add_tech_bonus = {
					bonus = 1.0
					uses = 1
					category = air_equipment
				}			
			}
			add_doctrine_cost_reduction = {
				uses = 2
				cost_reduction = 0.5
				category = air_doctrine
            }
			add_timed_idea = {
				idea = SOV_transpolar_flights_idea
				days = 435
			}
		}
		search_filters = { FOCUS_FILTER_RESEARCH FOCUS_FILTER_AIR_XP }
	}

	focus = {
		id = SOV_expand_the_aircraft_industry

		icon = GFX_goal_generic_construct_mil_factory
		prerequisite = { focus = SOV_transpolar_flights }
		x = -1
		y = 1
		relative_position_id = SOV_transpolar_flights
		cost = 10

		available = {
			any_owned_state = {
				is_fully_controlled_by = ROOT
				free_building_slots = {
					building = arms_factory
					size > 1
					include_locked = yes
				}
			}
		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY}

		completion_reward = {
			set_variable = { SOV_soviet_airforce_aircraft_manufacturer_cost_factor = -0.25 }
			custom_effect_tooltip = SOV_expand_the_aircraft_industry_ns_tt

			add_tech_bonus = {
				name = SOV_increase_aircraft_production
				bonus = 1.0
				uses = 1
				category = light_air
			}

			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
				if = {
					limit = {
						air_base < 9
					}
					add_building_construction = {
						type = air_base
						level = 2
						instant_build = yes
					}
				}
				else = {
					ROOT = {
						random_owned_controlled_state = {
							limit = {
								air_base < 9
							}
							add_building_construction = {
								type = air_base
								level = 2
								instant_build = yes
							}
						}
					}
				}
			}
		}
	}

	focus = {
		id = SOV_modernize_aircraft_facilities

		icon = GFX_focus_generic_copy_plane_designs
		prerequisite = { focus = SOV_expand_the_aircraft_industry }
		x = -1
		y = 1
		relative_position_id = SOV_expand_the_aircraft_industry
		cost = 5

		completion_reward = {
			add_to_variable = { SOV_soviet_airforce_air_fuel_consumption_factor = -0.05 }
			add_to_variable = { SOV_soviet_airforce_air_range_factor = 0.05 }
			add_to_variable = { SOV_soviet_airforce_air_agility_factor = 0.05 }
			custom_effect_tooltip = SOV_modernize_aircraft_facilities_ns_tt
		}
	}

	focus = {
		id = SOV_merge_aircraft_plants

		icon = GFX_focus_SOV_merge_plants
		prerequisite = { focus = SOV_modernize_aircraft_facilities }
		x = 0
		y = 3
		relative_position_id = SOV_modernize_aircraft_facilities
		cost = 5

		available = {
			NOT = { has_country_flag = SOV_paranoia_system_active_flag }
		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY}

		completion_reward = {
			custom_effect_tooltip = SOV_merge_aircraft_plants_tt
		}
	}

	focus = {
		id = SOV_found_the_jet_institute

		icon = GFX_goal_generic_air_jet_new
		prerequisite = { focus = SOV_the_ussr_academy_of_sciences }
		prerequisite = { focus = SOV_merge_aircraft_plants }
		x = 0
		y = 2
		relative_position_id = SOV_merge_aircraft_plants
		cost = 10
		
		search_filters = {FOCUS_FILTER_RESEARCH}

		completion_reward = {
			add_tech_bonus = {
				name = SOV_found_the_jet_institute
				bonus = 1.0
				uses = 2
				category = jet_technology
			}
		}
	}

	focus = {
		id = SOV_increase_aircraft_production

		icon = GFX_focus_generic_aircraft_production
		prerequisite = { focus = SOV_expand_the_aircraft_industry }
		x = 0
		y = 2
		relative_position_id = SOV_expand_the_aircraft_industry
		cost = 10

		mutually_exclusive = { focus = SOV_intensify_pilot_training_program }

		available = {
			NOT = { has_country_flag = SOV_paranoia_system_active_flag }
		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH}

		completion_reward = {
			hidden_effect = {
				#This handles the equipment bonus that's not supported by dynamic modifiers
				add_ideas = SOV_increased_aircraft_production_ns_bonus
				add_to_variable = { SOV_soviet_airforce_air_accidents_factor = 0.05 }
			}

			hidden_effect = {
				if = { #DEFAULT COMMIE
					limit = {
						has_government = communism
					}
					#Swap dynamic modifiers to show the bonus equipment custom tooltip
					remove_dynamic_modifier = { modifier = SOV_soviet_airforce_dynamic_modifier }
					add_dynamic_modifier = { modifier = SOV_soviet_airforce_aircraft_production_focus_dynamic_modifier }
				}
				else = { #ALT IDEOLOGY
					#Swap dynamic modifiers to show the bonus equipment custom tooltip
					remove_dynamic_modifier = { modifier = SOV_soviet_airforce_dynamic_modifier_alt }
					add_dynamic_modifier = { modifier = SOV_soviet_airforce_aircraft_production_focus_dynamic_modifier_alt }
				}
			}
			
			custom_effect_tooltip = SOV_increase_aircraft_production_ns_tt

			add_tech_bonus = {
				name = SOV_increase_aircraft_production
				bonus = 1.0
				uses = 1
				category = light_air
			}
		}
	}

	focus = {
		id = SOV_foster_flying_clubs

		icon = GFX_focus_SOV_flying_clubs
		prerequisite = { focus = SOV_transpolar_flights }
		x = 1
		y = 1
		relative_position_id = SOV_transpolar_flights
		cost = 10
		
		search_filters = {FOCUS_FILTER_AIR_XP}

		completion_reward = {
			add_to_variable = { SOV_soviet_airforce_air_accidents_factor = -0.25 }
			add_to_variable = { SOV_soviet_airforce_air_ace_generation_chance_factor = 0.25 }
			add_to_variable = { SOV_soviet_airforce_air_weather_penalty = -0.1 }
			add_to_variable = { SOV_soviet_airforce_air_training_xp_gain_factor = 0.1 }
			custom_effect_tooltip = SOV_foster_flying_clubs_ns_tt

			air_experience = 25
		}
	}

	focus = {
		id = SOV_women_in_aviation

		icon = GFX_focus_SOV_women_in_aviation
		prerequisite = { focus = SOV_foster_flying_clubs }
		x = 1
		y = 1
		relative_position_id = SOV_foster_flying_clubs
		cost = 10

		available = {
			OR = {
				has_completed_focus = SOV_the_path_of_marxism_leninism
				has_completed_focus = SOV_womens_fascist_movement
			}
		}
		
		search_filters = {FOCUS_FILTER_AIR_XP}

		completion_reward = {
			add_to_variable = { SOV_soviet_airforce_air_ace_generation_chance_factor = 0.25 }
			add_to_variable = { SOV_soviet_airforce_air_weather_penalty = -0.05 }
			add_to_variable = { SOV_soviet_airforce_air_mission_xp_gain_factor = 0.05 }
			add_to_variable = { SOV_soviet_airforce_air_training_xp_gain_factor = 0.05 }
			custom_effect_tooltip = SOV_women_in_aviation_ns_tt

			air_experience = 25
			set_rule = {
				can_generate_female_aces = yes
			}
		}
	}

	focus = {
		id = SOV_raskovas_aviation_group

		icon = GFX_women_in_aviation
		prerequisite = { focus = SOV_women_in_aviation }
		x = 1
		y = 1
		relative_position_id = SOV_women_in_aviation
		cost = 10

		available = {
			any_enemy_country = {
				SOV_is_major_not_original_sov = yes
			}
			has_full_control_of_state = 219 #MOSCOW
		}
		
		search_filters = {FOCUS_FILTER_AIR_XP}

		completion_reward = {
			add_to_variable = { SOV_soviet_airforce_air_night_penalty = -0.2 }
			add_to_variable = { SOV_soviet_airforce_air_wing_xp_loss_when_killed_factor = -0.1 }
			set_variable = { SOV_soviet_airforce_air_strategic_bomber_night_penalty = -0.1 }
			custom_effect_tooltip = SOV_raskovas_aviation_group_ns_tt

			custom_effect_tooltip = SOV_night_witches_nsb_tt
			hidden_effect = {
				if = {
					limit = {
						has_dlc = "By Blood Alone"
					}
					create_equipment_variant = {
						name = "U-2" #
						type = small_plane_cas_airframe_0
						modules = {
							fixed_main_weapon_slot = bomb_locks
							fixed_auxiliary_weapon_slot_1 = empty
							engine_type_slot = engine_1_1x
							special_type_slot_1 = non_strategic_materials_small
						}
					}
					create_equipment_variant = {
						name = "Pe-2" #
						type = small_plane_cas_airframe_2
						modules = {
							fixed_main_weapon_slot = small_bomb_bay
							fixed_auxiliary_weapon_slot_1 = light_mg_2x
							engine_type_slot = engine_2_2x
							special_type_slot_1 = lmg_defense_turret
							special_type_slot_2 = dive_brakes_small
						}
					}
					create_equipment_variant = {
						name = "Yak-1" #
						type = small_plane_airframe_1
						modules = {
							fixed_main_weapon_slot = aircraft_cannon_1_1x
							fixed_auxiliary_weapon_slot_1 = heavy_mg_2x
							engine_type_slot = engine_2_1x
							special_type_slot_1 = non_strategic_materials_small
						}
					}
					if = {
						limit = {
							NOT = { has_government = communism }
						}
						
						load_oob = "SOV_night_witches_nsb_alt_bba"
						else = {
							load_oob = "SOV_night_witches_nsb_bba" #nested here because otherwise it is considered a nested else for the higher level if
						}
					}
				}
				else_if = { #ALT IDEOLOGY
					limit = {
						NOT = { has_government = communism }
					}
					load_oob = "SOV_night_witches_nsb_alt"
				}
				else = { #DEFAULT COMMUNISM
					load_oob = "SOV_night_witches_nsb"
				}
			}
		}
	}

	focus = {
		id = SOV_intensify_pilot_training_program

		icon = GFX_goal_generic_air_doctrine
		prerequisite = { focus = SOV_foster_flying_clubs }
		x = 0
		y = 2
		relative_position_id = SOV_foster_flying_clubs
		cost = 10

		mutually_exclusive = { focus = SOV_increase_aircraft_production }

		available = {
			NOT = { has_country_flag = SOV_paranoia_system_active_flag }
		}
		
		search_filters = {FOCUS_FILTER_AIR_XP}

		completion_reward = {
			add_to_variable = { SOV_soviet_airforce_air_accidents_factor = -0.25 }
			add_to_variable = { SOV_soviet_airforce_air_ace_generation_chance_factor = 0.15 }
			add_to_variable = { SOV_soviet_airforce_air_night_penalty = -0.1 }
			add_to_variable = { SOV_soviet_airforce_air_weather_penalty = -0.15 }
			add_to_variable = { SOV_soviet_airforce_air_wing_xp_loss_when_killed_factor = -0.15 }
			add_to_variable = { SOV_soviet_airforce_air_fuel_consumption_factor = 0.1 }
			custom_effect_tooltip = SOV_intensify_pilot_training_program_ns_tt

			air_experience = 50
		}
	}

	focus = {
		id = SOV_expand_aviation_institutes

		icon = GFX_focus_generic_military_academy
		prerequisite = { focus = SOV_expand_the_aircraft_industry focus = SOV_foster_flying_clubs }
		x = 1
		y = 1
		relative_position_id = SOV_expand_the_aircraft_industry
		cost = 10
		
		search_filters = {FOCUS_FILTER_AIR_XP}

		completion_reward = {
			add_to_variable = { SOV_soviet_airforce_air_accidents_factor = -0.25 }
			add_to_variable = { SOV_soviet_airforce_air_weather_penalty = -0.1 }
			add_to_variable = { SOV_soviet_airforce_air_training_xp_gain_factor = 0.05 }
			add_to_variable = { SOV_soviet_airforce_air_wing_xp_loss_when_killed_factor = -0.15 }
			custom_effect_tooltip = SOV_expand_aviation_institutes_ns_tt
		}
	}

	focus = {
		id = SOV_ground_support

		icon = GFX_goal_generic_air_fighter
		prerequisite = { focus = SOV_increase_aircraft_production focus = SOV_intensify_pilot_training_program }
		x = 0
		y = 1
		relative_position_id = SOV_increase_aircraft_production
		cost = 10

		mutually_exclusive = { focus = SOV_long_range_aircraft }
		
		search_filters = {FOCUS_FILTER_RESEARCH}

		completion_reward = {
			add_to_variable = { SOV_soviet_airforce_air_cas_present_factor = 0.1 }
			custom_effect_tooltip = SOV_ground_support_ns_tt

			if = {
				limit = {
					has_dlc = "By Blood Alone"
				}
				add_tech_bonus = {
					bonus = 0.75
					uses = 2
					technology = aa_cannon_1
					technology = aa_cannon_2
				}
				add_tech_bonus = {
					bonus = 0.75
					uses = 1
					category = medium_air
				}
			}
			else = {
				add_tech_bonus = {
					name = SOV_ground_support
					bonus = 0.75
					uses = 2
					category = light_fighter
					category = cas_bomber
				}
			}

		}
	}

	focus = {
		id = SOV_long_range_aircraft

		icon = GFX_goal_generic_air_bomber
		prerequisite = { focus = SOV_increase_aircraft_production focus = SOV_intensify_pilot_training_program }
		x = 0
		y = 1
		relative_position_id = SOV_intensify_pilot_training_program
		cost = 10

		mutually_exclusive = { focus = SOV_ground_support }
		
		search_filters = {FOCUS_FILTER_RESEARCH}

		completion_reward = {
			add_to_variable = { SOV_soviet_airforce_strategic_bomb_visibility = -0.1 }
			custom_effect_tooltip = SOV_long_range_aircraft_ns_tt

			if = {
				limit = {
					has_dlc = "By Blood Alone"
				}
				add_tech_bonus = {
					bonus = 0.75
					uses = 2
					category = heavy_air
					category = medium_air
				}
			}
			else = {
				add_tech_bonus = {
					name = SOV_long_range_aircraft
					bonus = 0.75
					uses = 2
					category = cat_heavy_fighter
					category = tactical_bomber
					category = cat_strategic_bomber
				}
			}

		}
	}

	focus = {
		id = SOV_the_modern_war_in_the_skies

		icon = GFX_goal_generic_CAS
		prerequisite = { focus = SOV_ground_support focus = SOV_long_range_aircraft }
		x = 1
		y = 1
		relative_position_id = SOV_ground_support
		cost = 10
		available = {
			date > 1940.06.01
	}
		
		search_filters = {FOCUS_FILTER_AIR_XP}

		completion_reward = {
			remove_ideas = Stalins_priorities
			add_to_variable = { SOV_soviet_airforce_air_night_penalty = -0.1 }
			add_to_variable = { SOV_soviet_airforce_air_mission_efficiency = 0.1 } 
			custom_effect_tooltip = SOV_the_modern_war_in_the_skies_ns_tt

			air_experience = 50
		}
	}



##    ##    ###    ##     ## ##    ## 
###   ##   ## ##   ##     ##  ##  ##  
####  ##  ##   ##  ##     ##   ####   
## ## ## ##     ## ##     ##    ##    
##  #### #########  ##   ##     ##    
##   ### ##     ##   ## ##      ##    
##    ## ##     ##    ###       ##    


	focus = {
		id = SOV_expand_the_red_fleet

		icon = GFX_goal_generic_build_navy
		x = 6
		y = 0
		relative_position_id = SOV_transpolar_flights
		cost = 5

		ai_will_do = {
			factor = 1
		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH FOCUS_FILTER_NAVY_XP}

		completion_reward = {
			navy_experience = 25
			random_owned_controlled_state = {
				limit = {
					dockyard > 0
					free_building_slots = {
						building = dockyard
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = dockyard
					level = 2
					instant_build = yes
				}
			}
			add_tech_bonus = {
				name = ships_bonus
				bonus = 1.0
				uses = 2
				category = naval_equipment
			}
		}
	}

	focus = {
		id = SOV_reinforce_western_naval_bases

		icon = GFX_focus_SOV_reinforce_western_naval_bases
		prerequisite = { focus = SOV_expand_the_red_fleet }
		x = -3
		y = 1
		relative_position_id = SOV_expand_the_red_fleet
		cost = 5

		available = {
			195 = { #LENINGRAD
				is_owned_and_controlled_by = ROOT
			}
		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY}

		completion_reward = {
			195 = { #LENINGRAD
				if = {
					limit = {
						free_building_slots = {
							building = dockyard
							size > 0
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = dockyard
						level = 1
						instant_build = yes
					}
				}
				add_building_construction = {
					type = anti_air_building
					level = 2
					instant_build = yes
				}
				add_building_construction = {
					type = coastal_bunker
					level = 2
					instant_build = yes
					province = 3151
				}
				if = {
					limit = {
						ROOT = { has_tech = radio_detection }
						radar_station < 1
					}
					add_building_construction = {
						type = radar_station
						level = 1
						instant_build = yes
					}
				}
				else = {
					custom_effect_tooltip = SOV_reinforce_western_naval_bases_radar_tt
				}
				set_state_flag = SOV_naval_bases_reinforced_flag
			}
			
			custom_effect_tooltip = SOV_reinforce_western_naval_bases_other_states_tt

			if = { #HELSINKI (UUSIMAA)
				limit = {
					has_full_control_of_state = 111
				}
				111 = {
					add_building_construction = {
						type = anti_air_building
						level = 2
						instant_build = yes
					}
					add_building_construction = {
						type = coastal_bunker
						level = 2
						instant_build = yes
						province = 11105
					}
					set_state_flag = SOV_naval_bases_reinforced_flag
				}
			}
			if = { #TALLIN (HARNU)
				limit = {
					has_full_control_of_state = 812
				}
				812 = {
					add_building_construction = {
						type = anti_air_building
						level = 2
						instant_build = yes
					}
					add_building_construction = {
						type = coastal_bunker
						level = 2
						instant_build = yes
						province = 3152
					}
					set_state_flag = SOV_naval_bases_reinforced_flag
				}
			}
			if = { #RIGA
				limit = {
					has_full_control_of_state = 808
				}
				808 = {
					add_building_construction = {
						type = anti_air_building
						level = 2
						instant_build = yes
					}
					add_building_construction = {
						type = coastal_bunker
						level = 2
						instant_build = yes
						province = 9340
					}
					set_state_flag = SOV_naval_bases_reinforced_flag
				}
			}
			if = { #PALANGA (ŽEMAITIJA)
				limit = {
					has_full_control_of_state = 189
				}
				189 = {
					add_building_construction = {
						type = anti_air_building
						level = 2
						instant_build = yes
					}
					add_building_construction = {
						type = coastal_bunker
						level = 2
						instant_build = yes
						province = 6314
					}
					set_state_flag = SOV_naval_bases_reinforced_flag
				}
			}
		}
	}

	focus = {
		id = SOV_reinforce_northern_naval_bases

		icon = GFX_focus_SOV_reinforce_northern_naval_bases
		prerequisite = { focus = SOV_expand_the_red_fleet }
		x = -1
		y = 1
		relative_position_id = SOV_expand_the_red_fleet
		cost = 5

		available = {
			OR = {
				213 = { #MURMANSK
					is_owned_and_controlled_by = ROOT
				}
				214 = { #ARKHANGELSK
					is_owned_and_controlled_by = ROOT
				}
			}
		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY}

		completion_reward = {
			if = { #MURMANSK - Improved naval base + AA + coastal fort
				limit = {
					has_full_control_of_state = 213
				}
				213 = {
					add_building_construction = {
						type = anti_air_building
						level = 2
						instant_build = yes
					}
					add_building_construction = {
						type = naval_base
						level = 2
						instant_build = yes
						province = 3134
					}
					add_building_construction = {
						type = coastal_bunker
						level = 2
						instant_build = yes
						province = 3134
					}
					set_state_flag = SOV_naval_bases_reinforced_flag
				}
			}
			if = { #ARKHANGELSK - Improved naval base + Severodvinsk Naval Base + AA + coastal fort
				limit = {
					has_full_control_of_state = 214
				}
				214 = {
					add_building_construction = {
						type = anti_air_building
						level = 2
						instant_build = yes
					}
					add_building_construction = {
						type = naval_base
						level = 1
						instant_build = yes
						province = 3338
					}
					add_building_construction = {
						type = naval_base
						level = 2
						instant_build = yes
						province = 312
					}
					add_building_construction = {
						type = coastal_bunker
						level = 2
						instant_build = yes
						province = 3338
					}
					add_building_construction = {
						type = coastal_bunker
						level = 2
						instant_build = yes
						province = 312
					}
					set_state_flag = SOV_naval_bases_reinforced_flag
				}
			}
		}
	}

	focus = {
		id = SOV_reinforce_southern_naval_bases

		icon = GFX_focus_SOV_reinforce_southern_naval_bases
		prerequisite = { focus = SOV_expand_the_red_fleet }
		x = 1
		y = 1
		relative_position_id = SOV_expand_the_red_fleet
		cost = 5

		available = {
			OR = {
				192 = { #ODESSA
					is_owned_and_controlled_by = ROOT
				}
				137 = { #CRIMEA
					is_owned_and_controlled_by = ROOT
				}
				218 = { #ROSTOV
					is_owned_and_controlled_by = ROOT
				}
				234 = { #KRASNODAR
					is_owned_and_controlled_by = ROOT
				}
			}
		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY}

		completion_reward = {
			if = { #ODESSA - Improved naval base + AA + coastal fort
				limit = {
					has_full_control_of_state = 192
				}
				192 = {
					add_building_construction = {
						type = anti_air_building
						level = 1
						instant_build = yes
					}
					add_building_construction = {
						type = naval_base
						level = 2
						instant_build = yes
						province = 11670
					}
					add_building_construction = {
						type = coastal_bunker
						level = 2
						instant_build = yes
						province = 11670
					}
					set_state_flag = SOV_naval_bases_reinforced_flag
				}
			}
			if = { #SEVASTOPOL (CRIMEA) - Extra AA + coastal fort
				limit = {
					has_full_control_of_state = 137
				}
				137 = {
					add_building_construction = {
						type = anti_air_building
						level = 2
						instant_build = yes
					}
					add_building_construction = {
						type = coastal_bunker
						level = 3
						instant_build = yes
						province = 3686
					}
					set_state_flag = SOV_naval_bases_reinforced_flag
				}
			}
			if = { #ROSTOV - Improved naval base + AA + coastal fort
				limit = {
					has_full_control_of_state = 218
				}
				218 = {
					add_building_construction = {
						type = anti_air_building
						level = 1
						instant_build = yes
					}
					add_building_construction = {
						type = naval_base
						level = 2
						instant_build = yes
						province = 9417
					}
					add_building_construction = {
						type = coastal_bunker
						level = 2
						instant_build = yes
						province = 9417
					}
					set_state_flag = SOV_naval_bases_reinforced_flag
				}
			}
			if = { #KRASNODAR - Improved naval base + AA + coastal fort
				limit = {
					has_full_control_of_state = 234
				}
				234 = {
					add_building_construction = {
						type = anti_air_building
						level = 1
						instant_build = yes
					}
					add_building_construction = {
						type = naval_base
						level = 2
						instant_build = yes
						province = 719
					}
					add_building_construction = {
						type = coastal_bunker
						level = 2
						instant_build = yes
						province = 719
					}
					set_state_flag = SOV_naval_bases_reinforced_flag
				}
			}
		}
	}

	focus = {
		id = SOV_reinforce_caspian_naval_bases

		icon = GFX_goal_coastal_navy
		prerequisite = { focus = SOV_reinforce_southern_naval_bases focus = SOV_reinforce_eastern_naval_bases }
		x = 1
		y = 1
		relative_position_id = SOV_reinforce_southern_naval_bases
		cost = 5

		available = {
			OR = {
				229 = { #ODESSA
					is_owned_and_controlled_by = ROOT
				}
				584 = { #CRIMEA
					is_owned_and_controlled_by = ROOT
				}
				587 = { #ROSTOV
					is_owned_and_controlled_by = ROOT
				}
			}
		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY}

		completion_reward = {
			if = { #BAKU - Improved naval base + AA + coastal fort
				limit = {
					has_full_control_of_state = 229
				}
				229 = {
					add_building_construction = {
						type = anti_air_building
						level = 1
						instant_build = yes
					}
					add_building_construction = {
						type = naval_base
						level = 2
						instant_build = yes
						province = 7661
					}
					add_building_construction = {
						type = coastal_bunker
						level = 3
						instant_build = yes
						province = 7661
					}
					set_state_flag = SOV_naval_bases_reinforced_flag
				}
			}
			if = { #KRASNOVODSK - Improved naval base + coastal fort
				limit = {
					has_full_control_of_state = 584
				}
				584 = {
					add_building_construction = {
						type = naval_base
						level = 2
						instant_build = yes
						province = 7477
					}
					add_building_construction = {
						type = coastal_bunker
						level = 2
						instant_build = yes
						province = 7477
					}
					set_state_flag = SOV_naval_bases_reinforced_flag
				}
			}
			if = { #MELOVOYE - Improved naval base + coastal fort
				limit = {
					has_full_control_of_state = 587
				}
				587 = {
					add_building_construction = {
						type = naval_base
						level = 2
						instant_build = yes
						province = 1517
					}
					add_building_construction = {
						type = coastal_bunker
						level = 2
						instant_build = yes
						province = 1517
					}
					set_state_flag = SOV_naval_bases_reinforced_flag
				}
			}
		}
	}

	focus = {
		id = SOV_reinforce_eastern_naval_bases

		icon = GFX_focus_SOV_reinforce_eastern_naval_bases
		prerequisite = { focus = SOV_expand_the_red_fleet }
		x = 3
		y = 1
		relative_position_id = SOV_expand_the_red_fleet
		cost = 5

		available = {
			OR = {
				408 = { #VLADIVOSTOK
					is_owned_and_controlled_by = ROOT
				}
				409 = { #KHABAROVSK
					is_owned_and_controlled_by = ROOT
				}
			}
		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY}

		completion_reward = {
			if = { #VLADIVOSTOK - Improved naval base + AA + coastal fort
				limit = {
					has_full_control_of_state = 408
				}
				408 = {
					add_building_construction = {
						type = anti_air_building
						level = 2
						instant_build = yes
					}
					add_building_construction = {
						type = air_base
						level = 2
						instant_build = yes
					}
					add_building_construction = {
						type = naval_base
						level = 2
						instant_build = yes
						province = 957
					}
					add_building_construction = {
						type = coastal_bunker
						level = 2
						instant_build = yes
						province = 957
					}
					set_state_flag = SOV_naval_bases_reinforced_flag
				}
			}
			if = { #VLADIVOSTOK - Improved naval base + AA + coastal fort
				limit = {
					has_full_control_of_state = 409
				}
				409 = {
					add_building_construction = {
						type = anti_air_building
						level = 1
						instant_build = yes
					}
					add_building_construction = {
						type = air_base
						level = 1
						instant_build = yes
					}
					add_building_construction = {
						type = naval_base
						level = 2
						instant_build = yes
						province = 9604
					}
					add_building_construction = {
						type = coastal_bunker
						level = 2
						instant_build = yes
						province = 9604
					}
					set_state_flag = SOV_naval_bases_reinforced_flag
				}
			}
		}
	}

	focus = {
		id = SOV_expand_shipbuilding_plants

		icon = GFX_goal_generic_construct_naval_dockyard
		prerequisite = { focus = SOV_reinforce_western_naval_bases focus = SOV_reinforce_northern_naval_bases focus = SOV_reinforce_southern_naval_bases focus = SOV_reinforce_eastern_naval_bases }
		x = 1
		y = 1
		relative_position_id = SOV_reinforce_northern_naval_bases
		cost = 10
		
		search_filters = {FOCUS_FILTER_INDUSTRY}

		completion_reward = {
			custom_effect_tooltip = SOV_expand_shipbuilding_plants_tt
			every_owned_state = {
				limit = {
					has_state_flag = SOV_naval_bases_reinforced_flag
					is_fully_controlled_by = ROOT
					free_building_slots = {
						building = dockyard
						size > 0
						include_locked = yes
					}
				}
				if = {
					limit = {
						state = 195 #LENINGRAD - Gets 2 dockyards instead of 1
						free_building_slots = {
							building = dockyard
							size > 1
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = dockyard
						level = 2
						instant_build = yes
					}
				}
				else = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = dockyard
						level = 1
						instant_build = yes
					}
				}
			}
			
		}
	}

	focus = {
		id = SOV_merge_naval_plants

		icon = GFX_focus_SOV_merge_plants
		prerequisite = { focus = SOV_expand_shipbuilding_plants }
		x = -1
		y = 2
		relative_position_id = SOV_expand_shipbuilding_plants
		cost = 5

		available = {
			NOT = { has_country_flag = SOV_paranoia_system_active_flag }
		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY}

		completion_reward = {
			custom_effect_tooltip = SOV_merge_naval_plants_tt
		}
	}


	focus = {
		id = SOV_pc_of_the_ussr_navy

		icon = GFX_goal_generic_navy_cruiser
		prerequisite = { focus = SOV_expand_the_red_fleet }
		x = 4
		y = 2
		relative_position_id = SOV_expand_the_red_fleet
		cost = 5
		
		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH}

		completion_reward = {
			hidden_effect = {
				if = {
					limit = {
						has_government = communism
					}
					add_dynamic_modifier = { modifier = SOV_the_red_fleet_dynamic_modifier }
				}
				else = {
					add_dynamic_modifier = { modifier = SOV_the_red_fleet_dynamic_modifier_alt }
				}
			}
			custom_effect_tooltip = SOV_pc_of_the_ussr_navy_ns_tt

			if = {
				limit = {
					has_government = communism
				}
				add_tech_bonus = {
					name = SOV_the_red_fleet_dynamic_modifier
					bonus = 1.0
					uses = 2
					category = ship_modules_tech
				}
			}
			else = {
				add_tech_bonus = {
					name = SOV_the_red_fleet_dynamic_modifier_alt
					bonus = 1.0
					uses = 2
					category = ship_modules_tech
				}
			}
		}
	}


	focus = {
		id = SOV_surface_warfare

		icon = GFX_focus_generic_destroyer
		prerequisite = { focus = SOV_pc_of_the_ussr_navy }
		x = -2
		y = 1
		relative_position_id = SOV_pc_of_the_ussr_navy
		cost = 10

		mutually_exclusive = { focus = SOV_submarine_warfare }
		
		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH FOCUS_FILTER_NAVY_XP}

		completion_reward = {
			hidden_effect = {
				if = { #DEFAULT COMMIE
					limit = {
						has_government = communism
					}
					#Swap dynamic modifier to change dynamic modifier's custom tooltip
					remove_dynamic_modifier = { modifier = SOV_the_red_fleet_dynamic_modifier }
					add_dynamic_modifier = { modifier = SOV_the_red_fleet_surface_1_dynamic_modifier }
				}
				else = { #ALT IDEOLOGY
					#Swap dynamic modifier to change dynamic modifier's custom tooltip
					remove_dynamic_modifier = { modifier = SOV_the_red_fleet_dynamic_modifier_alt }
					add_dynamic_modifier = { modifier = SOV_the_red_fleet_surface_1_dynamic_modifier_alt }
				}
				#This handles the equipment bonus that's not supported by dynamic modifiers
				add_ideas = SOV_red_fleet_surface_bonus_1
			}
			custom_effect_tooltip = SOV_surface_warfare_ns_tt

			navy_experience = 15

			add_tech_bonus = {
				name = SOV_surface_warfare
				bonus = 1.0
				uses = 1
				category = dd_tech
			}
		}
	}

	focus = {
		id = SOV_submarine_warfare

		icon = GFX_goal_generic_navy_submarine
		prerequisite = { focus = SOV_pc_of_the_ussr_navy }
		x = 2
		y = 1
		relative_position_id = SOV_pc_of_the_ussr_navy
		cost = 10

		mutually_exclusive = { focus = SOV_surface_warfare }
		
		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH FOCUS_FILTER_NAVY_XP}

		completion_reward = {
			hidden_effect = {
				if = { #DEFAULT COMMIE
					limit = {
						has_government = communism
					}
					#Swap dynamic modifier to change dynamic modifier's custom tooltip
					remove_dynamic_modifier = { modifier = SOV_the_red_fleet_dynamic_modifier }
					add_dynamic_modifier = { modifier = SOV_the_red_fleet_submarine_1_dynamic_modifier }
				}
				else = { #ALT IDEOLOGY
					#Swap dynamic modifier to change dynamic modifier's custom tooltip
					remove_dynamic_modifier = { modifier = SOV_the_red_fleet_dynamic_modifier_alt }
					add_dynamic_modifier = { modifier = SOV_the_red_fleet_submarine_1_dynamic_modifier_alt }
				}
				
				#This handles the equipment bonus that's not supported by dynamic modifiers
				add_ideas = SOV_red_fleet_submarine_bonus_1
			}
			custom_effect_tooltip = SOV_submarine_warfare_ns_tt

			navy_experience = 15

			add_tech_bonus = {
				name = SOV_submarine_warfare
				bonus = 1.0
				uses = 1
				category = ss_tech
			}
		}
	}

	focus = {
		id = SOV_offensive_maritime_strategy

		icon = GFX_goal_generic_battleship
		prerequisite = { focus = SOV_surface_warfare }
		x = -1
		y = 1
		relative_position_id = SOV_surface_warfare
		cost = 10

		available = {
			if = {
				limit = {
					has_dlc = "Man the Guns"
				}
				has_tech = basic_ship_hull_heavy
			}
		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH FOCUS_FILTER_NAVY_XP}

		completion_reward = {
			hidden_effect = {
				if = { #DEFAULT COMMIE
					limit = {
						has_government = communism
					}
					#Swap dynamic modifier to change dynamic modifier's custom tooltip
					remove_dynamic_modifier = { modifier = SOV_the_red_fleet_surface_1_dynamic_modifier }
					add_dynamic_modifier = { modifier = SOV_the_red_fleet_surface_2_dynamic_modifier }
				}
				else = { #ALT IDEOLOGY
					#Swap dynamic modifier to change dynamic modifier's custom tooltip
					remove_dynamic_modifier = { modifier = SOV_the_red_fleet_surface_1_dynamic_modifier_alt }
					add_dynamic_modifier = { modifier = SOV_the_red_fleet_surface_2_dynamic_modifier_alt }
				}
				
				#Hidden National Spirits handle the equipment bonus that's not supported by dynamic modifiers
				swap_ideas = {
					remove_idea = SOV_red_fleet_surface_bonus_1
					add_idea = SOV_red_fleet_surface_bonus_2
				}
			}
			custom_effect_tooltip = SOV_offensive_maritime_strategy_ns_tt

			navy_experience = 25

			add_tech_bonus = {
				name = SOV_offensive_maritime_strategy
				bonus = 1.0
				uses = 1
				category = ca_tech
				category = cl_tech
			}

			#Kronshtadt Class Battlecruiser
			if = {
				limit = {
					NOT = { has_dlc = "Man the Guns" }
				}
				add_tech_bonus = {
					name = SOV_offensive_maritime_strategy
					bonus = 3.0
					uses = 1
					category = bc_tech	
				}
			}
			else = {
				create_equipment_variant = {
					name = "Kronshtadt Class"		
					type = ship_hull_heavy_2
					name_group = SOV_BC_HISTORICAL
					parent_version = 0
					modules = {
						fixed_ship_battery_slot = ship_heavy_battery_1
						fixed_ship_anti_air_slot = ship_anti_air_1
						fixed_ship_fire_control_system_slot = ship_fire_control_system_0
						fixed_ship_radar_slot = empty
						fixed_ship_engine_slot = heavy_ship_engine_2
						fixed_ship_secondaries_slot = ship_secondaries_1
						fixed_ship_armor_slot = ship_armor_bc_2
						front_1_custom_slot = ship_heavy_battery_1
						mid_1_custom_slot = ship_secondaries_1
						mid_2_custom_slot = ship_anti_air_1
						rear_1_custom_slot = ship_airplane_launcher_1
					}
				}

				#Line Production
				add_equipment_production = {
					equipment = {
						type = ship_hull_heavy_2
						creator = "SOV"
						version_name = "Kronshtadt Class"
					}
					requested_factories = 1
					progress = 0.50
					amount = 1 #Tooltip purposes
				}

				#Line Production
				add_equipment_production = {
					equipment = {
						type = ship_hull_heavy_2
						creator = "SOV"
						version_name = "Kronshtadt Class"
					}
					requested_factories = 1
					progress = 0.35
					amount = 1
				}
			}
			
		}
	}

	focus = {
		id = SOV_an_oceangoing_navy

		icon = GFX_goal_generic_large_fleet
		prerequisite = { focus = SOV_surface_warfare focus = SOV_submarine_warfare }
		x = 1
		y = 1
		relative_position_id = SOV_surface_warfare
		cost = 10

		available = {
			NOT = { has_country_flag = SOV_paranoia_system_active_flag }
			if = {
				limit = {
					has_dlc = "Man the Guns"
				}
				has_tech = basic_ship_hull_heavy
			}
		}
		
		search_filters = {FOCUS_FILTER_RESEARCH FOCUS_FILTER_NAVY_XP}

		completion_reward = {
			navy_experience = 25
			add_tech_bonus = {
				name = SOV_an_oceangoing_navy
				bonus = 1.0
				uses = 2
				category = bb_tech
			}

			#Sovietsky Soyuz Super-Heavy Battleship
			if = {
				limit = {
					NOT = { has_dlc = "Man the Guns" }
				}
				add_tech_bonus = {
					name = SOV_an_oceangoing_navy
					bonus = 3.0
					uses = 1
					category = shbb_tech	
				}
			}
			else = {
				#Grant SHBB Tech and required battery modules (not fire control)
				if = {
					limit = {
						NOT = { has_tech = ship_hull_super_heavy }
					}
					hidden_effect = {
						set_technology = {
							ship_hull_super_heavy = 1
						}
					}
					custom_effect_tooltip = SOV_an_oceangoing_navy_shbb_tt
				}
				create_equipment_variant = { #TODO_Manu: Engine should be 3 (but also should Yamato's)
					name = "Sovetsky Soyuz Class"
					type = ship_hull_super_heavy_1
					name_group = SOV_STATES
					parent_version = 0
					modules = {
						fixed_ship_battery_slot = ship_super_heavy_battery_1
						fixed_ship_anti_air_slot = ship_anti_air_2
						fixed_ship_fire_control_system_slot = ship_fire_control_system_1
						fixed_ship_radar_slot = empty
						fixed_ship_engine_slot = heavy_ship_engine_2
						fixed_ship_secondaries_slot = ship_secondaries_2
						fixed_ship_armor_slot = ship_armor_shbb
						front_1_custom_slot = ship_anti_air_2
						front_2_custom_slot = empty
						mid_1_custom_slot = empty
						mid_2_custom_slot = ship_secondaries_2
						mid_3_custom_slot = ship_secondaries_2
						rear_1_custom_slot = ship_super_heavy_battery_1
						rear_2_custom_slot = ship_airplane_launcher_1
					}
				}
				#Line Production
				add_equipment_production = {
					equipment = {
						type = ship_hull_super_heavy_1
						creator = "SOV"
						version_name = "Sovetsky Soyuz Class"
					}
					requested_factories = 1
					progress = 0.50
					amount = 1
				}
				add_equipment_production = {
					equipment = {
						type = ship_hull_super_heavy_1
						creator = "SOV"
						version_name = "Sovetsky Soyuz Class"
					}
					requested_factories = 1
					progress = 0.25
					amount = 1
				}
				add_equipment_production = {
					equipment = {
						type = ship_hull_super_heavy_1
						creator = "SOV"
						version_name = "Sovetsky Soyuz Class"
					}
					requested_factories = 1
					progress = 0.25
					amount = 1
				}
			}
		}
	}

	focus = {
		id = SOV_improve_our_naval_doctrine
		icon = GFX_goal_generic_navy_doctrines_tactics
		prerequisite = { focus = SOV_surface_warfare focus = SOV_submarine_warfare }
		x = 2
		y = 2
		relative_position_id = SOV_surface_warfare
		cost = 10

		available_if_capitulated = yes


		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				all_owned_state = {
					OR = {
						is_coastal = no
						dockyard < 1
					}
				}
			}
		}

		completion_reward = {
			navy_experience = 25
			add_tech_bonus = {
				name = naval_doctrine_bonus
				bonus = 1
				uses = 2
				category = naval_doctrine
			}
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}

	focus = {
		id = SOV_mine_warfare

		icon = GFX_focus_generic_mine_warfare
		prerequisite = { focus = SOV_surface_warfare focus = SOV_submarine_warfare }
		x = -1
		y = 1
		relative_position_id = SOV_submarine_warfare
		cost = 10
		
		search_filters = {FOCUS_FILTER_RESEARCH}

		completion_reward = {
			add_ideas = SOV_mine_warfare_ns

			add_tech_bonus = {
				name = SOV_mine_warfare
				bonus = 1.0
				uses = 2
				category = naval_mines
			}
		}
	}

	focus = {
		id = SOV_long_range_raiders

		icon = GFX_goal_generic_navy_anti_submarine
		prerequisite = { focus = SOV_submarine_warfare }
		x = 1
		y = 1
		relative_position_id = SOV_submarine_warfare
		cost = 10
		
		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH FOCUS_FILTER_NAVY_XP}

		completion_reward = {
			hidden_effect = {
				if = { #DEFAULT COMMIE
					limit = {
						has_government = communism
					}
					#Swap dynamic modifier to change dynamic modifier's custom tooltip
					remove_dynamic_modifier = { modifier = SOV_the_red_fleet_submarine_1_dynamic_modifier }
					add_dynamic_modifier = { modifier = SOV_the_red_fleet_submarine_2_dynamic_modifier }
				}
				else = { #ALT IDEOLOGY
					#Swap dynamic modifier to change dynamic modifier's custom tooltip
					remove_dynamic_modifier = { modifier = SOV_the_red_fleet_submarine_1_dynamic_modifier_alt }
					add_dynamic_modifier = { modifier = SOV_the_red_fleet_submarine_2_dynamic_modifier_alt }
				}
				
				#Hidden National Spirits handle the equipment bonus that's not supported by dynamic modifiers
				swap_ideas = {
					remove_idea = SOV_red_fleet_submarine_bonus_1
					add_idea = SOV_red_fleet_submarine_bonus_2
				}
			}
			custom_effect_tooltip = SOV_submarine_warfare_ns_tt

			navy_experience = 25

			add_tech_bonus = {
				name = SOV_long_range_raiders
				ahead_reduction = 2
				uses = 1
				category = ss_tech
			}
			set_technology = { cruiser_submarines = 1 }

			###########
			### MTG ###
			###########
			if = {
				limit = {
					has_dlc = "Man the Guns"
				}
				create_equipment_variant = {
					name = "K Class"
					type = ship_hull_cruiser_submarine
					name_group = SOV_SS_HISTORICAL
					parent_version = 0
					modules = {
						fixed_ship_torpedo_slot = ship_torpedo_sub_2
						fixed_ship_engine_slot = sub_ship_engine_2
						front_1_custom_slot = ship_mine_layer_sub
						mid_1_custom_slot = empty
						rear_1_custom_slot = ship_torpedo_sub_2
					}
				}
				#Line Production
				add_equipment_production = {
					equipment = {
						type = ship_hull_cruiser_submarine
						creator = "SOV"
						version_name = "K Class"
					}
					name = "K-1"
					requested_factories = 1
					progress = 0.35
					amount = 1
				}
				add_equipment_production = {
					equipment = {
						type = ship_hull_cruiser_submarine
						creator = "SOV"
						version_name = "K Class"
					}
					name = "K-2"
					requested_factories = 1
					progress = 0.35
					amount = 1
				}
			}

			##############
			### NO MTG ###
			##############
			else = {
				if = { #Submarine 3 if available
					limit = {
						has_tech = improved_submarine
					}
					add_equipment_production = {
						equipment = {
							type = submarine_3
							creator = "SOV"
							version_name = "K Class"
						}
						requested_factories = 1
						progress = 0.35
						amount = 1
					}
					add_equipment_production = {
						equipment = {
							type = submarine_3
							creator = "SOV"
							version_name = "K Class"
						}
						requested_factories = 1
						progress = 0.35
						amount = 1
					}
				}
				else = { #Submarine 2 as default
					add_equipment_production = {
						equipment = {
							type = submarine_2
							creator = "SOV"
							version_name = "K Class"
						}
						requested_factories = 1
						progress = 0.35
						amount = 1
					}
					add_equipment_production = {
						equipment = {
							type = submarine_2
							creator = "SOV"
							version_name = "K Class"
						}
						requested_factories = 1
						progress = 0.35
						amount = 1
					}
				}
			}
		}
	}

	focus = {
		id = SOV_advanced_maneuvers

		icon = GFX_goal_generic_navy_doctrines_tactics
		prerequisite = { focus = SOV_expand_shipbuilding_plants }
		prerequisite = { focus = SOV_an_oceangoing_navy }
		x = 0
		y = 3
		relative_position_id = SOV_expand_shipbuilding_plants
		cost = 10

		available = {
		}
		
		search_filters = {FOCUS_FILTER_NAVY_XP}

		completion_reward = {
			set_variable = { SOV_red_fleet_naval_coordination = 0.1 }
			set_variable = { SOV_red_fleet_navy_visibility = -0.05 }
			set_variable = { SOV_red_fleet_positioning = 0.1 }
			set_variable = { SOV_red_fleet_screening_efficiency = 0.1 }
			custom_effect_tooltip = SOV_advanced_maneuvers_ns_tt

			navy_experience = 50
		}
	}

	focus = {
		id = SOV_expand_the_morskaya_aviatsiya

		icon = GFX_goal_generic_navy_carrier
		prerequisite = { focus = SOV_increase_aircraft_production focus = SOV_intensify_pilot_training_program }
		prerequisite = { focus = SOV_advanced_maneuvers }
		x = -2
		y = 1
		relative_position_id = SOV_advanced_maneuvers
		cost = 10
		
		search_filters = {FOCUS_FILTER_RESEARCH FOCUS_FILTER_AIR_XP FOCUS_FILTER_NAVY_XP}

		completion_reward = {
			navy_experience = 25
			air_experience = 25
			add_tech_bonus = {
				name = SOV_expand_the_morskaya_aviatsiya
				bonus = 1
				uses = 2
				category = cv_tech
				category = naval_air
			}

			###########
			### MTG ###
			###########
			if = { #MTG 
				limit = {
					has_dlc = "Man the Guns"
				}
				if = {
					limit = { #Carrier 4 
						has_tech = advanced_ship_hull_carrier
					}
					#Equipment Variant
					create_equipment_variant = {
						name = "Project 71 Class"
						type = ship_hull_carrier_3
						name_group = SOV_CV_HISTORICAL
						parent_version = 0
						modules = {
							fixed_ship_deck_slot_1 = ship_deck_space
							fixed_ship_deck_slot_2 = ship_deck_space
							fixed_ship_anti_air_slot = ship_anti_air_2
							fixed_ship_radar_slot = empty
							fixed_ship_engine_slot = carrier_ship_engine_4
							fixed_ship_secondaries_slot = ship_secondaries_1
							front_1_custom_slot = ship_deck_space
						}
					}
					#Line Production
					add_equipment_production = {
						equipment = {
							type = ship_hull_carrier_3
							creator = "SOV"
							version_name = "Project 71 Class"
						}
						name = "Siberia"
						requested_factories = 1
						progress = 0.45
						amount = 1
					}
				}
				else_if = {
					limit = { #Carrier 3
						has_tech = improved_ship_hull_carrier
					}
					#Equipment Variant
					create_equipment_variant = {
						name = "Project 71 Class"
						type = ship_hull_carrier_2
						name_group = SOV_CV_HISTORICAL
						parent_version = 0
						modules = {
							fixed_ship_deck_slot_1 = ship_deck_space
							fixed_ship_deck_slot_2 = ship_deck_space
							fixed_ship_anti_air_slot = ship_anti_air_2
							fixed_ship_radar_slot = empty
							fixed_ship_engine_slot = carrier_ship_engine_3
							fixed_ship_secondaries_slot = ship_secondaries_1
							front_1_custom_slot = ship_deck_space
						}
					}
					#Line Production
					add_equipment_production = {
						equipment = {
							type = ship_hull_carrier_2
							creator = "SOV"
							version_name = "Project 71 Class"
						}
						name = "Siberia"
						requested_factories = 1
						progress = 0.45
						amount = 1
					}
				}
				else_if = {
					limit = { #Carrier 2
						has_tech = basic_ship_hull_carrier
					}
					#Equipment Variant
					create_equipment_variant = {
						name = "Project 71 Class"
						type = ship_hull_carrier_1
						name_group = SOV_CV_HISTORICAL
						parent_version = 0
						modules = {
							fixed_ship_deck_slot_1 = ship_deck_space
							fixed_ship_deck_slot_2 = ship_deck_space
							fixed_ship_anti_air_slot = ship_anti_air_2
							fixed_ship_radar_slot = empty
							fixed_ship_engine_slot = carrier_ship_engine_2
							fixed_ship_secondaries_slot = ship_secondaries_1
							front_1_custom_slot = ship_deck_space
						}
					}
					#Line Production
					add_equipment_production = {
						equipment = {
							type = ship_hull_carrier_1
							creator = "SOV"
							version_name = "Project 71 Class"
						}
						name = "Siberia"
						requested_factories = 1
						progress = 0.45
						amount = 1
					}
				}
				else = {  #Carrier 1
					if = {
						limit = {
							NOT = { has_tech = early_ship_hull_carrier }
						}
						set_technology = { early_ship_hull_carrier = 1 }
					}
					#Equipment Variant
					create_equipment_variant = {
						name = "Project 71 Class"
						type = ship_hull_carrier_conversion_ca
						name_group = SOV_CV_HISTORICAL
						parent_version = 0
						modules = {
							fixed_ship_deck_slot_1 = ship_deck_space
							fixed_ship_deck_slot_2 = ship_deck_space
							fixed_ship_anti_air_slot = ship_anti_air_2
							fixed_ship_radar_slot = empty
							fixed_ship_engine_slot = carrier_ship_engine_1
							fixed_ship_secondaries_slot = ship_secondaries_1
						}
					}
					#Line Production
					add_equipment_production = {
						equipment = {
							type = ship_hull_carrier_conversion_ca
							creator = "SOV"
							version_name = "Project 71 Class"
						}
						name = "Siberia"
						requested_factories = 1
						progress = 0.45
						amount = 1
					}
				}
			}

			##############
			### NO MTG ###
			##############
			else = {
				if = {
					limit = { #Carrier 4 
						has_tech = advanced_carrier
					}
					add_equipment_production = {
						equipment = {
							type = carrier_4
							creator = "SOV"
							version_name = "Project 71 Class"
						}
						requested_factories = 1
						progress = 0.45
						amount = 1
					}
				}
				else_if = {
					limit = { #Carrier 3
						has_tech = improved_carrier
					}
					add_equipment_production = {
						equipment = {
							type = carrier_3
							creator = "SOV"
							version_name = "Project 71 Class"
						}
						requested_factories = 1
						progress = 0.45
						amount = 1
					}
				}
				else_if = {
					limit = { #Carrier 2
						has_tech = basic_carrier
					}
					add_equipment_production = {
						equipment = {
							type = carrier_2
							creator = "SOV"
							version_name = "Project 71 Class"
						}
						requested_factories = 1
						progress = 0.45
						amount = 1
					}
				}
				else = {  #Carrier 1
					if = {
						limit = {
							NOT = { has_tech = early_carrier }
						}
						set_technology = { early_carrier = 1 }
					}
					add_equipment_production = {
						equipment = {
							type = carrier_1
							creator = "SOV"
							version_name = "Project 71 Class"
						}
						requested_factories = 1
						progress = 0.45
						amount = 1
					}
				}
			}
		}
	}

	focus = {
		id = SOV_naval_infantry

		icon = GFX_goal_generic_amphibious_assault
		prerequisite = { focus = SOV_advanced_maneuvers }
		x = 0
		y = 1
		relative_position_id = SOV_advanced_maneuvers
		cost = 10
		
		search_filters = {FOCUS_FILTER_RESEARCH FOCUS_FILTER_NAVY_XP FOCUS_FILTER_ARMY_XP}

		completion_reward = {
			set_variable = { SOV_red_fleet_naval_invasion_capacity = 10 }
			set_variable = { SOV_red_fleet_invasion_preparation = -0.1 }
			set_variable = { SOV_red_fleet_special_forces_cap = 0.1 }
			custom_effect_tooltip = SOV_naval_infantry_ns_tt

			navy_experience = 25
			army_experience = 25

			add_tech_bonus = {
				name = SOV_naval_infantry
				bonus = 1
				uses = 1
				category = marine_tech
			}
		}
	}



##     ## #### ##       #### ########    ###    ########  ##    ## 
###   ###  ##  ##        ##     ##      ## ##   ##     ##  ##  ##  
#### ####  ##  ##        ##     ##     ##   ##  ##     ##   ####   
## ### ##  ##  ##        ##     ##    ##     ## ########     ##    
##     ##  ##  ##        ##     ##    ######### ##   ##      ##    
##     ##  ##  ##        ##     ##    ##     ## ##    ##     ##    
##     ## #### ######## ####    ##    ##     ## ##     ##    ##    



	focus = {
		id = SOV_found_the_pcdi

		icon = GFX_goal_generic_gun_purchase
		x = 15
		y = 0
		relative_position_id = SOV_expand_the_red_fleet
		cost = 5

		ai_will_do = {
			factor = 1
		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY}

		completion_reward = {
			hidden_effect = {
				add_dynamic_modifier = { modifier = SOV_defense_industry_dynamic_modifier }
			}
			custom_effect_tooltip = SOV_found_the_pcdi_ns_tt
		}
	}

	focus = {
		id = SOV_pc_of_mechanical_engineering

		icon = GFX_goal_generic_production2
		prerequisite = { focus = SOV_found_the_pcdi }
		x = -5
		y = 1
		relative_position_id = SOV_found_the_pcdi
		cost = 10

		available = {
			has_full_control_of_state = 219 #MOSCOW
		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH}

		completion_reward = {
			add_to_variable = { SOV_defense_industry_production_factory_max_efficiency_factor = 0.05 }
			custom_effect_tooltip = SOV_pc_of_mechanical_engineering_ns_tt

			if = { #DEFAULT COMMIE
				limit = {
					has_government = communism
				}
				add_tech_bonus = {
					name = SOV_pc_of_mechanical_engineering_name_default
					bonus = 1
					uses = 2
					category = motorized_equipment
					category = infantry_weapons
				}
			}
			else = { #ALT IDEOLOGY
				add_tech_bonus = {
					name = SOV_pc_of_mechanical_engineering_name_alt
					bonus = 1
					uses = 2
					category = motorized_equipment
					category = infantry_weapons
				}
			}
			
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
		}
	}

	focus = {
		id = SOV_superior_war_machines

		icon = GFX_focus_generic_tank_production
		prerequisite = { focus = SOV_pc_of_mechanical_engineering }
		x = -1
		y = 1
		relative_position_id = SOV_pc_of_mechanical_engineering
		cost = 10

		available = {
		}
		
		search_filters = {FOCUS_FILTER_RESEARCH}

		completion_reward = {
			set_variable = { SOV_defense_industry_tank_manufacturer_cost_factor = -0.25 }
			custom_effect_tooltip = SOV_superior_war_machines_ns_tt

			add_tech_bonus = {
				name = SOV_superior_war_machines
				bonus = 1.0
				uses = 2
				category = armor
			}
			if = {
				limit = {
					has_dlc = "No Step Back"
				}
				#T-34 tank template
				if = {
					limit = {
						OR = {
							has_tech = artillery3
							has_tech = antitank3
						}
					}
					create_equipment_variant = {
						name = "T-34"
						type = medium_tank_chassis_2
						parent_version = 0
						modules = {
							main_armament_slot = tank_medium_cannon_2
							turret_type_slot = tank_medium_two_man_tank_turret
							suspension_type_slot = tank_christie_suspension
							armor_type_slot = tank_welded_armor
							engine_type_slot = tank_diesel_engine
							special_type_slot_1 = sloped_armor
						}
						upgrades = {
							tank_nsb_engine_upgrade = 10
							tank_nsb_armor_upgrade = 7
						}
						icon = "GFX_SOV_improved_medium_tank_medium"
					}
				}
				else_if = {
					limit = {
						OR = {
							has_tech = artillery1
							has_tech = antitank1
						}
					}
					create_equipment_variant = {
						name = "T-34"
						type = medium_tank_chassis_2
						parent_version = 0
						modules = {
							main_armament_slot = tank_medium_cannon
							turret_type_slot = tank_medium_two_man_tank_turret
							suspension_type_slot = tank_christie_suspension
							armor_type_slot = tank_welded_armor
							engine_type_slot = tank_diesel_engine
							special_type_slot_1 = sloped_armor
						}
						upgrades = {
							tank_nsb_engine_upgrade = 10
							tank_nsb_armor_upgrade = 7
						}
						icon = "GFX_SOV_improved_medium_tank_medium"
					}
				}
				else_if = { #Why? You ruined your T-34
					limit = {
						has_tech = interwar_artillery
					}
					create_equipment_variant = {
						name = "T-34"
						type = medium_tank_chassis_2
						parent_version = 0
						modules = {
							main_armament_slot = tank_small_cannon_2
							turret_type_slot = tank_medium_two_man_tank_turret
							suspension_type_slot = tank_christie_suspension
							armor_type_slot = tank_welded_armor
							engine_type_slot = tank_diesel_engine
							special_type_slot_1 = sloped_armor
						}
						upgrades = {
							tank_nsb_engine_upgrade = 10
							tank_nsb_armor_upgrade = 7
						}
						icon = "GFX_SOV_improved_medium_tank_medium"
					}
				}
				else = { #Don't do this to yourself dude
					create_equipment_variant = {
						name = "T-34"
						type = medium_tank_chassis_2
						parent_version = 0
						modules = {
							main_armament_slot = tank_small_cannon
							turret_type_slot = tank_medium_two_man_tank_turret
							suspension_type_slot = tank_christie_suspension
							armor_type_slot = tank_welded_armor
							engine_type_slot = tank_diesel_engine
							special_type_slot_1 = sloped_armor
						}
						upgrades = {
							tank_nsb_engine_upgrade = 10
							tank_nsb_armor_upgrade = 7
						}
						icon = "GFX_SOV_improved_medium_tank_medium"
					}
				}
			}
		}
	}

	focus = {
		id = SOV_the_means_to_wage_war

		icon = GFX_goal_generic_military_sphere
		prerequisite = { focus = SOV_pc_of_mechanical_engineering }
		x = 1
		y = 1
		relative_position_id = SOV_pc_of_mechanical_engineering
		cost = 5
		
		search_filters = {FOCUS_FILTER_RESEARCH}

		completion_reward = {
			set_variable = { SOV_defense_industry_materiel_manufacturer_cost_factor = -0.25 }
			custom_effect_tooltip = SOV_the_means_to_wage_war_ns_tt

			add_tech_bonus = {
				name = SOV_the_means_to_wage_war
				bonus = 0.75
				uses = 2
				category = support_tech
			}
		}
	}

	focus = {
		id = SOV_soviet_artillery

		icon = GFX_goal_generic_army_artillery
		prerequisite = { focus = SOV_superior_war_machines }
		x = -1
		y = 1
		relative_position_id = SOV_superior_war_machines
		cost = 10

		available = {
		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH}

		completion_reward = {
			if = {
				limit = {
					has_government = communism
				}
				add_tech_bonus = {
					name = SOV_soviet_artillery_tech_bonus_name_default
					bonus = 1.0
					uses = 2
					ahead_reduction = 2
					category = artillery
				}
			}
			else  ={
				add_tech_bonus = {
					name = SOV_soviet_artillery_tech_bonus_name_alt
					bonus = 1.0
					uses = 2
					ahead_reduction = 2
					category = artillery
				}
			}
			
			if = { # 2 Mils in Chelyabinsk
				limit = {
					has_full_control_of_state = 572
					572 = {
						free_building_slots = {
							building = arms_factory
							size > 0
							include_locked = yes
						}
					}
				}
				572 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
			}
			else = { # If Chelyabinsk not available, then 1 Mil elsewhere
				random_owned_state = {
					limit = {
						is_fully_controlled_by = ROOT
						arms_factory > 1
						free_building_slots = {
							building = arms_factory
							size > 0
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
			}

			add_ideas = SOV_defense_industry_artillery_bonus

			#SU-85/100 tank template (AT)
			if = {
				limit = {
					has_tech = antitank5
				}
				create_equipment_variant = {
					name = "SU-100"
					type = medium_tank_destroyer_chassis_2
					parent_version = 0
					modules = {
						main_armament_slot = tank_high_velocity_cannon_3
						turret_type_slot = tank_medium_fixed_superstructure_turret
						suspension_type_slot = tank_christie_suspension
						armor_type_slot = tank_welded_armor
						engine_type_slot = tank_diesel_engine
						special_type_slot_1 = sloped_armor
					}
					upgrades = {
						tank_nsb_engine_upgrade = 10
						tank_nsb_armor_upgrade = 8
					}
					icon = "gfx/interface/technologies/tank/medium_tank/r56_tech_SOV_medium_tank_03_TD.dds"	#changed it, for the icon was apparently missing
				}
			}
			else_if = {
				limit = {
					has_tech = antitank2
				}
				create_equipment_variant = {
					name = "SU-100"
					type = medium_tank_destroyer_chassis_2
					parent_version = 0
					modules = {
						main_armament_slot = tank_high_velocity_cannon_2
						turret_type_slot = tank_medium_fixed_superstructure_turret
						suspension_type_slot = tank_christie_suspension
						armor_type_slot = tank_welded_armor
						engine_type_slot = tank_diesel_engine
						special_type_slot_1 = sloped_armor
					}
					upgrades = {
						tank_nsb_engine_upgrade = 10
						tank_nsb_armor_upgrade = 8
					}
					icon = "gfx/interface/technologies/tank/medium_tank/r56_tech_SOV_medium_tank_02_TD.dds"	#changed it, for the icon was apparently missing
				}
			}
			else_if = { #You really should invest some time in research AT...
				limit = {
					has_tech = interwar_antitank
				}
				create_equipment_variant = {
					name = "SU-85"
					type = medium_tank_destroyer_chassis_2
					parent_version = 0
					modules = {
						main_armament_slot = tank_high_velocity_cannon
						turret_type_slot = tank_medium_fixed_superstructure_turret
						suspension_type_slot = tank_christie_suspension
						armor_type_slot = tank_welded_armor
						engine_type_slot = tank_diesel_engine
						special_type_slot_1 = sloped_armor
					}
					upgrades = {
						tank_nsb_engine_upgrade = 10
						tank_nsb_armor_upgrade = 8
					}
					icon = "gfx/interface/technologies/tank/medium_tank/r56_tech_SOV_medium_tank_01_TD.dds"	#changed it, for the icon was apparently missing
				}
			}
			else = { #This is just blasphemy
				create_equipment_variant = {
					name = "SU-85"
					type = medium_tank_destroyer_chassis_2
					parent_version = 0
					modules = {
						main_armament_slot = tank_heavy_cannon
						turret_type_slot = tank_medium_fixed_superstructure_turret
						suspension_type_slot = tank_christie_suspension
						armor_type_slot = tank_welded_armor
						engine_type_slot = tank_diesel_engine
						special_type_slot_1 = sloped_armor
					}
					upgrades = {
						tank_nsb_engine_upgrade = 10
						tank_nsb_armor_upgrade = 8
					}
					icon = "gfx/interface/technologies/tank/medium_tank/r56_tech_SOV_medium_tank_01_TD.dds"	#changed it, for the icon was apparently missing
				}
			}

			#SU-122 tank template (SPG)
			if = {
				limit = {
					has_tech = artillery4
				}
				create_equipment_variant = {
					name = "SU-122"
					type = medium_tank_artillery_chassis_2
					parent_version = 0
					modules = {
						main_armament_slot = tank_heavy_howitzer
						turret_type_slot = tank_medium_fixed_superstructure_turret
						suspension_type_slot = tank_bogie_suspension
						armor_type_slot = tank_riveted_armor
						engine_type_slot = tank_diesel_engine
						special_type_slot_1 = sloped_armor
					}
					upgrades = {
						tank_nsb_engine_upgrade = 10
						tank_nsb_armor_upgrade = 8
					}
					icon = "gfx/interface/technologies/tank/medium_tank/r56_tech_SOV_medium_tank_03_SPA.dds"	#changed it, for the icon was apparently missing
				}
			}
			else_if = {
				limit = {
					has_tech = artillery1
				}
				create_equipment_variant = {
					name = "SU-122"
					type = medium_tank_artillery_chassis_2
					parent_version = 0
					modules = {
						main_armament_slot = tank_medium_howitzer_2
						turret_type_slot = tank_medium_fixed_superstructure_turret
						suspension_type_slot = tank_bogie_suspension
						armor_type_slot = tank_riveted_armor
						engine_type_slot = tank_diesel_engine
						special_type_slot_1 = sloped_armor
					}
					upgrades = {
						tank_nsb_engine_upgrade = 10
						tank_nsb_armor_upgrade = 8
					}
					icon = "gfx/interface/technologies/tank/medium_tank/r56_tech_SOV_medium_tank_02_SPA.dds"	#changed it, for the icon was apparently missing
				}
			}
			else = { #You really need some arty research
				create_equipment_variant = {
					name = "SU-122"
					type = medium_tank_artillery_chassis_2
					parent_version = 0
					modules = {
						main_armament_slot = tank_medium_howitzer
						turret_type_slot = tank_medium_fixed_superstructure_turret
						suspension_type_slot = tank_bogie_suspension
						armor_type_slot = tank_riveted_armor
						engine_type_slot = tank_diesel_engine
						special_type_slot_1 = sloped_armor
					}
					upgrades = {
						tank_nsb_engine_upgrade = 10
						tank_nsb_armor_upgrade = 8
					}
					icon = "gfx/interface/technologies/tank/medium_tank/r56_tech_SOV_medium_tank_01_SPA.dds"	#changed it, for the icon was apparently missing
				}
			}
		}
	}
	
	focus = {
		id = SOV_sing_katyusha_sing_focus
		icon = GFX_goal_soviet_rocketry
		prerequisite = { focus = SOV_soviet_artillery }
		available = {
			any_other_country = {
				is_major = yes
				has_war_with = ROOT
			}
			has_tech = motorized_rocket_unit
		}
		x = 0
		y = 2
		relative_position_id = SOV_soviet_artillery
		cost = 5
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes

		completion_reward = {
			add_ideas = SOV_sing_katyusha_sing
			custom_effect_tooltip = available_designer
			show_ideas_tooltip = SOV_voronezh_komintern_factory
			custom_effect_tooltip = manufacturer_applies_bonus_instantly_tooltip
		}
	}

	focus = {
		id = SOV_pc_of_mortar_armament

		icon = GFX_goal_generic_occupy_start_war
		prerequisite = { focus = SOV_pc_of_mechanical_engineering }
		x = 0
		y = 2
		relative_position_id = SOV_pc_of_mechanical_engineering
		cost = 10

		available = {
			has_full_control_of_state = 219 #MOSCOW
		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH}

		completion_reward = {
			add_to_variable = { SOV_defense_industry_breakthrough_factor = 0.05 }
			add_to_variable = { SOV_defense_industry_army_artillery_defence_factor = 0.05 }
			custom_effect_tooltip = SOV_pc_of_mortar_armament_ns_tt

			if = { #DEFAULT COMMIE
				limit = {
					has_government = communism
				}
				add_tech_bonus = {
					name = SOV_pc_of_mortar_armament_name_default
					bonus = 0.75
					uses = 2
					category = artillery
				}
			}
			else = { #ALT IDEOLOGY
				add_tech_bonus = {
					name = SOV_pc_of_mortar_armament_name_alt
					bonus = 0.75
					uses = 2
					category = artillery
				}
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
		}
	}

	focus = {
		id = SOV_development_of_tankograd

		icon = GFX_goal_SOV_tankograd
		prerequisite = { focus = SOV_the_means_to_wage_war }
		x = 1
		y = 1
		relative_position_id = SOV_the_means_to_wage_war
		cost = 10

		available = {
			custom_trigger_tooltip = {
				tooltip = SOV_fyp_controlled_factories_tier_4_tt
				NOT = { num_of_controlled_factories < SOV_fyp_factory_requirement_tier_4 }
			}
			#TODO_Manu: This could require X num of factories to have been relocated
		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_ARMY_XP}

		completion_reward = {
			add_to_variable = { SOV_defense_industry_land_equipment_upgrade_xp_cost = -0.1 }
			custom_effect_tooltip = SOV_development_of_tankograd_ns_tt

			custom_effect_tooltip = SOV_development_of_tankograd_factories_tt
			#This is just for tooltip purposes
			effect_tooltip = {
				every_owned_state = {
					limit = {
						is_on_continent = asia
						arms_factory > 2
						free_building_slots = {
							building = arms_factory
							size > 1
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
			}

			#Actual effects
			set_temp_variable = { temp_targets_index = 0 }
			while_loop_effect = {
				limit = {
					check_variable = { temp_targets_index = 10 compare = less_than }
				}
				hidden_effect = {
					random_owned_state = {
						limit = {
							is_on_continent = asia
							arms_factory > 2
							free_building_slots = {
								building = arms_factory
								size > 1
								include_locked = yes
							}
							NOT = { has_state_flag = SOV_development_of_tankograd_flag }
						}
						add_extra_state_shared_building_slots = 1
						add_building_construction = {
							type = arms_factory
							level = 1
							instant_build = yes
						}
						set_state_flag = SOV_development_of_tankograd_flag
						add_to_temp_variable = { SOV.temp_targets_index = 1 }
						log = "Round [?SOV.temp_targets_index]"
					}
				}
			}
		}
	}

	focus = {
		id = SOV_mass_tank_production
		icon = GFX_focus_generic_tank_production
		prerequisite = { focus = SOV_development_of_tankograd }
		x = 0
		y = 2
		cost = 10
		ai_will_do = {
			factor = 20			
		}
		relative_position_id = SOV_development_of_tankograd
		cancel_if_invalid = no
		available = {
			OR = {
				has_idea = war_economy
				has_idea = tot_economic_mobilisation
			}
		}

		completion_reward = {
			add_ideas = SOV_mass_tank_procution_idea
		}
	}

	focus = {
		id = SOV_merge_tank_and_materiel_plants

		icon = GFX_focus_SOV_merge_plants
		prerequisite = { focus = SOV_development_of_tankograd focus = SOV_pc_of_mortar_armament focus = SOV_soviet_artillery }

		x = 0
		y = 1
		relative_position_id = SOV_pc_of_mortar_armament
		cost = 5

		available = {
			NOT = { has_country_flag = SOV_paranoia_system_active_flag }
		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY}

		completion_reward = {
			custom_effect_tooltip = SOV_merge_tank_and_materiel_plants_tt
		}
	}

	
	focus = {
		id = SOV_mass_firearms_production
		icon = GFX_goal_ammunitions
		prerequisite = { focus = SOV_merge_tank_and_materiel_plants }
		available = {
			any_other_country = {
				is_major = yes
				has_war_with = ROOT
			}
			OR = {
				has_idea = war_economy
				has_idea = tot_economic_mobilisation
			}			
		}
		x = 0
		y = 1
		relative_position_id = SOV_merge_tank_and_materiel_plants
		cost = 5	#was 10
		ai_will_do = {
			factor = 55
		}

		available_if_capitulated = yes

		completion_reward = {
			add_ideas = SOV_mass_firearms_production
		}
	}
	focus = {
		id = SOV_shocktroops
		icon = GFX_goal_generic_special_forces
		prerequisite = { focus = SOV_mass_firearms_production }
		available = {
			any_other_country = {
				is_major = yes
				has_war_with = ROOT
			}
			OR = {
				has_idea = war_economy
				has_idea = tot_economic_mobilisation
			}			
		}
		x = 0
		y = 1
		relative_position_id = SOV_mass_firearms_production
		cost = 10
		ai_will_do = {
			factor = 55
		}

		available_if_capitulated = yes

		completion_reward = {
			add_tech_bonus = {
				name = special_forces_bonus
				bonus = 1
				uses = 2

				category = r56_shock_infantry_tech
			}
			add_tech_bonus = {
				name = special_forces_bonus
				bonus = 1.0
				uses = 2
				category = r56_special_forces_training_tech 
			}
		}
	}

	focus = {
		id = SOV_strengthen_the_mobilization_plan
		icon = GFX_focus_SOV_mobilization_plan
		x = 7
		y = 0
		relative_position_id = SOV_found_the_pcdi
		cost = 5

		ai_will_do = {
			factor = 1
		}
		
		search_filters = {FOCUS_FILTER_MANPOWER}

		completion_reward = {
			add_ideas = { SOV_army_purge }
			add_to_variable = { SOV_the_red_army_mobilization_speed = 0.05 }
			add_to_variable = { SOV_the_red_army_conscription_factor = 0.03 }
			custom_effect_tooltip = SOV_strengthen_the_mobilization_plan_ns_tt
		}
	}

	focus = {
		id = SOV_military_engineering_university
		icon = GFX_focus_generic_military_academy
		prerequisite = { focus = SOV_found_the_pcdi }
		prerequisite = { focus = SOV_strengthen_the_mobilization_plan }
		x = 2
		y = 1
		relative_position_id = SOV_found_the_pcdi
		cost = 5

		completion_reward = {
			add_to_variable = { SOV_defense_industry_production_speed_coastal_bunker_factor = 0.05 }
			add_to_variable = { SOV_defense_industry_production_speed_bunker_factor = 0.05 }
			add_to_variable = { SOV_defense_industry_max_dig_in_factor = 0.05 }
			custom_effect_tooltip = SOV_military_engineering_university_ns_tt
		}
	}

	focus = {
		id = SOV_leningrad_polytechnical_institute
		icon = GFX_focus_research
		prerequisite = { focus = SOV_the_means_to_wage_war focus = SOV_military_engineering_university }
		x = 2
		y = 2
		relative_position_id = SOV_the_means_to_wage_war
		cost = 10
		dynamic = yes 
		available = {
			has_completed_focus = SOV_pc_of_mechanical_engineering	#that way it is 140 days instead of possible 70
		}
		
		search_filters = {FOCUS_FILTER_RESEARCH}

		completion_reward = {
			add_research_slot = 1
		}
	}

	focus = {
		id = SOV_soviet_atomic_bomb_project
		icon = GFX_focus_wonderweapons
		prerequisite = { focus = SOV_leningrad_polytechnical_institute }
		x = 0
		y = 2
		relative_position_id = SOV_leningrad_polytechnical_institute
		cost = 10

		available = {
			custom_trigger_tooltip = {
				tooltip = SOV_national_academies_of_sciences_available_tt
				check_variable = { SOV_academy_of_sciences_research_speed_factor = SOV_academies_required_for_atomic_bomb_project compare = greater_than_or_equals }
			}
			is_subject = no
		}
		
		search_filters = {FOCUS_FILTER_RESEARCH}

		completion_reward = {
			add_tech_bonus = {
				name = SOV_soviet_atomic_bomb_project_tech_bonus_name
				bonus = 1
				uses = 1
				ahead_reduction = 1
				category = nuclear
			}

			if = {
				limit = {
					has_dlc = "La Resistance"
				}
				create_operative_leader = {
					name = "Ursula Kuczynski"
					GFX = GFX_Portrait_ursula_kuczynski
					female = yes
					traits = { operative_safe_cracker operative_infiltrator }
					bypass_recruitment = no
					available_to_spy_master = yes
					nationalities = { SOV GER }
				}
				add_ideas = SOV_soviet_atomic_bomb_project_ns
			}
			custom_effect_tooltip = SOV_soviet_atomic_bomb_project_unlock_operation_tt
		}
	}

	focus = {
		id = SOV_move_industry_to_the_urals
		icon = GFX_goal_reichsautobahn
		prerequisite = { focus = SOV_military_engineering_university }
		x = -3
		y = 1
		relative_position_id = SOV_military_engineering_university
		cost = 10

		available = {
			has_full_control_of_state = 219 #MOSCOW
			has_equipment = { train_equipment > 119 } #20 trains per factory
			OR = {
				threat > 0.85
				any_enemy_country = {
					SOV_is_major_not_original_sov = yes
					capital_scope = {
						is_on_continent = europe
					}
				}
			}
		}

		select_effect = {
			add_equipment_to_stockpile = {
				type = train_equipment
				amount = SOV_industrial_relocation_trains_focus_negative
				producer = SOV
			}
			#Factories are removed immediately to keep consistency with how decisions work
			219 = { #Moscow
				remove_building = {
					type = arms_factory
					level = 1
				}
				remove_building = {
					type = industrial_complex
					level = 1
				}
			}
			if = {
				limit = {
					has_full_control_of_state = 195
				}
				195 = { #Leningrad
					remove_building = {
						type = arms_factory
						level = 1
					}
					remove_building = {
						type = industrial_complex
						level = 1
					}
				}
			}
			if = {
				limit = {
					has_full_control_of_state = 202
				}
				202 = { #Kiev
					remove_building = {
						type = arms_factory
						level = 1
					}
					remove_building = {
						type = industrial_complex
						level = 1
					}
				}
			}
		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY}

		completion_reward = {
			hidden_effect = {
				add_equipment_to_stockpile = {
					type = train_equipment
					amount = SOV_industrial_relocation_trains_focus
					producer = SOV
				}
			}
			custom_effect_tooltip = SOV_focus_select_effect_tt
			effect_tooltip = {
				219 = { #Moscow
					remove_building = {
						type = arms_factory
						level = 1
					}
					remove_building = {
						type = industrial_complex
						level = 1
					}
				}
				if = {
					limit = {
						has_full_control_of_state = 195
					}
					195 = { #Leningrad
						remove_building = {
							type = arms_factory
							level = 1
						}
						remove_building = {
							type = industrial_complex
							level = 1
						}
					}
				}
				if = {
					limit = {
						has_full_control_of_state = 202
					}
					202 = { #Kiev
						remove_building = {
							type = arms_factory
							level = 1
						}
						remove_building = {
							type = industrial_complex
							level = 1
						}
					}
				}
			}
			custom_effect_tooltip = SOV_move_industry_to_the_urals_trains_tt

			custom_effect_tooltip = SOV_focus_complete_effect_tt
			unlock_decision_category_tooltip = SOV_industry_relocation

			random_controlled_state = {
				limit = {
					SOV_is_industrial_relocation_destiny_state = yes
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			
				hidden_effect = {
					damage_building = { type = arms_factory damage = 0.5 }
					damage_building = { type = industrial_complex damage = 0.5 }
				}
			}
			if = {
				limit = {
					ROOT = { has_full_control_of_state = 195 } #Leningrad
				}
				random_controlled_state = { #Different State please thanks
					limit = {
						NOT = { state = PREV }
						SOV_is_industrial_relocation_destiny_state = yes
					}
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
				
					hidden_effect = {
						damage_building = { type = arms_factory damage = 0.5 }
						damage_building = { type = industrial_complex damage = 0.5 }
					}
				}
			}
			if = {
				limit = {
					ROOT = { has_full_control_of_state = 202 } #Leningrad
				}
				random_controlled_state = { #Different State please thanks
					limit = {
						NOT = { state = PREV }
						SOV_is_industrial_relocation_destiny_state = yes
					}
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
				
					hidden_effect = {
						damage_building = { type = arms_factory damage = 0.5 }
						damage_building = { type = industrial_complex damage = 0.5 }
					}
				}
			}
			custom_effect_tooltip = SOV_relocate_industry_repair_tt
		}
	}

	focus = {
		id = SOV_arms_purchases_in_the_us
		text = FRA_arms_purchases_in_the_us
		icon = GFX_Goal_USA_arsenal_of_democracy
		prerequisite = { focus = SOV_military_engineering_university }
		x = 3
		y = 1

		relative_position_id = SOV_military_engineering_university
		cost = 5
		ai_will_do = {
			factor = 50
			modifier = {
				factor = 0
				NOT = { has_war_with = GER }
			}
		}

		available = {
			has_defensive_war = yes
			any_other_country = {
				is_major = yes
				has_war_with = ROOT
			}
			USA_can_sell_weapons_trigger = yes
		}

		completion_reward = {
			USA = { country_event = lar_arms_purchases.1 }
			custom_effect_tooltip = if_they_accept_tt
			unlock_decision_category_tooltip = SOV_weapons_purchases_category
		}
		search_filters = { FOCUS_FILTER_MILITARY_EQUIPMENT }
	}
	focus = {
		id = SOV_lease_british_planes
		icon = GFX_goal_fighters_uk
		prerequisite = { focus = SOV_arms_purchases_in_the_us }
		x = 1
		y = 1

		relative_position_id = SOV_arms_purchases_in_the_us
		cost = 5
		ai_will_do = {
			factor = 2
			modifier = {
				factor = 0
				NOT = { has_war_with = GER }
			}
		}


		available = {
			has_defensive_war = yes
			any_other_country = {
				is_major = yes
				has_war_with = ROOT
			}
			ENG_can_sell_weapons_trigger = yes		
		}

		available_if_capitulated = yes

		completion_reward = {
			ENG = { country_event = lar_arms_purchases.1 }
			custom_effect_tooltip = if_they_accept_tt
			unlock_decision_tooltip = SOV_order_fighters_in_ENG
			unlock_decision_tooltip = SOV_order_bombers_in_ENG
		}
		search_filters = { FOCUS_FILTER_MILITARY_EQUIPMENT }
	}

	focus = {
		id = SOV_the_molotov_line
		icon = GFX_goal_generic_fortification
		prerequisite = { focus = SOV_military_engineering_university }
		x = -1
		y = 1
		relative_position_id = SOV_military_engineering_university
		cost = 10

		mutually_exclusive = { focus = SOV_improve_the_stalin_line }

		available = {
			OR = {
				has_full_control_of_state = 188
				has_full_control_of_state = 189
				has_full_control_of_state = 814
				has_full_control_of_state = 935
				has_full_control_of_state = 95
				has_full_control_of_state = 97
				has_full_control_of_state = 94
				has_full_control_of_state = 93
				has_full_control_of_state = 91
				has_full_control_of_state = 89
				has_full_control_of_state = 80
				has_full_control_of_state = 78
				has_full_control_of_state = 766
			}
		}

		completion_reward = {
			custom_effect_tooltip = SOV_the_molotov_line_tt

			### LITHUANIA ###
			if = { #If Memel is controlled, then add forts in Memel, if not, then go to Zemaitija
				limit = {
					188 = { is_fully_controlled_by = ROOT }
				}
				custom_effect_tooltip = SOV_molotov_line_forts_3
				hidden_effect = {
					188 = {
						add_building_construction = {
							type = bunker
							level = 3
							province = {
								id = 3288
							}
							instant_build = yes
						}
					}
				}
			}
			else = {
				189 = { #ZEMAITIJA
					if = {
						limit = { is_fully_controlled_by = ROOT }
						custom_effect_tooltip = SOV_molotov_line_forts_3
						hidden_effect = {
							add_building_construction = {
								type = bunker
								level = 1
								province = {
									id = 6314
									id = 9499
									id = 3337
								}
								instant_build = yes
							}
						}
					}
				}
			}
			814 = { #Suduva
				if = {
					limit = { is_fully_controlled_by = ROOT }
					custom_effect_tooltip = SOV_molotov_line_forts_2
					hidden_effect = {
						add_building_construction = {
							type = bunker
							level = 1
							province = {
								id = 6407
								id = 11312
								id = 6281
							}
							instant_build = yes
						}
					}
				}
			}

			### POLAND ###
			97 = { #Grodno
				if = {
					limit = { is_fully_controlled_by = ROOT }
					custom_effect_tooltip = SOV_molotov_line_forts_1
					hidden_effect = {
						add_building_construction = {
							type = bunker
							level = 1
							province = {
								id = 13269
							}
							instant_build = yes
						}
					}
				}
			}
			95 = { #Nowogrodek
				if = {
					limit = { is_fully_controlled_by = ROOT }
					custom_effect_tooltip = SOV_molotov_line_forts_1
					hidden_effect = {
						add_building_construction = {
							type = bunker
							level = 1
							province = {
								id = 13206
							}
							instant_build = yes
						}
					}
				}
			}
			97 = { #Bialystok
				if = {
					limit = { is_fully_controlled_by = ROOT }
					custom_effect_tooltip = SOV_molotov_line_forts_6
					hidden_effect = {
						add_building_construction = {
							type = bunker
							level = 1
							province = {
								id = 347
								id = 11357
								id = 11329
								id = 11274
								id = 290
							}
							instant_build = yes
						}
					}
				}
			}
			94 = { #Polesie
				if = {
					limit = { is_fully_controlled_by = ROOT }
					custom_effect_tooltip = SOV_molotov_line_forts_2
					hidden_effect = {
						add_building_construction = {
							type = bunker
							level = 1
							province = {
								id = 3392
								id = 6546
							}
							instant_build = yes
						}
					}
				}
			}
			93 = { #Wolyn
				if = {
					limit = { is_fully_controlled_by = ROOT }
					custom_effect_tooltip = SOV_molotov_line_forts_2
					hidden_effect = {
						add_building_construction = {
							type = bunker
							level = 1
							province = {
								id = 11441
								id = 422
							}
							instant_build = yes
						}
					}
				}
			}
			91 = { #Lwow
				if = {
					limit = { is_fully_controlled_by = ROOT }
					custom_effect_tooltip = SOV_molotov_line_forts_2
					hidden_effect = {
						add_building_construction = {
							type = bunker
							level = 1
							province = {
								id = 536
								id = 9468
							}
							instant_build = yes
						}
					}
				}
			}
			89 = { #Stanislawow
				if = {
					limit = { is_fully_controlled_by = ROOT }
					custom_effect_tooltip = SOV_molotov_line_forts_4
					hidden_effect = {
						add_building_construction = {
							type = bunker
							level = 1
							province = {
								id = 6431
								id = 6460
								id = 9425
								id = 3743
							}
							instant_build = yes
						}
					}
				}
			}

			### ROMANIA ###
			80 = { #Bucovina
				if = {
					limit = { is_fully_controlled_by = ROOT }
					custom_effect_tooltip = SOV_molotov_line_forts_2
					hidden_effect = {
						add_building_construction = {
							type = bunker
							level = 1
							province = {
								id = 9548
								id = 577
							}
							instant_build = yes
						}
					}
				}
			}
			### ROMANIA ###
			78 = { #Bessarabia
				if = {
					limit = { is_fully_controlled_by = ROOT }
					custom_effect_tooltip = SOV_molotov_line_forts_5
					hidden_effect = {
						add_building_construction = {
							type = bunker
							level = 1
							province = {
								id = 3407
								id = 3577
								id = 565
								id = 3707
								id = 3724
							}
							instant_build = yes
						}
					}
				}
			}
			766 = { #Southern Bessarabia
				if = {
					limit = { is_fully_controlled_by = ROOT }
					custom_effect_tooltip = SOV_molotov_line_forts_2
					hidden_effect = {
						add_building_construction = {
							type = bunker
							level = 1
							province = {
								id = 3704
								id = 3701
							}
							instant_build = yes
						}
					}
				}
			}
		}
	}

	focus = {
		id = SOV_improve_the_stalin_line
		icon = GFX_goal_fortify_the_westwall
		prerequisite = { focus = SOV_military_engineering_university }
		x = 1
		y = 1
		relative_position_id = SOV_military_engineering_university
		cost = 10

		mutually_exclusive = { focus = SOV_the_molotov_line }

		completion_reward = {
			209 = {
				if = {
					limit = { is_controlled_by = ROOT }
					add_building_construction = {
						type = bunker
						level = 6
						province = 415
						instant_build = yes
					}
				}
			}
			210 = {
				if = {
					limit = { is_controlled_by = ROOT }
					add_building_construction = {
						type = bunker
						level = 4
						province = 3333
						instant_build = yes
					}
				}
			}
			207 = {
				if = {
					limit = { is_controlled_by = ROOT }
					add_building_construction = {
						type = bunker
						level = 4
						province = 3219
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 4
						province = 6371
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 4
						province = 6220
						instant_build = yes
					}
				}
			}
			206 = {
				if = {
					limit = { is_controlled_by = ROOT }
					add_building_construction = {
						type = bunker
						level = 4
						province = 11370
						instant_build = yes
					}
				}
			}
			202 = {
				if = {
					limit = { is_controlled_by = ROOT }
					add_building_construction = {
						type = bunker
						level = 7
						province = 525
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 7
						province = 3494
						instant_build = yes
					}
				}

			}
			203 = {
				if = {
					limit = { is_controlled_by = ROOT }
					add_building_construction = {
						type = bunker
						level = 7
						province = 11409
						instant_build = yes
					}
				}
			}
			834 ={
				if = {
					limit = { is_controlled_by = ROOT }
					add_building_construction = {
						type = bunker
						level = 5
						province = 754
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 5
						province = 741
						instant_build = yes
					}
				}
			}
			192 = {
				if = {
					limit = { is_controlled_by = ROOT }
					add_building_construction = {
						type = bunker
						level = 5
						province = 11670
						instant_build = yes
					}
				}
			}
		}
	}

	focus = {
		id = SOV_the_defense_of_moscow
		icon = GFX_focus_SOV_the_defense_of_moscow
		prerequisite = { focus = SOV_move_industry_to_the_urals focus = SOV_improve_the_stalin_line focus = SOV_the_molotov_line }
		x = 1
		y = 1
		relative_position_id = SOV_move_industry_to_the_urals
		cost = 5

		available = {
			219 = {
				is_controlled_by = ROOT
				OR = {
					any_neighbor_state = {
						NOT = { is_controlled_by = ROOT }
					}

					SOV = { surrender_progress > 0.1 } #Keep an eye on this, might be too cheesy
				}
			}
		}
		
		bypass = {
			219 = {
				NOT = {
					is_controlled_by = ROOT
				}
			}
		}

		completion_reward = {
			army_experience = 15
			division_template = {
				name = "Vspomogatel'nyye Sily Oborony"
				priority = 1
				division_names_group = SOV_INF_01
				regiments = {
					infantry = { x = 0 y = 0 }
					infantry = { x = 0 y = 1 }
					infantry = { x = 0 y = 2 }
					infantry = { x = 0 y = 3 }
					
					infantry = { x = 1 y = 0 }
					infantry = { x = 1 y = 1 }
					infantry = { x = 1 y = 2 }
					infantry = { x = 1 y = 3 }
				}
				support = {
					engineer = { x = 0 y = 0 }
					artillery = { x = 0 y = 1 }
				}
			}
			division_template = {
				name = "Vspomogatel'naya Bronetankovaya Sila"
				priority = 1
				division_names_group = SOV_INF_01
				regiments = {
					light_armor = { x = 0 y = 0 }
					light_armor = { x = 0 y = 1 }

					light_armor = { x = 1 y = 0 }
					light_armor = { x = 1 y = 1 }

					cavalry = { x = 2 y = 0 }
					cavalry = { x = 2 y = 1 }
				}
			}
			219 = {
				custom_effect_tooltip = SOV_defense_of_moscow_forts
				custom_effect_tooltip = SOV_defense_divisions_12
				hidden_effect = {
					219 = {
						create_unit = {
							division = "name = \"1ya Vspomogatel'nyye sily oborony Moskvy\" division_template = \"Vspomogatel'nyye Sily Oborony\" start_experience_factor = 0.1 start_equipment_factor = 0.75 force_equipment_variants = { infantry_equipment_1 = { owner = SOV } }" 
							owner = SOV
						}
						create_unit = {
							division = "name = \"2ya Vspomogatel'nyye sily oborony Moskvy\" division_template = \"Vspomogatel'nyye Sily Oborony\" start_experience_factor = 0.1 start_equipment_factor = 0.75 force_equipment_variants = { infantry_equipment_1 = { owner = SOV } }" 
							owner = SOV
						}
						create_unit = {
							division = "name = \"3ya Vspomogatel'nyye sily oborony Moskvy\" division_template = \"Vspomogatel'nyye Sily Oborony\" start_experience_factor = 0.1 start_equipment_factor = 0.75 force_equipment_variants = { infantry_equipment_1 = { owner = SOV } }" 
							owner = SOV
						}
						create_unit = {
							division = "name = \"4ya Vspomogatel'nyye sily oborony Moskvy\" division_template = \"Vspomogatel'nyye Sily Oborony\" start_experience_factor = 0.1 start_equipment_factor = 0.75 force_equipment_variants = { infantry_equipment_1 = { owner = SOV } }" 
							owner = SOV
						}
						create_unit = {
							division = "name = \"5ya Vspomogatel'nyye sily oborony Moskvy\" division_template = \"Vspomogatel'nyye Sily Oborony\" start_experience_factor = 0.1 start_equipment_factor = 0.75 force_equipment_variants = { infantry_equipment_1 = { owner = SOV } }" 
							owner = SOV
						}
						create_unit = {
							division = "name = \"6ya Vspomogatel'nyye sily oborony Moskvy\" division_template = \"Vspomogatel'nyye Sily Oborony\" start_experience_factor = 0.1 start_equipment_factor = 0.75 force_equipment_variants = { infantry_equipment_1 = { owner = SOV } }" 
							owner = SOV
						}
						create_unit = {
							division = "name = \"7ya Vspomogatel'nyye sily oborony Moskvy\" division_template = \"Vspomogatel'nyye Sily Oborony\" start_experience_factor = 0.1 start_equipment_factor = 0.75 force_equipment_variants = { infantry_equipment_1 = { owner = SOV } }" 
							owner = SOV
						}
						create_unit = {
							division = "name = \"8ya Vspomogatel'nyye sily oborony Moskvy\" division_template = \"Vspomogatel'nyye Sily Oborony\" start_experience_factor = 0.1 start_equipment_factor = 0.75 force_equipment_variants = { infantry_equipment_1 = { owner = SOV } }" 
							owner = SOV
						}
						create_unit = {
							division = "name = \"9ya Vspomogatel'nyye sily oborony Moskvy\" division_template = \"Vspomogatel'nyye Sily Oborony\" start_experience_factor = 0.1 start_equipment_factor = 0.75 force_equipment_variants = { infantry_equipment_1 = { owner = SOV } }" 
							owner = SOV
						}
						create_unit = {
							division = "name = \"10ya Vspomogatel'nyye sily oborony Moskvy\" division_template = \"Vspomogatel'nyye Sily Oborony\" start_experience_factor = 0.1 start_equipment_factor = 0.75 force_equipment_variants = { infantry_equipment_1 = { owner = SOV } }" 
							owner = SOV
						}
						create_unit = {
							division = "name = \"1ya Moskva Vspomogatel'naya bronetankovaya sila\" division_template = \"Vspomogatel'naya Bronetankovaya Sila\" start_experience_factor = 0 start_equipment_factor = 0.6 force_equipment_variants = { infantry_equipment_1 = { owner = SOV } }" 
							owner = SOV
						}
						create_unit = {
							division = "name = \"2ya Moskva Vspomogatel'naya bronetankovaya sila\" division_template = \"Vspomogatel'naya Bronetankovaya Sila\" start_experience_factor = 0 start_equipment_factor = 0.6 force_equipment_variants = { infantry_equipment_1 = { owner = SOV } }" 
							owner = SOV
						}
					}
				}
				hidden_effect = {
					if = {
						limit = {
							ROOT = { controls_province = 3391 }
						}
						add_building_construction = {
							type = bunker
							level = 3
							province = 3391
							instant_build = yes
						}
					}
					if = {
						limit = {
							ROOT = { controls_province = 6414 }
						}
						add_building_construction = {
							type = bunker
							level = 3
							province = 6414
							instant_build = yes
						}
					}
					if = {
						limit = {
							ROOT = { controls_province = 9348 }
						}
						add_building_construction = {
							type = bunker
							level = 3
							province = 9348
							instant_build = yes
						}
					}
					if = {
						limit = {
							ROOT = { controls_province = 301 }
						}
						add_building_construction = {
							type = bunker
							level = 3
							province = 301
							instant_build = yes
						}
					}
					if = {
						limit = {
							ROOT = { controls_province = 9378 }
						}
						add_building_construction = {
							type = bunker
							level = 3
							province = 9378
							instant_build = yes
						}
					}
					if = {
						limit = {
							ROOT = { controls_province = 6283 }
						}
						add_building_construction = {
							type = bunker
							level = 3
							province = 6283
							instant_build = yes
						}
					}
					if = {
						limit = {
							ROOT = { controls_province = 3259 }
						}
						add_building_construction = {
							type = bunker
							level = 3
							province = 3259
							instant_build = yes
						}
					}
					if = {
						limit = {
							ROOT = { controls_province = 11282 }
						}
						add_building_construction = {
							type = bunker
							level = 3
							province = 11282
							instant_build = yes
						}
					}
					if = {
						limit = {
							ROOT = { controls_province = 6380 }
						}
						add_building_construction = {
							type = bunker
							level = 4
							province = 6380
							instant_build = yes
						}
					}				
				}
			}
		}
		search_filters = {FOCUS_FILTER_ARMY_XP}
	}

	focus = {
		id = SOV_move_capital_to_sverdlovsk
		icon = GFX_goal_plan
		prerequisite = { focus = SOV_move_industry_to_the_urals }
		prerequisite = { focus = SOV_the_defense_of_moscow  }
		x = 0
		y = 1

		relative_position_id = SOV_the_defense_of_moscow
		cost = 5
		ai_will_do = {
			factor = 5
			modifier = {
				factor = 0
				NOT = { has_war_with = GER }
			}
		}

		available = {
			SOV = { surrender_progress > 0.4 }
			219 = {
				NOT = {
					is_controlled_by = ROOT
				}
			}
			653 = {
				is_owned_and_controlled_by = SOV
			}
		}

		completion_reward = {
			army_experience = 10
			custom_effect_tooltip = SOV_move_capital_to_sverdlovsk_effect
			add_victory_points = {
				province = 1821
				value = 15    
			}			
			custom_effect_tooltip = SOV_defense_divisions_4
			hidden_effect = {
				set_capital = { state = 653 }				
				653 = {
					add_building_construction = {	#new supply source, so they don't struggle
						type = infrastructure
						level = 2
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 4
						province = 1821
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 3
						province = 10133
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 3
						province = 12567
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 1
						province = 9553
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 1
						province = 307
						instant_build = yes
					}
					create_unit = {
						division = "name = \"1ya Vspomogatel'nyye sily oborony Sverdlovsk\" division_template = \"Vspomogatel'nyye Sily Oborony\" start_experience_factor = 0.1 start_equipment_factor = 0.75 force_equipment_variants = { infantry_equipment_1 = { owner = SOV } }" 
						owner = SOV
					}
					create_unit = {
						division = "name = \"2ya Vspomogatel'nyye sily oborony Sverdlovsk\" division_template = \"Vspomogatel'nyye Sily Oborony\" start_experience_factor = 0.1 start_equipment_factor = 0.75 force_equipment_variants = { infantry_equipment_1 = { owner = SOV } }" 
						owner = SOV
					}
					create_unit = {
						division = "name = \"3ya Vspomogatel'nyye sily oborony Sverdlovsk\" division_template = \"Vspomogatel'nyye Sily Oborony\" start_experience_factor = 0.1 start_equipment_factor = 0.75 force_equipment_variants = { infantry_equipment_1 = { owner = SOV } }" 
						owner = SOV
					}
					create_unit = {
						division = "name = \"1ya Sverdlovsk Vspomogatel'naya bronetankovaya sila\" division_template = \"Vspomogatel'naya Bronetankovaya Sila\" start_experience_factor = 0 start_equipment_factor = 0.6 force_equipment_variants = { infantry_equipment_1 = { owner = SOV } }" 
						owner = SOV
					}
					add_extra_state_shared_building_slots = 4
					set_state_flag = SOV_capital_moved_1
				}
			}
			hidden_effect = { #Soviet AI bailout
				if = {
					limit = {
						difficulty > 1
						SOV = {
							is_ai = yes
						}
						GER = {
							is_ai = yes
						}
					}
					add_offsite_building = {
						type = arms_factory level = 3
					}
					add_equipment_to_stockpile = {
						type = infantry_equipment
						amount = 2000
						producer = SOV
					}
				}
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY FOCUS_FILTER_MANPOWER }
	}

	focus = {
		id = SOV_far_east_fortification
		icon = GFX_goal_fortify_the_westwall
		prerequisite = { focus = SOV_move_industry_to_the_urals }
		prerequisite = { focus = SOV_move_capital_to_sverdlovsk }
		x = -1
		y = 1
		relative_position_id = SOV_move_capital_to_sverdlovsk
		cost = 10

		completion_reward = {
			563 = { #CHITA
				if = {
					limit = { is_controlled_by = ROOT }
					custom_effect_tooltip = SOV_far_east_fortification_forts_4
					hidden_effect = {
						add_building_construction = {
							type = bunker
							level = 1
							province = {
								id = 4719
								id = 12622
							}
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 2
							province = {
								id = 10559
							}
							instant_build = yes
						}
					}
				}
			}
			561 = { #AMUR
				if = {
					limit = { is_controlled_by = ROOT }
					custom_effect_tooltip = SOV_far_east_fortification_forts_4
					hidden_effect = {
						add_building_construction = {
							type = bunker
							level = 1
							province = {
								id = 12543
								id = 7851
								id = 10678
							}
							instant_build = yes
						}
						add_building_construction = { #Set like this for stupid tooltip purposes
							type = bunker
							level = 1
							province = {
								id = 12657
							}
							instant_build = yes
						}
					}
				}
			}
			657 = { #BIROBIDZHAN
				if = {
					limit = { is_controlled_by = ROOT }
					custom_effect_tooltip = SOV_far_east_fortification_forts_10
					hidden_effect = {
						add_building_construction = {
							type = bunker
							level = 1
							province = {
								id = 10655
								id = 7801
								id = 10722
								id = 7672
							}
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 2
							province = {
								id = 7763
								id = 4725
								id = 4805
							}
							instant_build = yes
						}
					}
				}
			}
			409 = { #KHABAROVSK
				if = {
					limit = { is_controlled_by = ROOT }
					custom_effect_tooltip = SOV_far_east_fortification_forts_4
					hidden_effect = {
						add_building_construction = {
							type = bunker
							level = 2
							province = {
								id = 12189
							}
							instant_build = yes
						}
						add_building_construction = {  #Set like this for stupid tooltip purposes
							type = bunker
							level = 2
							province = {
								id = 10466
							}
							instant_build = yes
						}
					}
				}
			}
			408 = { #VLADIVOSTOK
				if = {
					limit = { is_controlled_by = ROOT }
					custom_effect_tooltip = SOV_far_east_fortification_forts_10
					hidden_effect = {
						add_building_construction = {
							type = bunker
							level = 1
							province = {
								id = 11643
								id = 6686
								id = 664
								id = 6684
								id = 3787
								id = 6838
							}
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 2
							province = {
								id = 3977
								id = 957
							}
							instant_build = yes
						}
					}
				}
			}
			# Other possible Provinces
			#11879 (Border Conflict with Japan) 1755 (North Sakhalin)
		}
	}

	focus = {
		id = SOV_impregnable_forts
		icon = GFX_goal_generic_fortify_city
		prerequisite = { focus = SOV_improve_the_stalin_line focus = SOV_the_molotov_line }
		x = 1
		y = 1
		relative_position_id = SOV_improve_the_stalin_line
		cost = 10

		completion_reward = {
			if = {
				limit = {
					has_full_control_of_state = 195 #LENINGRAD
				}
				195 = { #LENINGRAD
					add_building_construction = {
						type = anti_air_building
						level = 1
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 3
						province = {
							id = 3151
							id = 6174
						}
						instant_build = yes
					}
					add_building_construction = {
						type = coastal_bunker
						level = 3
						province = {
							id = 3151
							id = 6174
						}
						instant_build = yes
					}
					add_dynamic_modifier = { modifier = SOV_krasnaya_gorka_battery scope = SOV }
				}
			}
			if = {
				limit = {
					has_full_control_of_state = 208 #LUGA
				}
				208 = { #LUGA
					add_building_construction = {
						type = anti_air_building
						level = 1
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 3
						province = 9097
						instant_build = yes
					}
					add_building_construction = {
						type = coastal_bunker
						level = 3
						province = 9097
						instant_build = yes
					}
					add_dynamic_modifier = { modifier = SOV_seraya_loshad_battery scope = SOV }
				}
			}

			if = {
				limit = {
					has_full_control_of_state = 137 #CRIMEA
				}
				137 = { #CRIMEA
					add_building_construction = {
						type = anti_air_building
						level = 1
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 3
						province = 3686
						instant_build = yes
					}
					add_building_construction = {
						type = coastal_bunker
						level = 3
						province = 3686
						instant_build = yes
					}
					add_dynamic_modifier = { modifier = SOV_armored_battery_35 scope = SOV }
				}
			}
		}
	}

	
	focus = {
		id = SOV_defense_of_stalingrad
		icon = GFX_goal_generic_construct_military
		prerequisite = { focus = SOV_impregnable_forts }
		available = {
			217 = {
				is_controlled_by = ROOT
				OR = {
					SOV = { surrender_progress > 0.15 }
					any_neighbor_state = {
						NOT = { is_controlled_by = ROOT }
					}
				}
			}
		}
		bypass = {
			NOT = { 217 = { is_owned_and_controlled_by = ROOT } }
		}
		x = 0
		y = 1
		relative_position_id = SOV_impregnable_forts
		cost = 5
		ai_will_do = {
			factor = 4 #high importance
			modifier = {
				217 = {
					any_neighbor_state = {
						NOT = { is_controlled_by = ROOT }
					}
				}
				factor = 3 #more natural barriers
			}
		}

		completion_reward = {
			army_experience = 10
			217 = {
				custom_effect_tooltip = SOV_defense_of_stalingrad_forts
				custom_effect_tooltip = SOV_defense_divisions		
				hidden_effect = {
					create_unit = {
						division = "name = \"1ya Vspomogatel'nyye sily oborony Stalingradskaya\" division_template = \"Vspomogatel'nyye Sily Oborony\" start_experience_factor = 0.1 start_equipment_factor = 0.75 force_equipment_variants = { infantry_equipment_1 = { owner = SOV } }" 
						owner = SOV
					}
					create_unit = {
						division = "name = \"2ya Vspomogatel'nyye sily oborony Stalingradskaya\" division_template = \"Vspomogatel'nyye Sily Oborony\" start_experience_factor = 0.1 start_equipment_factor = 0.75 force_equipment_variants = { infantry_equipment_1 = { owner = SOV } }" 
						owner = SOV
					}
					create_unit = {
						division = "name = \"3ya Vspomogatel'nyye sily oborony Stalingradskaya\" division_template = \"Vspomogatel'nyye Sily Oborony\" start_experience_factor = 0.1 start_equipment_factor = 0.75 force_equipment_variants = { infantry_equipment_1 = { owner = SOV } }" 
						owner = SOV
					}
					create_unit = {
						division = "name = \"4ya Vspomogatel'nyye sily oborony Stalingradskaya\" division_template = \"Vspomogatel'nyye Sily Oborony\" start_experience_factor = 0.1 start_equipment_factor = 0.75 force_equipment_variants = { infantry_equipment_1 = { owner = SOV } }" 
						owner = SOV
					}
					create_unit = {
						division = "name = \"5ya Vspomogatel'nyye sily oborony Stalingradskaya\" division_template = \"Vspomogatel'nyye Sily Oborony\" start_experience_factor = 0.1 start_equipment_factor = 0.75 force_equipment_variants = { infantry_equipment_1 = { owner = SOV } }" 
						owner = SOV
					}
					create_unit = {
						division = "name = \"6ya Vspomogatel'nyye sily oborony Stalingradskaya\" division_template = \"Vspomogatel'nyye Sily Oborony\" start_experience_factor = 0.1 start_equipment_factor = 0.75 force_equipment_variants = { infantry_equipment_1 = { owner = SOV } }" 
						owner = SOV
					}
					create_unit = {
						division = "name = \"7ya Vspomogatel'nyye sily oborony Stalingradskaya\" division_template = \"Vspomogatel'nyye Sily Oborony\" start_experience_factor = 0.1 start_equipment_factor = 0.75 force_equipment_variants = { infantry_equipment_1 = { owner = SOV } }" 
						owner = SOV
					}
					create_unit = {
						division = "name = \"1ya Stalingradskaya Vspomogatel'naya bronetankovaya sila\" division_template = \"Vspomogatel'naya Bronetankovaya Sila\" start_experience_factor = 0 start_equipment_factor = 0.6 force_equipment_variants = { infantry_equipment_1 = { owner = SOV } }" 
						owner = SOV
					}
					add_building_construction = {
						type = bunker
						level = 3
						province = 9501
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 3
						province = 3555
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 3
						province = 11484
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 3
						province = 11474
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 3
						province = 498
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 3
						province = 6527
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 3
						province = 9504
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 4
						province = 3529
						instant_build = yes
					}
					add_building_construction = {
						type = anti_air_building
						level = 2
						instant_build = yes
					}
				}
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}

	focus = {
		id = SOV_protect_the_white_sea_baltic_canal
		icon = GFX_focus_generic_provoke_border_clashes
		prerequisite = { focus = SOV_the_molotov_line focus = SOV_improve_the_stalin_line }
		x = -1
		y = 1
		relative_position_id = SOV_improve_the_stalin_line
		cost = 5

		completion_reward = {
			if = {
				limit = {
					has_full_control_of_state = 215 #ONEGA
				}
				215 = { #ONEGA
					add_building_construction = {
						type = anti_air_building
						level = 1
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 1
						province = {
							id = 9045
							id = 3078
							id = 11212
						}
						instant_build = yes
					}
					add_building_construction = {
						type = coastal_bunker
						level = 1
						province = 9045
						instant_build = yes
					}
				}
			}
			if = {
				limit = {
					has_full_control_of_state = 216 #OLONETS
				}
				216 = { #OLONETS
					add_building_construction = {
						type = anti_air_building
						level = 1
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 1
						province = {
							id = 92
							id = 11092
						}
						instant_build = yes
					}
				}
			}
			if = {
				limit = {
					has_full_control_of_state = 264 #TIKHVIN
				}
				264 = { #TIKHVIN
					add_building_construction = {
						type = anti_air_building
						level = 1
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 1
						province = {
							id = 9082
							id = 9190
							id = 11059
						}
						instant_build = yes
					}
				}
			}
			if = {
				limit = {
					has_full_control_of_state = 195 #LENINGRAD
				}
				195 = { #LENINGRAD
					add_building_construction = {
						type = anti_air_building
						level = 1
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 1
						province = {
							id = 149
							id = 11068
							id = 79
						}
						instant_build = yes
					}
				}
			}
		}
	}

	focus = {
		id = SOV_defense_of_leningrad
		icon = GFX_focus_generic_coastal_fort
		prerequisite = { focus = SOV_protect_the_white_sea_baltic_canal }
		available = {
			195 = {
				is_controlled_by = ROOT
				OR = {
					SOV = { surrender_progress > 0.15 }
					any_neighbor_state = {
						NOT = { is_controlled_by = ROOT }
					}
				}
			}
		}
		bypass = {
			NOT = { 195 = { is_owned_and_controlled_by = ROOT } }
		}
		x = 0
		y = 1
		relative_position_id = SOV_protect_the_white_sea_baltic_canal
		cost = 5
		ai_will_do = {
			factor = 3 #slightly lower importance
			modifier = {
				195 = {
					any_neighbor_state = {
						NOT = { is_controlled_by = ROOT }
					}
				}
				factor = 4 #but less barriers
			}
		}

		completion_reward = {
			army_experience = 10
			195 = {
				custom_effect_tooltip = SOV_defense_of_leningrad_forts
				custom_effect_tooltip = SOV_defense_divisions
				hidden_effect = {
					create_unit = {
						division = "name = \"1ya Vspomogatel'nyye sily oborony Leningradskaya\" division_template = \"Vspomogatel'nyye Sily Oborony\" start_experience_factor = 0.1 start_equipment_factor = 0.75 force_equipment_variants = { infantry_equipment_1 = { owner = SOV } }" 
						owner = SOV
					}
					create_unit = {
						division = "name = \"2ya Vspomogatel'nyye sily oborony Leningradskaya\" division_template = \"Vspomogatel'nyye Sily Oborony\" start_experience_factor = 0.1 start_equipment_factor = 0.75 force_equipment_variants = { infantry_equipment_1 = { owner = SOV } }" 
						owner = SOV
					}
					create_unit = {
						division = "name = \"3ya Vspomogatel'nyye sily oborony Leningradskaya\" division_template = \"Vspomogatel'nyye Sily Oborony\" start_experience_factor = 0.1 start_equipment_factor = 0.75 force_equipment_variants = { infantry_equipment_1 = { owner = SOV } }" 
						owner = SOV
					}
					create_unit = {
						division = "name = \"4ya Vspomogatel'nyye sily oborony Leningradskaya\" division_template = \"Vspomogatel'nyye Sily Oborony\" start_experience_factor = 0.1 start_equipment_factor = 0.75 force_equipment_variants = { infantry_equipment_1 = { owner = SOV } }" 
						owner = SOV
					}
					create_unit = {
						division = "name = \"5ya Vspomogatel'nyye sily oborony Leningradskaya\" division_template = \"Vspomogatel'nyye Sily Oborony\" start_experience_factor = 0.1 start_equipment_factor = 0.75 force_equipment_variants = { infantry_equipment_1 = { owner = SOV } }" 
						owner = SOV
					}
					create_unit = {
						division = "name = \"6ya Vspomogatel'nyye sily oborony Leningradskaya\" division_template = \"Vspomogatel'nyye Sily Oborony\" start_experience_factor = 0.1 start_equipment_factor = 0.75 force_equipment_variants = { infantry_equipment_1 = { owner = SOV } }" 
						owner = SOV
					}
					create_unit = {
						division = "name = \"7ya Vspomogatel'nyye sily oborony Leningradskaya\" division_template = \"Vspomogatel'nyye Sily Oborony\" start_experience_factor = 0.1 start_equipment_factor = 0.75 force_equipment_variants = { infantry_equipment_1 = { owner = SOV } }" 
						owner = SOV
					}
					create_unit = {
						division = "name = \"1ya Leningradskaya Vspomogatel'naya bronetankovaya sila\" division_template = \"Vspomogatel'naya Bronetankovaya Sila\" start_experience_factor = 0 start_equipment_factor = 0.6 force_equipment_variants = { infantry_equipment_1 = { owner = SOV } }" 
						owner = SOV
					}
					add_building_construction = {
						type = bunker
						level = 2
						province = 6174
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 2
						province = 79
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 2
						province = 11068
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 4
						province = 149
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 4
						province = 3151
						instant_build = yes
					}
					add_building_construction = {
						type = anti_air_building
						level = 2
						instant_build = yes
					}
				}
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY FOCUS_FILTER_MANPOWER }
	}

	focus = {
		id = SOV_the_road_of_life
		icon = GFX_focus_SOV_the_road_of_life
		prerequisite = { focus = SOV_the_defense_of_moscow focus = SOV_defense_of_leningrad }
		x = -1
		y = 1
		relative_position_id = SOV_defense_of_leningrad
		cost = 5

		available = {
			OR = {
				195 = { #LENINGRAD
					is_controlled_by = ROOT
					any_neighbor_state = {
						is_owned_by = ROOT
						NOT = { is_fully_controlled_by = ROOT }
					}
				}
				219 = { #MOSCOW
					is_controlled_by = ROOT
					any_neighbor_state = {
						is_owned_by = ROOT
						NOT = { is_fully_controlled_by = ROOT }
					}
				}
				217 = { #STALINGRAD
					is_controlled_by = ROOT
					any_neighbor_state = {
						is_owned_by = ROOT
						NOT = { is_fully_controlled_by = ROOT }
					}
				}
				137 = { #SEVASTOPOL
					is_controlled_by = ROOT
					any_neighbor_state = {
						is_owned_by = ROOT
						NOT = { is_fully_controlled_by = ROOT }
					}
				}
				202 = { #Kiev
					is_controlled_by = ROOT
					any_neighbor_state = {
						is_owned_by = ROOT
						NOT = { is_fully_controlled_by = ROOT }
					}
				}
			}
		}

		completion_reward = {
			add_timed_idea = {
				idea = SOV_the_road_of_life_ns
				days = 730
			}
		}
	}

	focus = {
		id = SOV_restore_cossack_units
		icon = GFX_focus_SOV_restore_cossack_units
		prerequisite = { focus = SOV_strengthen_the_mobilization_plan }
		x = -1
		y = 1
		relative_position_id = SOV_strengthen_the_mobilization_plan
		cost = 5

		mutually_exclusive = { focus = SOV_cohesion_first }

		completion_reward = {
			add_to_variable = { SOV_the_red_army_modifier_army_sub_unit_cavalry_speed_factor = 0.05 }
			add_to_variable = { SOV_the_red_army_cavalry_attack_factor = 0.05 }
			custom_effect_tooltip = SOV_restore_cossack_units_ns_tt

			show_unit_leaders_tooltip = SOV_lev_dovator

			#Spawn Cossack divisions
			custom_effect_tooltip = SOV_restore_cossack_units_spawn_tt
			hidden_effect = {
				division_template = {
					name = "Kazachya Kavaleryskaya Diviziya"
					division_names_group = SOV_CAV_02

					regiments = {
						cavalry = { x = 0 y = 0 }
						cavalry = { x = 0 y = 1 }
						cavalry = { x = 1 y = 0 }
						cavalry = { x = 1 y = 1 }
						mot_artillery_brigade = { x = 2 y = 0 }
						light_armor = { x = 3 y = 0 }
					}
					support = {
						engineer = { x = 0 y = 0 }
						artillery = { x = 0 y = 1 }
						recon = { x = 0 y = 2 }
					}
				}

				capital_scope = {
					#Cossack Cavalry
					create_unit = { 
						division = "name = \"4ya Donskaya Kazachya Kav. Div.\" division_template = \"Kazachya Kavaleryskaya Diviziya\" start_experience_factor = 0.8 start_equipment_factor = 1.0" owner = ROOT
					}
					create_unit = { 
						division = "name = \"6ya Kubansko-Terskaya Kazachya Kav. Div.\" division_template = \"Kazachya Kavaleryskaya Diviziya\" start_experience_factor = 0.8 start_equipment_factor = 1.0" owner = ROOT
					}
					create_unit = { 
						division = "name = \"10ya Tersko-Stavropolskaya Kazachya Kav. Div\" division_template = \"Kazachya Kavaleryskaya Diviziya\" start_experience_factor = 0.8 start_equipment_factor = 1.0" owner = ROOT
					}
					create_unit = { 
						division = "name = \"12ya Kubanskaya Kazachya Kav. Div.\" division_template = \"Kazachya Kavaleryskaya Diviziya\" start_experience_factor = 0.8 start_equipment_factor = 1.0" owner = ROOT
					}

					#Cossack Infantry
					create_unit = {
						division = "name = \"13ya Donskaya Kazachya Div.\" division_template = \"Strelkovaya Diviziya\" start_experience_factor = 0.7 start_equipment_factor = 1.0" owner = ROOT
					}
				}
			}
		}
	}

	focus = {
		id = SOV_cohesion_first
		icon = GFX_focus_secret_rearmament
		prerequisite = { focus = SOV_strengthen_the_mobilization_plan }
		x = 1
		y = 1
		relative_position_id = SOV_strengthen_the_mobilization_plan
		cost = 5

		mutually_exclusive = { focus = SOV_restore_cossack_units }

		available = {
		}

		completion_reward = {
			add_to_variable = { SOV_the_red_army_army_org_factor = 0.05 }
			add_to_variable = { SOV_the_red_army_training_time_factor = 0.1 }
			custom_effect_tooltip = SOV_cohesion_first_ns_tt
		}
	}

	focus = {
		id = SOV_rehabilitated_military
		icon = GFX_goal_generic_small_arms
		prerequisite = { focus = SOV_restore_cossack_units focus = SOV_cohesion_first }
		x = 0
		y = 2
		relative_position_id = SOV_strengthen_the_mobilization_plan
		cost = 10

		available = {
			NOT = { has_country_flag = SOV_paranoia_system_active_flag }
		}

		completion_reward = {
			add_to_variable = { SOV_the_red_army_army_org_factor = 0.05 }
			custom_effect_tooltip = SOV_rehabilitated_military_ns_tt

			add_ideas = SOV_rehabilitated_military_ns
		}
	}

	focus = {
		id = SOV_military_reorganization
		icon = GFX_focus_generic_military_mission
		prerequisite = { focus = SOV_rehabilitated_military }
		x = 0
		y = 2
		relative_position_id = SOV_rehabilitated_military
		cost = 10

		select_effect = {
			add_ideas = SOV_military_reorganization_ns
		}
		
		search_filters = {FOCUS_FILTER_ARMY_XP}

		completion_reward = {
			#Tooltip purposes (Select Effect)
			custom_effect_tooltip = SOV_focus_select_effect_tt
			effect_tooltip = {
				add_ideas = SOV_military_reorganization_ns
			}

			#(Complete Effect)
			custom_effect_tooltip = SOV_focus_complete_effect_tt
			hidden_effect = {
				remove_ideas = SOV_military_reorganization_ns
			}

			add_to_variable = { SOV_the_red_army_unit_infantry_design_cost_factor = -0.1 }
			add_to_variable = { SOV_the_red_army_unit_artillery_brigade_design_cost_factor = -0.1 }
			custom_effect_tooltip = SOV_military_reorganization_ns_tt

			army_experience = 50
			add_command_power = 25
		}
	}

	focus = {
		id = SOV_desperate_measures
		icon = GFX_goal_manpower
		prerequisite = { focus = SOV_strengthen_the_mobilization_plan }
		x = 3
		y = 2
		relative_position_id = SOV_strengthen_the_mobilization_plan
		cost = 5

		available = {
			any_enemy_country = {
				SOV_is_major_not_original_sov = yes
			}
		}

		completion_reward = {
			add_timed_idea = {
				idea = SOV_desperate_measures_ns
				days = 365
			}

			custom_effect_tooltip = SOV_desperate_measures_decisions_unlocked_tt
		}
	}

	focus = {
		id = SOV_an_adaptable_army
		icon = GFX_focus_prc_infiltration
		prerequisite = { focus = SOV_rehabilitated_military }
		prerequisite = { focus = SOV_desperate_measures }
		x = 1
		y = 1
		relative_position_id = SOV_rehabilitated_military
		cost = 10

		completion_reward = {
			add_to_variable = { SOV_the_red_army_heat_attrition_factor = -0.1 }
			add_to_variable = { SOV_the_red_army_winter_attrition_factor = -0.1 }
			add_to_variable = { SOV_the_red_army_acclimatization_cold_climate_gain_factor = 0.15 }
			add_to_variable = { SOV_the_red_army_acclimatization_hot_climate_gain_factor = 0.15 }
			add_to_variable = { SOV_the_red_army_terrain_penalty_reduction = 0.05 }
			custom_effect_tooltip = SOV_an_adaptable_army_ns_tt
		}
	}

	focus = {
		id = SOV_lessons_of_war
		icon = GFX_goal_generic_army_elite
		prerequisite = { focus = SOV_rehabilitated_military }
		prerequisite = { focus = SOV_desperate_measures }
		x = 0
		y = 1
		relative_position_id = SOV_desperate_measures
		cost = 5

		available = {
			NOT = { has_idea = SOV_desperate_measures_ns }
		}
		
		search_filters = {FOCUS_FILTER_ARMY_XP}

		completion_reward = {
			remove_ideas = { SOV_army_purge}
			add_to_variable = { SOV_the_red_army_army_org_factor = 0.05 }
			set_variable = { SOV_the_red_army_experience_gain_army_factor = 0 }
			set_variable = { SOV_the_red_army_experience_loss_factor = 0 }

			custom_effect_tooltip = SOV_lessons_of_war_ns_tt

			unlock_decision_tooltip = SOV_order_227
			custom_effect_tooltip = SOV_lessons_of_war_unlock_military_operations_tt

			custom_effect_tooltip = SOV_lessons_of_war_cowed_trait_tt
			hidden_effect = {
				every_army_leader = {
					limit = {
						has_trait = trait_SOV_cowed_by_stalin_army
					}
					remove_unit_leader_trait =  trait_SOV_cowed_by_stalin_army
				}
				every_navy_leader = {
					limit = {
						has_trait = trait_SOV_cowed_by_stalin_navy
					}
					remove_unit_leader_trait =  trait_SOV_cowed_by_stalin_navy
				}
			}
		}
	}

	focus = {
		id = SOV_penal_battalions
		icon = GFX_focus_SOV_penal_battalions
		prerequisite = { focus = SOV_desperate_measures }
		x = 2
		y = 1
		relative_position_id = SOV_desperate_measures
		cost = 5

		available = {
			has_war = yes
		}

		completion_reward = {
			#Spawn Penal divisions
			custom_effect_tooltip = SOV_penal_battalions_spawn_tt
			hidden_effect = {
				set_technology = { penal_infantry = 1 popup = no }

				division_template = {
					name = "Shtrafnaya Chast"
					division_names_group = SOV_PEN_01
					is_locked = yes

					regiments = {
						penal_battalion = { x = 0 y = 0 }
						penal_battalion = { x = 0 y = 1 }
						penal_battalion = { x = 0 y = 2 }
						penal_battalion = { x = 1 y = 0 }
						penal_battalion = { x = 1 y = 1 }
						penal_battalion = { x = 1 y = 2 }
						penal_battalion = { x = 2 y = 0 }
						penal_battalion = { x = 2 y = 1 }
						penal_battalion = { x = 2 y = 2 }
					}
					support = {
						artillery = { x = 0 y = 0 }
					}
				}

				SOV_spawn_penal_divisions_effect = yes
			}
		}
	}

	focus = {
		id = SOV_organization_of_the_partisans
		icon = GFX_focus_focus_fra_maquis
		prerequisite = { focus = SOV_lessons_of_war }
		x = -1
		y = 1
		relative_position_id = SOV_lessons_of_war
		cost = 10

		available = {
			any_owned_state = {
				controller = {
					has_war_with = ROOT
				}
			}
		}
		
		search_filters = {FOCUS_FILTER_PROPAGANDA}

		completion_reward = {
			add_to_variable = { SOV_the_red_army_operative_slot  = 1 }
			custom_effect_tooltip = SOV_organization_of_the_partisans_ns_tt

			if = {
				limit = {
					has_government = communism
				}
				show_unit_leaders_tooltip = SOV_vasily_korzh
				show_unit_leaders_tooltip = SOV_sidor_kovpak
			}

			if = {
				limit = {
					has_dlc = "La Resistance"
				}
				if = {
					limit = {
						has_government = communism
					}
					create_operative_leader = {
						name = "Dmitry Medvedev"
						GFX = GFX_Portrait_dmitry_medvedev
						female = yes
						traits = { operative_demolition_expert operative_commando }
						bypass_recruitment = no
						available_to_spy_master = yes
						nationalities = { SOV }
					}
				}

				add_timed_idea = {
					idea = SOV_central_headquarters_of_the_partisan_movement
					days = 720
				}
			}
			else = {
				add_timed_idea = {
					idea = SOV_central_headquarters_of_the_partisan_movement_no_lar
					days = 720
				}
			}

			if = {
				limit = {
					has_government = communism
				}
				custom_effect_tooltip = unlock_propaganda_campaign_tt
				unlock_decision_tooltip = SOV_propaganda_glory_to_partisans
				unlock_decision_tooltip = SOV_propaganda_death_to_invaders
				custom_effect_tooltip = propaganda_campaign_requirement_tt
			}
		}
	}
	focus = {
		id = SOV_smersh
		icon = GFX_goal_CAN_CAMP_X
		prerequisite = { focus = SOV_lessons_of_war }
		x = 2
		y = 1
		relative_position_id = SOV_lessons_of_war
		cost = 10
		
		search_filters = {FOCUS_FILTER_PROPAGANDA FOCUS_FILTER_ESPIONAGE }

		completion_reward = {
			if = {
				limit = {
					has_dlc = "La Resistance"
				}
				add_ideas = SOV_smersh
			}
			else = {
				add_ideas = SOV_smersh_no_lar
			}

			if = {
				limit = {
					has_government = communism
				}
				custom_effect_tooltip = unlock_propaganda_campaign_tt
				unlock_decision_tooltip = SOV_propaganda_treacherous_enemy
				unlock_decision_tooltip = SOV_propaganda_do_not_blab
				custom_effect_tooltip = propaganda_campaign_requirement_tt
			}
		}
	}

	focus = {
		id = SOV_barrier_troops
		icon = GFX_focus_generic_manpower
		prerequisite = { focus = SOV_smersh }
		x = 0
		y = 1
		relative_position_id = SOV_smersh
		cost = 5

		completion_reward = {
			add_to_variable = { SOV_the_red_army_army_org_regain = 0.1 }
			custom_effect_tooltip = SOV_barrier_troops_ns_tt
		}
	}

	focus = {
		id = SOV_partisan_suppression
		icon = GFX_goal_crush_resistance
		prerequisite = { focus = SOV_barrier_troops }
		x = 0
		y = 1
		relative_position_id = SOV_barrier_troops
		cost = 10
		ai_will_do = {
			factor = 10
		}

		available_if_capitulated = yes

		completion_reward = {
			add_ideas = partisan_suppression_focus
			add_tech_bonus = {
				name = mp_tech_bonus_name
				bonus = 1
				uses = 1
				category = military_police_tech
			}		
		}
	}

	focus = {
		id = SOV_experts_in_camouflage
		icon = GFX_goal_infantry_flames
		prerequisite = { focus = SOV_military_reorganization }
		x = -1
		y = 1
		relative_position_id = SOV_military_reorganization
		cost = 5

		completion_reward = {
			add_to_variable = { SOV_the_red_army_cas_damage_reduction = 0.05 }
			add_to_variable = { SOV_the_red_army_max_dig_in = 5 }
			add_to_variable = { SOV_the_red_army_dig_in_speed_factor = 0.05 }
			custom_effect_tooltip = SOV_experts_in_camouflage_ns_tt
		}
	}

	focus = {
		id = SOV_keep_commissars_organization
		icon = GFX_goal_red_army
		prerequisite = { focus = SOV_military_reorganization }
		prerequisite = { focus = SOV_lessons_of_war }
		x = 1
		y = 1
		relative_position_id = SOV_military_reorganization
		cost = 10

		mutually_exclusive = { focus = SOV_swap_to_political_advisors }

		allow_branch = {
			NOT = {
				has_government = fascism
				has_government = neutrality
			}
		}

		bypass = {
			has_completed_focus = SOV_depoliticize_the_military
		}

		completion_reward = {
			if = {
				limit = {
					has_idea = SOV_politicized_military
				}
				swap_ideas = {
					remove_idea = SOV_politicized_military
					add_idea = SOV_politicized_military_keep
				}
			}
			else_if = {
				limit = {
					has_idea = SOV_politicized_military_humanism
				}
				swap_ideas = {
					remove_idea = SOV_politicized_military_humanism
					add_idea = SOV_politicized_military_keep_humanism
				}
			}
		}
	}

	focus = {
		id = SOV_adjoined_battle_priests
		icon = GFX_focus_GRE_an_orthodox_state
		prerequisite = { focus = SOV_military_reorganization }
		prerequisite = { focus = SOV_lessons_of_war }
		x = 1
		y = 1
		relative_position_id = SOV_military_reorganization
		cost = 10

		mutually_exclusive = { focus = SOV_swap_to_political_advisors }

		allow_branch = {
			OR = {
				has_government = fascism
				has_government = neutrality
			}
		}

		available = {
			has_completed_focus = SOV_church_candidates
		}

		bypass = {
			has_completed_focus = SOV_depoliticize_the_military
			has_completed_focus = SOV_socialist_humanism
		}

		completion_reward = {
			if = {
				limit = {
					has_idea = SOV_politicized_military
				}
				swap_ideas = {
					remove_idea = SOV_politicized_military
					add_idea = SOV_politicized_military_battle_priests
				}
			}
			else_if = { #Just in case weird shit happens
				limit = {
					has_idea = SOV_politicized_military_humanism
				}
				swap_ideas = {
					remove_idea = SOV_politicized_military_humanism
					add_idea = SOV_politicized_military_battle_priests
				}
			}
		}
	}

	focus = {
		id = SOV_swap_to_political_advisors
		icon = GFX_postive_heroism
		prerequisite = { focus = SOV_military_reorganization }
		prerequisite = { focus = SOV_lessons_of_war }
		x = 3
		y = 1
		relative_position_id = SOV_military_reorganization
		cost = 10

		mutually_exclusive = { focus = SOV_keep_commissars_organization focus = SOV_adjoined_battle_priests }

		bypass = {
			has_completed_focus = SOV_depoliticize_the_military
		}
		
		search_filters = {FOCUS_FILTER_ARMY_XP}

		completion_reward = {
			if = {
				limit = {
					has_idea = SOV_politicized_military
				}
				swap_ideas = {
					remove_idea = SOV_politicized_military
					add_idea = SOV_politicized_military_swap
				}
			}
			else_if = {
				limit = {
					has_idea = SOV_politicized_military_humanism
				}
				swap_ideas = {
					remove_idea = SOV_politicized_military_humanism
					add_idea = SOV_politicized_military_swap_humanism
				}
			}
			else = { #To prevent the ugly "No current effects" tooltip if other focus taken
				effect_tooltip = {
					swap_ideas = {
						remove_idea = SOV_politicized_military
						add_idea = SOV_politicized_military_swap
					}
				}
			}
		}
	}

	focus = {
		id = SOV_the_glory_of_the_red_army
		icon = GFX_focus_SOV_the_glory_of_the_red_army_communism
		prerequisite = { focus = SOV_keep_commissars_organization focus = SOV_swap_to_political_advisors focus = SOV_adjoined_battle_priests }
		x = 1
		y = 1
		relative_position_id = SOV_keep_commissars_organization
		cost = 10

		allow_branch = {
			NOT = {
				has_government = fascism
				has_government = neutrality
			}
		}

		available = {
			any_enemy_country = {
				SOV_is_major_not_original_sov = yes
			}
			surrender_progress < 0.05
		}
		
		search_filters = {FOCUS_FILTER_ARMY_XP}

		completion_reward = {
			add_to_variable = { SOV_the_red_army_special_forces_cap = 0.1 }
			add_to_variable = { SOV_the_red_army_land_doctrine_cost_factor = -0.1 }
			custom_effect_tooltip = SOV_the_glory_of_the_red_army_ns_tt

			army_experience = 75
			
			show_unit_leaders_tooltip = SOV_pavel_rybalko
			
			#New
			hidden_effect = {
				set_technology = { masterful_blitz = 1 popup = no }
			}
			custom_effect_tooltip = SOV_the_glory_of_the_red_army_masterful_blitz_tactic_tt
		}
	}

	focus = {
		id = SOV_the_glory_of_the_red_army_alt
		icon = GFX_focus_SOV_the_glory_of_the_red_army_alternative
		prerequisite = { focus = SOV_keep_commissars_organization focus = SOV_swap_to_political_advisors focus = SOV_adjoined_battle_priests }
		x = 1
		y = 1
		relative_position_id = SOV_keep_commissars_organization
		cost = 10

		allow_branch = {
			OR = {
				has_government = fascism
				has_government = neutrality
			}
		}

		available = {
			any_enemy_country = {
				SOV_is_major_not_original_sov = yes
			}
			surrender_progress < 0.05
		}
		
		search_filters = {FOCUS_FILTER_ARMY_XP}

		completion_reward = {
			add_to_variable = { SOV_the_red_army_special_forces_cap = 0.1 }
			add_to_variable = { SOV_the_red_army_land_doctrine_cost_factor = -0.1 }
			custom_effect_tooltip = SOV_the_glory_of_the_red_army_ns_tt

			army_experience = 75

			#New
			hidden_effect = {
				set_technology = { masterful_blitz = 1 popup = no }
			}
			custom_effect_tooltip = SOV_the_glory_of_the_red_army_masterful_blitz_tactic_tt
		}
	}




########   #######  ##       #### ######## ####  ######     ###    ##       
##     ## ##     ## ##        ##     ##     ##  ##    ##   ## ##   ##       
##     ## ##     ## ##        ##     ##     ##  ##        ##   ##  ##       
########  ##     ## ##        ##     ##     ##  ##       ##     ## ##       
##        ##     ## ##        ##     ##     ##  ##       ######### ##       
##        ##     ## ##        ##     ##     ##  ##    ## ##     ## ##       
##         #######  ######## ####    ##    ####  ######  ##     ## ######## 



	focus = {
		id = SOV_the_path_of_marxism_leninism
		icon = GFX_focus_SOV_the_path_of_marxism_leninism
		x = 16
		y = 0
		offset = {
			x = -8
			y = 0
			trigger = {
				has_game_rule = {
					rule = obsolete_focus_branches_visibility
					option = HIDE
				}
				has_completed_focus = SOV_beaten_but_not_defeated
			}
		}
		relative_position_id = SOV_strengthen_the_mobilization_plan
		cost = 5

		mutually_exclusive = { focus = SOV_beaten_but_not_defeated }
		mutually_exclusive = { focus = SOV_form_a_fifth_column }

		allow_branch = {
			if = {
				limit = {
					has_game_rule = {
						rule = obsolete_focus_branches_visibility
						option = HIDE
					}
				}
				NOT = { has_completed_focus = SOV_the_hands_do }
				NOT = { has_completed_focus = SOV_form_a_fifth_column }
			}
		}
		
		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_SOV_POLITICAL_PARANOIA}

		completion_reward = {
			add_political_power = 25

			SOV_paranoia_low_decrease_effect = yes
			###### REMOVED DEPENDENCY FOR TESTING#################	
			#IF = {
			#	limit = { has_dlc = "No Step Back"}
			#	mark_focus_tree_layout_dirty = yes
			#}
		}
	}

	focus = {
		id = SOV_the_centre
		icon = GFX_goal_stalin
		prerequisite = { focus = SOV_the_path_of_marxism_leninism }
		x = -8
		y = 1
		offset = {
			x = 8
			y = 1
			trigger = {
				has_game_rule = {
					rule = obsolete_focus_branches_visibility
					option = HIDE
				}
				has_completed_focus = SOV_beaten_but_not_defeated
				NOT = { has_completed_focus = SOV_the_hands_do }
			}
		}
		relative_position_id = SOV_the_path_of_marxism_leninism
		cost = 5

		mutually_exclusive = { focus = SOV_the_right_opposition focus = SOV_the_left_opposition }

		allow_branch = {
			if = {
				limit = {
					has_game_rule = {
						rule = obsolete_focus_branches_visibility
						option = HIDE
					}
				}
				NOT = {
					AND = {
						has_completed_focus = SOV_the_left_opposition
						has_completed_focus = SOV_left_opposition_coup
					}
					AND = {
						has_completed_focus = SOV_the_right_opposition
						has_completed_focus = SOV_coup_detat
					}
					AND = {
						has_completed_focus = SOV_beaten_but_not_defeated
						has_completed_focus = SOV_the_hands_do
					}
					has_completed_focus = SOV_form_a_fifth_column
				}
			}
		}
		
		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_SOV_POLITICAL_PARANOIA FOCUS_FILTER_STABILITY}

		completion_reward = {
			hidden_effect = {
				add_dynamic_modifier = { modifier = SOV_the_politburo_good_dynamic_modifier }
			}
			custom_effect_tooltip = SOV_the_centre_ns_tt

			add_political_power = 25
			add_stability = 0.05
			set_division_template_lock = {
				division_template = "NKVD Pogranichnaya Diviziya"
				is_locked = no
			}

			SOV_paranoia_low_decrease_effect = yes
			mark_focus_tree_layout_dirty = yes
		}
	}

	focus = {
		id = SOV_socialism_in_one_country
		icon = GFX_focus_SOV_socialism_in_one_country
		prerequisite = { focus = SOV_the_centre }
		x = -1
		y = 1
		relative_position_id = SOV_the_centre
		cost = 5
		
		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_SOV_POLITICAL_PARANOIA}

		completion_reward = {
			add_ideas = SOV_socialism_in_one_country_idea
			add_to_variable = { SOV_the_politburo_communism_drift = 0.05 }
			add_to_variable = { SOV_the_politburo_drift_defence_factor = 0.05 } 
			add_to_variable = { SOV_the_politburo_defensive_war_stability_factor = 0.25 } 
			custom_effect_tooltip = SOV_socialism_in_one_country_ns_tt

			add_political_power = 25

			SOV_paranoia_low_decrease_effect = yes
		}
	}

	focus = {
		id = SOV_the_stalin_constitution
		icon = GFX_generic_goal_communist_reforms
		prerequisite = { focus = SOV_the_centre }
		x = 1
		y = 1
		relative_position_id = SOV_the_centre
		cost = 5
		
		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_SOV_POLITICAL_PARANOIA FOCUS_FILTER_STABILITY}

		completion_reward = {
			add_to_variable = { SOV_the_politburo_political_power_factor = 0.05 }
			add_to_variable = { SOV_the_politburo_drift_defence_factor = 0.05 } 
			custom_effect_tooltip = SOV_the_stalin_constitution_ns_tt

			add_political_power = 50
			add_stability = 0.05

			SOV_paranoia_low_decrease_effect = yes
		}
	}

	focus = {
		id = SOV_the_zinovyevite_terrorist_center
		icon = GFX_focus_SOV_purge_zinovyevists
		prerequisite = { focus = SOV_the_stalin_constitution }
		x = 0
		y = 1
		relative_position_id = SOV_the_stalin_constitution
		cost = 5
		
		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_SOV_POLITICAL_PARANOIA}

		select_effect = {
			set_country_flag = SOV_paranoia_do_not_cancel_focus_flag #This focus cannot be canceled
		}

		completion_reward = {
			clr_country_flag = SOV_paranoia_do_not_cancel_focus_flag
			set_country_flag = { flag = SOV_paranoia_random_purge_cooldown_from_focus_flag days = 15 } #Used to prevent random purges from popping up while this is active
			set_country_flag = SOV_first_moscow_trial_flag #Used to unlock the next purge focus

			add_political_power = 25

			SOV_paranoia_high_increase_effect = yes
			
			#HISTORICAL
			#ZHUKOV NO PURGE
			if = {
				limit = {
					has_character = SOV_georgy_zhukov
				}
				SOV_georgy_zhukov = {
					set_character_flag = SOV_safe_from_purge_flag
				}
			}
			else = {
				SOV_add_random_character_to_purge_targets_effect = yes
			}
			#CAPTAIN OF INDUSTRY NO PURGE
			if = {
				limit = {
					has_character = SOV_nikolay_voznesensky
				}
				SOV_nikolay_voznesensky = {
					set_character_flag = SOV_safe_from_purge_flag
				}
			}
			else = {
				SOV_add_random_character_to_purge_targets_effect = yes
			}
			#Zinovyev
			if = {
				limit = {
					has_character = SOV_grigory_zinovyev
				}
				SOV_grigory_zinovyev = {
					set_character_flag = SOV_targeted_for_purge_flag
				}
			}
			else = {
				SOV_add_random_character_to_purge_targets_effect = yes
			}
			#Kamenev
			if = {
				limit = {
					has_character = SOV_lev_kamenev
				}
				SOV_lev_kamenev = {
					set_character_flag = SOV_targeted_for_purge_flag
				}
			}
			else = {
				SOV_add_random_character_to_purge_targets_effect = yes
			}
			#Smirnov
			if = {
				limit = {
					has_character = SOV_ivan_smirnov
				}
				SOV_ivan_smirnov = {
					set_character_flag = SOV_targeted_for_purge_flag
				}
			}
			else = {
				SOV_add_random_character_to_purge_targets_effect = yes
			}

			#NOT-SO-HISTORICAL
			#Sokolnikov
			if = {
				limit = {
					has_character = SOV_grigory_sokolnikov
				}
				SOV_grigory_sokolnikov = {
					set_character_flag = SOV_targeted_for_purge_flag
				}
			}
			else = {
				SOV_add_random_character_to_purge_targets_effect = yes
			}
			#Shlyapnikov
			if = {
				limit = {
					has_character = SOV_aleksandr_shlyapnikov
				}
				SOV_aleksandr_shlyapnikov = {
					set_character_flag = SOV_targeted_for_purge_flag
				}
			}
			else = {
				SOV_add_random_character_to_purge_targets_effect = yes
			}
			
			custom_effect_tooltip = SOV_will_trigger_a_great_purge_tt
			hidden_effect = {
				set_country_flag = SOV_purge_event_unavoidable_flag #No way to avoid this purge. This people are about to be purged and there's nothing you can do for them.
				SOV_trigger_great_purge_moscow_trial_effect = yes #FIRST MOSCOW TRIAL -> Zinovyev & friends
			}
			custom_effect_tooltip = SOV_trigger_first_moscow_trial_tt
		}
	}

	focus = {
		id = SOV_secure_the_administration
		icon = GFX_focus_generic_soviet_politics
		prerequisite = { focus = SOV_the_zinovyevite_terrorist_center }
		x = -1
		y = 1
		relative_position_id = SOV_the_zinovyevite_terrorist_center
		cost = 5

		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_SOV_POLITICAL_PARANOIA}

		completion_reward = {
			add_to_variable = { SOV_the_politburo_economy_cost_factor = -0.2 }
			add_to_variable = { SOV_the_politburo_trade_laws_cost_factor = -0.2 }
			add_to_variable = { SOV_the_politburo_mobilization_laws_cost_factor = -0.2 }
			custom_effect_tooltip = SOV_secure_the_administration_ns_tt

			add_political_power = 25

			SOV_paranoia_medium_decrease_effect = yes
		}
	}

	focus = {
		id = SOV_the_collectivization_process
		icon = GFX_focus_prc_agrarian_socialism
		prerequisite = { focus = SOV_socialism_in_one_country }
		prerequisite = { focus = SOV_secure_the_administration }
		x = 0
		y = 3
		relative_position_id = SOV_socialism_in_one_country
		cost = 10

		completion_reward = {
			add_to_variable = { SOV_the_politburo_good_consumer_goods_factor = -0.02 }
			add_to_variable = { SOV_the_politburo_production_speed_buildings_factor = 0.05 } 
			add_to_variable = { SOV_the_politburo_global_building_slots_factor = 0.1 } 
			custom_effect_tooltip = SOV_the_collectivization_process_ns_tt

			add_stability = -0.05
			add_war_support = -0.05

			if = { #Target a rural state with no civs
				limit = {
					any_owned_state = {
						OR = {
							has_state_category = town #Developed Rural Region
							has_state_category = rural #Rural Region
						}
						is_fully_controlled_by = ROOT
						industrial_complex < 1
						arms_factory < 1
						dockyard < 1
						free_building_slots = {
							building = industrial_complex
							size > 1
							include_locked = yes
						}
					}
				}
				random_owned_state = {
					limit = {
						OR = {
							has_state_category = town #Developed Rural Region
							has_state_category = rural #Rural Region
						}
						is_fully_controlled_by = ROOT
						industrial_complex < 1
						arms_factory < 1
						dockyard < 1
						free_building_slots = {
							building = industrial_complex
							size > 1
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
			}
			else_if = { #Failsafe 1: Target a random rural state
				limit = {
					any_owned_state = {
						OR = {
							has_state_category = town #Developed Rural Region
							has_state_category = rural #Rural Region
						}
						is_fully_controlled_by = ROOT
						free_building_slots = {
							building = industrial_complex
							size > 1
							include_locked = yes
						}
					}
				}
				random_owned_state = {
					limit = {
						OR = {
							has_state_category = town #Developed Rural Region
							has_state_category = rural #Rural Region
						}
						is_fully_controlled_by = ROOT
						free_building_slots = {
							building = industrial_complex
							size > 1
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
			}
			else_if = { #Failsafe 2: Target a random state
				limit = {
					any_owned_state = {
						is_fully_controlled_by = ROOT
						free_building_slots = {
							building = industrial_complex
							size > 1
							include_locked = yes
						}
					}
				}
				random_owned_state = {
					limit = {
						is_fully_controlled_by = ROOT
						free_building_slots = {
							building = industrial_complex
							size > 1
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
			}

			SOV_paranoia_medium_decrease_effect = yes
		}
		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_SOV_POLITICAL_PARANOIA}
	}

	focus = {
		id = SOV_the_anti_soviet_trotskyist_center
		icon = GFX_focus_SOV_purge_trotskyists
		prerequisite = { focus = SOV_the_zinovyevite_terrorist_center }
		x = 0
		y = 2
		relative_position_id = SOV_the_zinovyevite_terrorist_center
		cost = 5

		available = {
			has_country_flag = {
				flag = SOV_first_moscow_trial_flag
				days > 175
			}
			custom_trigger_tooltip = {
				tooltip = SOV_last_purge_focus_days_tt
				has_country_flag = {
					flag = SOV_first_moscow_trial_flag
					days > 175
				}
			}
		}
		
		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_SOV_POLITICAL_PARANOIA}

		select_effect = {
			set_country_flag = SOV_paranoia_do_not_cancel_focus_flag #This focus cannot be canceled
		}

		completion_reward = {
			clr_country_flag = SOV_paranoia_do_not_cancel_focus_flag
			set_country_flag = { flag = SOV_paranoia_random_purge_cooldown_from_focus_flag days = 15 } #Used to prevent random purges from popping up while this is active
			set_country_flag = SOV_second_moscow_trial_flag #Used to unlock the next purge focus

			add_political_power = 25

			SOV_paranoia_high_increase_effect = yes

			#HISTORICAL
			#Radek
			if = {
				limit = {
					has_character = SOV_karl_radek
				}
				SOV_karl_radek = {
					set_character_flag = SOV_targeted_for_purge_flag
				}
			}
			else = {
				SOV_add_random_character_to_purge_targets_effect = yes
			}
			#NOT-SO-HISTORICAL
			#Smilga
			if = {
				limit = {
					has_character = SOV_ivar_smilga
				}
				SOV_ivar_smilga = {
					set_character_flag = SOV_targeted_for_purge_flag
				}
			}
			else = {
				SOV_add_random_character_to_purge_targets_effect = yes
			}
			#Preobrazhensky
			if = {
				limit = {
					has_character = SOV_yevgeny_preobrazhensky
				}
				SOV_yevgeny_preobrazhensky = {
					set_character_flag = SOV_targeted_for_purge_flag
				}
			}
			else = {
				SOV_add_random_character_to_purge_targets_effect = yes
			}
			#Ryutin
			if = {
				limit = {
					has_character = SOV_martemyan_ryutin
				}
				SOV_martemyan_ryutin = {
					set_character_flag = SOV_targeted_for_purge_flag
				}
			}
			else = {
				SOV_add_random_character_to_purge_targets_effect = yes
			}
			#Ustryalov
			if = {
				limit = {
					has_dlc = "No Step Back"
				}
				if = {
					limit = {
						has_character = SOV_nikolay_ustryalov
					}
					SOV_nikolay_ustryalov = {
						set_character_flag = SOV_targeted_for_purge_flag
					}
				}
				else = {
					SOV_add_random_character_to_purge_targets_effect = yes
				}
			}

			custom_effect_tooltip = SOV_will_trigger_a_great_purge_tt
			hidden_effect = {
				set_country_flag = SOV_purge_event_unavoidable_flag #No way to avoid this purge. This people are about to be purged and there's nothing you can do for them.
				SOV_trigger_great_purge_moscow_trial_effect = yes #SECOND MOSCOW TRIAL -> Left Opposition
			}
			custom_effect_tooltip = SOV_trigger_second_moscow_trial_tt

			hidden_effect = {
				swap_ruler_traits = {
					remove = stalin_political_paranoia
					add = stalin_political_paranoia_advanced
				}
				add_to_variable = { SOV_paranoia_weekly_modifiers_amount = 1 }
				SOV_paranoia_modifier_update_gui_tooltip = yes
			}		
			custom_effect_tooltip = SOV_increase_weekly_paranoia_in_trait_tt
		}
	}

	focus = {
		id = SOV_the_workers_dictatorship
		icon = GFX_focus_spr_masters_of_our_own_fate
		prerequisite = { focus = SOV_the_anti_soviet_trotskyist_center }
		x = 0
		y = 1
		relative_position_id = SOV_the_anti_soviet_trotskyist_center
		cost = 10
		
		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_SOV_POLITICAL_PARANOIA}

		completion_reward = {
			add_to_variable = { SOV_the_politburo_political_power_factor = 0.05 }
			add_to_variable = { SOV_the_politburo_max_surrender_limit_offset = 0.05 }
			custom_effect_tooltip = SOV_the_workers_dictatorship_ns_tt

			add_political_power = 50

			SOV_paranoia_low_decrease_effect = yes
		}
	}

	focus = {
		id = SOV_organization_centralization_discipline
		icon = GFX_focus_SOV_organization_centralization_discipline
		prerequisite = { focus = SOV_the_collectivization_process }
		prerequisite = { focus = SOV_the_workers_dictatorship }
		x = -2
		y = 1
		relative_position_id = SOV_the_workers_dictatorship
		cost = 5
		
		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_SOV_POLITICAL_PARANOIA}

		completion_reward = {
			add_to_variable = { SOV_the_politburo_max_command_power = 20 }
			add_to_variable = { SOV_the_politburo_mobilization_speed = 0.05 }
			custom_effect_tooltip = SOV_organization_centralization_discipline_ns_tt

			add_political_power = 50

			SOV_paranoia_medium_decrease_effect = yes
		}
	}

	focus = {
		id = SOV_war_economy
		icon = GFX_goal_generic_trade
		prerequisite = { focus = SOV_organization_centralization_discipline }
		x = 0
		y = 1
		relative_position_id = SOV_organization_centralization_discipline
		cost = 10
		
		search_filters = {FOCUS_FILTER_INDUSTRY}

		completion_reward = {
			custom_effect_tooltip = SOV_war_economy_stability_tt
			if = {
				limit = {
					has_war = no
				}
				add_stability = -0.1
			}
			else = {
				custom_effect_tooltip = SOV_war_economy_stability_war_tt
			}
			if = {
				limit = {
					NOT = { has_idea = war_economy }
					NOT = { has_idea = tot_economic_mobilisation }
				}
				add_ideas = war_economy
			}
			if = {
				limit = {
					217 = {
						is_controlled_by = ROOT
						free_building_slots = {
							building = arms_factory
							size > 1
							include_locked = yes
						}
					}
				}
				217 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = arms_factory
						level = 2
						instant_build = yes
					}
				}
			}
			else = {
				random_controlled_state = {
					limit = {
						arms_factory > 1
						free_building_slots = {
							building = arms_factory
							size > 1
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = arms_factory
						level = 2
						instant_build = yes
					}
				}
			}
		}
	}

	focus = {
		id = SOV_the_military_conspiracy
		icon = GFX_focus_SOV_military_purge
		prerequisite = { focus = SOV_the_workers_dictatorship }
		x = 0
		y = 2
		relative_position_id = SOV_the_anti_soviet_trotskyist_center
		cost = 5

		available = {
			has_country_flag = {
				flag = SOV_second_moscow_trial_flag
				days > 175
			}
			custom_trigger_tooltip = {
				tooltip = SOV_last_purge_focus_days_military_tt
				has_country_flag = {
					flag = SOV_second_moscow_trial_flag
					days > 175
				}
			}
		}
		
		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_SOV_POLITICAL_PARANOIA}

		select_effect = {
			set_country_flag = SOV_paranoia_do_not_cancel_focus_flag #This focus cannot be canceled
		}

		completion_reward = {
			clr_country_flag = SOV_paranoia_do_not_cancel_focus_flag
			set_country_flag = { flag = SOV_paranoia_random_purge_cooldown_from_focus_flag days = 15 } #Used to prevent random purges from popping up while this is active
			set_country_flag = SOV_trial_of_the_generals_flag #Used to unlock the next purge focus

			add_political_power = 25

			SOV_paranoia_high_increase_effect = yes

			#Historical
			if = {
				limit = {
					has_character = SOV_mikhail_tukhachevsky
				}
				SOV_mikhail_tukhachevsky = {
					set_character_flag = SOV_targeted_for_purge_flag
				}
			}
			else = {
				SOV_add_random_character_to_purge_targets_effect = yes
			}
			
			#Historical	- more comrades of Tukhachevsky getting purged...
			if = {
				limit = {
					has_character = SOV_august_kork
					SOV_august_kork = {
						SOV_character_can_be_purged = yes
					}
				}
				SOV_august_kork = {
					set_character_flag = SOV_targeted_for_purge_flag
				}
			}
			else = {
				SOV_add_random_character_to_purge_targets_effect = yes
			}

			#Historical	- more comrades of Tukhachevsky getting purged...
			if = {
				limit = {
					has_character = SOV_robert_eidemann
					SOV_robert_eidemann = {
						SOV_character_can_be_purged = yes
					}
				}
				SOV_robert_eidemann = {
					set_character_flag = SOV_targeted_for_purge_flag
				}
			}
			else = {
				SOV_add_random_character_to_purge_targets_effect = yes
			}

			#Historical	- more comrades of Tukhachevsky getting purged...
			if = {
				limit = {
					has_character = SOV_boris_feldman
					SOV_boris_feldman = {
						SOV_character_can_be_purged = yes
					}
				}
				SOV_boris_feldman = {
					set_character_flag = SOV_targeted_for_purge_flag
				}
			}
			else = {
				SOV_add_random_character_to_purge_targets_effect = yes
			}

			#Historical	- more comrades of Tukhachevsky getting purged...
			if = {
				limit = {
					has_character = SOV_iona_yakir
					SOV_iona_yakir = {
						SOV_character_can_be_purged = yes
					}
				}
				SOV_iona_yakir = {
					set_character_flag = SOV_targeted_for_purge_flag
				}
			}
			else = {
				SOV_add_random_character_to_purge_targets_effect = yes
			}
			#NOT-SO-HISTORICAL
			#Removed Yegorov, since he was purged in 1939 and was marked as "non-historical" - Fantom
			#Blyukher
			if = {
				limit = {
					has_character = SOV_vasily_blyukher
				}
				SOV_vasily_blyukher = {
					set_character_flag = SOV_targeted_for_purge_flag
				}
			}
			else = {
				SOV_add_random_character_to_purge_targets_effect = yes
			}
			#Primakov
			if = {
				limit = {
					has_character = SOV_vitaly_primakov
				}
				SOV_vitaly_primakov = {
					set_character_flag = SOV_targeted_for_purge_flag
				}
			}
			else = {
				SOV_add_random_character_to_purge_targets_effect = yes
			}			

			custom_effect_tooltip = SOV_will_trigger_a_great_purge_tt
			hidden_effect = {
				set_country_flag = SOV_purge_event_unavoidable_flag #No way to avoid this purge. This people are about to be purged and there's nothing you can do for them.
				SOV_great_purge_army_trial_of_the_generals_effect = yes #TRIAL OF THE GENERALS -> Tukhachevsky
			}

			set_country_flag = SOV_stalinist_military_flag #New Generals have more chances of being Stalinists after this
		}
	}

	focus = {
		id = SOV_the_bloc_of_rights_and_trotskyites
		icon = GFX_focus_SOV_purge_bukharinists
		prerequisite = { focus = SOV_the_military_conspiracy }
		x = 0
		y = 1
		relative_position_id = SOV_the_military_conspiracy
		cost = 10

		available = {
			has_country_flag = {
				flag = SOV_trial_of_the_generals_flag
				days > 175
			}
			custom_trigger_tooltip = {
				tooltip = SOV_last_purge_focus_days_rights_tt
				has_country_flag = {
					flag = SOV_trial_of_the_generals_flag
					days > 175
				}
			}
		}
		
		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_SOV_POLITICAL_PARANOIA}

		select_effect = {
			set_country_flag = SOV_paranoia_do_not_cancel_focus_flag #This focus cannot be canceled
		}

		completion_reward = {
			clr_country_flag = SOV_paranoia_do_not_cancel_focus_flag
			set_country_flag = { flag = SOV_paranoia_random_purge_cooldown_from_focus_flag days = 15 } #Used to prevent random purges from popping up while this is active
			set_country_flag = SOV_third_moscow_trial_flag #Used to unlock the next purge focus

			add_political_power = 25

			#HISTORICAL
			#Bukharin
			if = {
				limit = {
					has_character = SOV_nikolay_bukharin
				}
				SOV_nikolay_bukharin = {
					set_character_flag = SOV_targeted_for_purge_flag
				}
			}
			else = {
				SOV_add_random_character_to_purge_targets_effect = yes
			}
			#Rykov
			if = {
				limit = {
					has_character = SOV_aleksey_rykov
				}
				SOV_aleksey_rykov = {
					set_character_flag = SOV_targeted_for_purge_flag
				}
			}
			else = {
				SOV_add_random_character_to_purge_targets_effect = yes
			}
			#NOT-SO-HISTORICAL
			#Tomsky
			if = {
				limit = {
					has_character = SOV_mikhail_tomsky
				}
				SOV_mikhail_tomsky = {
					set_character_flag = SOV_targeted_for_purge_flag
				}
			}
			else = {
				SOV_add_random_character_to_purge_targets_effect = yes
			}
			#Litvinov was not purged, so why put him there? Died 1951... - Fantom

			custom_effect_tooltip = SOV_will_trigger_a_great_purge_tt
			hidden_effect = {
				set_country_flag = SOV_purge_event_unavoidable_flag #No way to avoid this purge. This people are about to be purged and there's nothing you can do for them.
				SOV_trigger_great_purge_moscow_trial_effect = yes #THIRD MOSCOW TRIAL -> Right Opposition
			}
			custom_effect_tooltip = SOV_trigger_third_moscow_trial_tt

			SOV_remove_paranoia_effect = yes #REMOVE PARANOIA SYSTEM
		}
	}

	focus = {
		id = SOV_behead_the_snake
		icon = GFX_focus_SOV_behead_the_snake
		prerequisite = { focus = SOV_the_military_conspiracy }
		x = 2
		y = 1
		relative_position_id = SOV_the_military_conspiracy
		cost = 5

		available = {
			has_government = communism
		}
		
		search_filters = {FOCUS_FILTER_SOV_POLITICAL_PARANOIA}

		completion_reward = {
			if = {
				limit = {
					has_dlc = "La Resistance"
				}
				custom_effect_tooltip = SOV_behead_the_snake_lar_tt
				create_operative_leader = {
					name = "Ramón Mercader"
					GFX = GFX_portrait_SOV_ramon_mercader
					traits = { operative_tough operative_infiltrator }
					bypass_recruitment = no
					available_to_spy_master = yes
					nationalities = { SOV SPR MEX }
				}

				#Extra operative slot
				set_variable = { SOV_the_politburo_operative_slot = 1 }
				custom_effect_tooltip = SOV_behead_the_snake_ns_tt
			}
			else = {
				custom_effect_tooltip = SOV_behead_the_snake_no_lar_tt
			}

			SOV_paranoia_high_decrease_effect = yes
		}
	}

	focus = {
		id = SOV_stalins_cult_of_personality
		icon = GFX_focus_SOV_stalins_cult_of_personality
		prerequisite = { focus = SOV_the_bloc_of_rights_and_trotskyites }
		x = 2
		y = 1
		relative_position_id = SOV_the_bloc_of_rights_and_trotskyites
		cost = 5

		mutually_exclusive = {
			focus = SOV_prepare_to_hunt_the_bear
		}

		available = {
			has_country_flag = {
				flag = SOV_third_moscow_trial_flag
				days > 175
			}
			custom_trigger_tooltip = {
				tooltip = SOV_last_purge_focus_days_cult_tt
				has_country_flag = {
					flag = SOV_third_moscow_trial_flag
					days > 175
				}
			}
			has_completed_focus = SOV_expand_the_agitprop
		}
		
		search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_PROPAGANDA}

		completion_reward = {
			add_political_power = 25

			custom_effect_tooltip = unlock_propaganda_campaign_tt
			unlock_decision_tooltip = SOV_propaganda_stalin
			custom_effect_tooltip = propaganda_campaign_requirement_tt
		}
	}

	focus = {
		id = SOV_prepare_to_hunt_the_bear
		icon = GFX_goal_SOV_trot_destalinization
		prerequisite = { focus = SOV_the_bloc_of_rights_and_trotskyites }
		x = -3
		y = 1
		relative_position_id = SOV_the_bloc_of_rights_and_trotskyites
		cost = 5

		mutually_exclusive = {
			focus = SOV_stalins_cult_of_personality
		}

		available = {
			is_subject = no
			has_country_leader = {
				character = SOV_iosif_stalin
				ruling_only = yes
			}
			any_army_leader = {
				has_trait = trait_SOV_cowed_by_stalin_army
			}
		}
		

		completion_reward = {
			add_stability = 0.05
			add_war_support = -0.1
			add_popularity = {
				ideology = communism
				popularity = 0.15
			}
		}
		search_filters = { FOCUS_FILTER_STABILITY }
	}

	focus = {
		id = SOV_look_to_the_east
		icon = GFX_goal_generic_communist_secret_police
		prerequisite = { focus = SOV_prepare_to_hunt_the_bear }
		x = -1
		y = 1
		relative_position_id = SOV_prepare_to_hunt_the_bear
		cost = 5

		available = {
			is_subject = no
		}
		
		completion_reward = {
			add_political_power = 50
			unlock_decision_tooltip = SOV_contact_lyushkov_group_in_far_east
			unlock_decision_tooltip = SOV_provide_intel_to_the_japanese
			unlock_decision_tooltip = SOV_recruit_white_emigres_in_manchuria
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
	}
	
	focus = {
		id = SOV_freedom_of_debate_unity_of_action
		icon = GFX_goal_FRA_pcf_sfio_coalition
		prerequisite = { focus = SOV_prepare_to_hunt_the_bear focus = SOV_stalins_cult_of_personality }
		x = 1
		y = 1
		relative_position_id = SOV_prepare_to_hunt_the_bear
		cost = 10
		
		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_WAR_SUPPORT FOCUS_FILTER_STABILITY}

		completion_reward = {
			add_to_variable = { SOV_the_politburo_political_power_factor = 0.05 }
			add_to_variable = { SOV_the_politburo_political_advisor_cost_factor = -0.15 }
			custom_effect_tooltip = SOV_freedom_of_debate_unity_of_action_ns_tt

			add_political_power = 50
			add_stability = 0.05
			add_war_support = 0.05
		}
	}

	focus = {
		id = SOV_forge_new_future
		icon = GFX_goal_nikita_khrushchev
		prerequisite = { focus = SOV_freedom_of_debate_unity_of_action }
		x = -1
		y = 1
		relative_position_id = SOV_freedom_of_debate_unity_of_action
		cost = 5

		available = {
			is_subject = no
			has_government = communism
			has_global_flag = stalin_dead
		}
		
		completion_reward = {
			add_country_leader_role = {
				character = SOV_nikita_khrushchyov
				country_leader = {
					ideology = marxism
					traits = { veteran_communist }
					expire = "1965.3.1.1"
				}
				promote_leader = yes 
			}
			add_timed_idea = {
				idea = SOV_destalinization
				days = 1095
			}
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
	}

	focus = {
		id = SOV_prolong_the_stalin_legacy
		icon = GFX_goal_generic_communism
		prerequisite = { focus = SOV_freedom_of_debate_unity_of_action }

		available = {
			has_global_flag = stalin_dead
			has_government = communism
			has_country_leader = {
				character = SOV_georgy_malenkow
				ruling_only = yes
			}
		}
		
		x = 1
		y = 1
		relative_position_id = SOV_freedom_of_debate_unity_of_action
		cost = 7.2

		ai_will_do = {
			factor = 1000
		}

		completion_reward = {
			remove_country_leader_trait = sov_power_truggle
			set_country_flag = purge_beria
			add_country_leader_trait = captain_of_industry	
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
	}
	focus = {
		id = SOV_strike_the_NKVD_positions
		icon = GFX_focus_SOV_the_last_purge
		prerequisite = { focus = SOV_prolong_the_stalin_legacy focus = SOV_forge_new_future }
		available = {
			is_subject = no
			has_government = communism
			has_global_flag = stalin_dead
		}
		
		x = 1
		y = 1
		relative_position_id = SOV_forge_new_future
		cost = 5
		ai_will_do = {
			factor = 1000
		}
		completion_reward = {
			add_stability = 0.1
			if = {
				limit = {
					has_idea = SOV_nkvd_nsb
				}
				remove_ideas = SOV_nkvd_nsb
			}
			IF = { limit = { has_character = SOV_genrikh_yagoda } retire_character = SOV_genrikh_yagoda }
			IF = { limit = { has_character = SOV_nikolay_yezhov } retire_character = SOV_nikolay_yezhov }
			IF = { limit = { has_character = SOV_lavrenty_beriya } retire_character = SOV_lavrenty_beriya }
			IF = { limit = { has_character = SOV_vsevolod_merkulov } retire_character = SOV_vsevolod_merkulov }
			IF = { limit = { has_character = SOV_mikhail_frinovsky } retire_character = SOV_mikhail_frinovsky }
			
		}
		search_filters = { FOCUS_FILTER_STABILITY }
	}

	focus = {
		id = SOV_denounce_stalinist_crimes
		icon = GFX_fifth_column
		prerequisite = { focus = SOV_forge_new_future }
		x = -1
		y = 1
		relative_position_id = SOV_forge_new_future
		cost = 5
		
		available = {
			is_subject = no
			has_government = communism
			custom_trigger_tooltip = {
				tooltip = SOV_propaganda_campaigns_taken_15_or_greater_tt
				check_variable = { SOV_propaganda_campaigns_taken = 15 compare = greater_than_or_equals }
			}
		}

		completion_reward = {
			add_popularity = {
				ideology = communism 
				popularity = -0.1
			}
			add_threat = -20
			custom_effect_tooltip = SOV_international_revolutionary_marxist_centre_stalinists_tt
			every_other_country = {
				limit = {
					has_country_leader_ideology = stalinism
				}
				add_opinion_modifier = { modifier = large_decrease target = ROOT }
				add_ai_strategy = {	#they will hate us
					type = antagonize
					id = ROOT
					value = 150
				}
			}
			custom_effect_tooltip = SOV_every_nation_with_negative_opinion_against_us_tt
			every_other_country = {
				limit = {
					NOT = {
						has_war_with = ROOT
					}
					OR = {
						has_government = democratic
						has_opinion = {
							target = ROOT
							value < 1
						}
					}
				}
				add_opinion_modifier = { modifier = small_increase target = ROOT }
				add_ai_strategy = {	#they will hate us
					type = befriend
					id = ROOT
					value = 20		#small token of friendship
				}
			}
		}
	}

	focus = {
		id = SOV_great_commander
		icon = GFX_focus_generic_military_dictatorship
		prerequisite = { focus = SOV_strike_the_NKVD_positions }
		prerequisite = { focus = SOV_forge_new_future }
		x = 0
		y = 2
		relative_position_id = SOV_forge_new_future
		cost = 5
		
		available = {
			is_subject = no
			has_government = communism
			custom_trigger_tooltip = {
				tooltip = SOV_propaganda_campaigns_taken_10_or_greater_tt
				check_variable = { SOV_propaganda_campaigns_taken = 10 compare = greater_than_or_equals }
			}
		}

		completion_reward = {
			add_political_power = 50
			add_war_support = 0.05
			add_country_leader_role = {
				character = SOV_georgy_zhukov
				country_leader = {
					ideology = marxism
					traits = { stalin_great_commander incompetent_leader }
					expire = "1965.3.1.1"
				}
				promote_leader = yes 
			}
		}
		search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_WAR_SUPPORT }
	}

	focus = {
		id = SOV_the_construction_of_communism
		icon = GFX_focus_ger_great_red_menace
		prerequisite = { focus = SOV_stalins_cult_of_personality focus = SOV_prepare_to_hunt_the_bear }
		x = -2
		y = 1
		relative_position_id = SOV_stalins_cult_of_personality
		cost = 10

		available = {
			num_subjects > 0
		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY}

		completion_reward = {
			add_to_variable = { SOV_the_politburo_opinion_gain_monthly_same_ideology_factor = 0.25 }
			custom_effect_tooltip = SOV_the_construction_of_communism_ns_tt

			if = {
				limit = {
					num_subjects > 0
				}
				every_subject_country = {
					add_autonomy_score = {
						value = -100
						localization = SOV_the_construction_of_communism
					}
				}
			}
			else = {
				custom_effect_tooltip = SOV_the_construction_of_communism_puppet_autonomy_tt
			}

			custom_effect_tooltip = SOV_the_construction_of_communism_railways_tt
			#Build railway from Moscow to Puppets
			hidden_effect = { #Hiidden for tooltip reasons
				every_subject_country = {
					limit = {
						capital_scope = {
							OR = {
								is_on_continent = europe
								is_on_continent = asia
								is_on_continent = middle_east
							}
						}
					}

					if = {
						limit = {
							can_build_railway = {
								start_state = ROOT.capital
								target_state = THIS.capital
								build_only_on_allied = yes
							}
						}
						build_railway = {				
							start_state = ROOT.capital
							target_state = THIS.capital
							build_only_on_allied = yes
						}
					}		
				}
			}
		}
	}

	focus = {
		id = SOV_they_will_know_fear
		icon = GFX_focus_generic_army_tanks2
		prerequisite = { focus = SOV_stalins_cult_of_personality }
		x = 0
		y = 1
		relative_position_id = SOV_stalins_cult_of_personality
		cost = 5

		available = {
			has_defensive_war = yes
			has_tech = advanced_heavy_tank_chassis
		}
		
		search_filters = {FOCUS_FILTER_RESEARCH}

		completion_reward = {
			add_tech_bonus = {
				name = SOV_they_will_know_fear
				bonus = 1
				uses = 2
				category = armor
			}

			# IS-2 tank template
			if = {
				limit = {
					OR = {
						has_tech = antiair2
						has_tech = antitank2
					}
				}
				create_equipment_variant = {
					name = "IS-2"
					type = heavy_tank_chassis_3
					parent_version = 0
					modules = {
						main_armament_slot = tank_heavy_cannon_2
						turret_type_slot = tank_heavy_three_man_tank_turret
						suspension_type_slot = tank_torsion_bar_suspension
						armor_type_slot = tank_welded_armor
						engine_type_slot = tank_diesel_engine
						special_type_slot_1 = tank_radio_1
						special_type_slot_2 = sloped_armor
						special_type_slot_3 = smoke_launchers
					}
					upgrades = {
						tank_nsb_engine_upgrade = 8
						tank_nsb_armor_upgrade = 6
					}
					icon = "gfx/interface/technologies/SOV_adv_heavy_tank.dds"
				}
			}
			else_if = {
				limit = {
					OR = {
						has_tech = interwar_antiair
						has_tech = interwar_antitank
					}
				}
				create_equipment_variant = {
					name = "IS-2"
					type = heavy_tank_chassis_3
					parent_version = 0
					modules = {
						main_armament_slot = tank_heavy_cannon
						turret_type_slot = tank_heavy_three_man_tank_turret
						suspension_type_slot = tank_torsion_bar_suspension
						armor_type_slot = tank_welded_armor
						engine_type_slot = tank_diesel_engine
						special_type_slot_1 = tank_radio_1
						special_type_slot_2 = sloped_armor
						special_type_slot_3 = smoke_launchers
					}
					upgrades = {
						tank_nsb_engine_upgrade = 8
						tank_nsb_armor_upgrade = 6
					}
					icon = "gfx/interface/technologies/SOV_adv_heavy_tank.dds"
				}
			}
			add_tech_bonus = {
				name = GER_counter_sloped_armor
				bonus = 1
				uses = 1
				category = cat_anti_tank
			}
			if = {
				limit = {
					NOT = {
						has_dlc = "No Step Back"
					}
				}
				add_tech_bonus = {
					name = tank_bonus
					bonus = 2
					uses = 1
					technology = improved_light_td
					technology = advanced_light_td
				}
				add_tech_bonus = {
					name = tank_bonus
					bonus = 2
					uses = 1
					technology = basic_medium_td
					technology = improved_medium_td
					technology = advanced_medium_td
				}
				add_tech_bonus = {
					name = tank_bonus
					bonus = 2
					uses = 1
					technology = basic_heavy_td
					technology = improved_heavy_td
					technology = advanced_heavy_td
				}				
			}
		}
	}
	
	focus = {
		id = SOV_the_faithful_servant_of_lenin
		icon = GFX_goal_lenin3
		prerequisite = { focus = SOV_stalins_cult_of_personality focus = SOV_prolong_the_stalin_legacy }
		x = -1
		y = 3
		relative_position_id = SOV_stalins_cult_of_personality
		cost = 5

		mutually_exclusive = { focus = SOV_inheritor_of_the_mantle_of_lenin }

		available = {
			custom_trigger_tooltip = {
				tooltip = SOV_propaganda_campaigns_taken_5_or_greater_tt
				check_variable = { SOV_propaganda_campaigns_taken = 5 compare = greater_than_or_equals }
			}
		}
		
		search_filters = {FOCUS_FILTER_STABILITY}

		completion_reward = {
			add_stability = 0.1
			add_country_leader_trait = stalin_servant_of_lenin
		}
	}

	focus = {
		id = SOV_inheritor_of_the_mantle_of_lenin
		icon = GFX_focus_generic_support_the_left_right
		prerequisite = { focus = SOV_stalins_cult_of_personality }
		x = 1
		y = 3
		relative_position_id = SOV_stalins_cult_of_personality
		cost = 5

		mutually_exclusive = { focus = SOV_the_faithful_servant_of_lenin }

		available = {
			custom_trigger_tooltip = {
				tooltip = SOV_propaganda_campaigns_taken_5_or_greater_tt
				check_variable = { SOV_propaganda_campaigns_taken = 5 compare = greater_than_or_equals }
			}
		}
		
		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_WAR_SUPPORT}

		completion_reward = {
			add_war_support = 0.05
			add_country_leader_trait = stalin_inheritor_of_lenin
		}
	}

	focus = {
		id = SOV_brilliant_genius
		icon = GFX_focus_generic_socialist_science
		prerequisite = { focus = SOV_inheritor_of_the_mantle_of_lenin }
		x = 0
		y = 2
		relative_position_id = SOV_inheritor_of_the_mantle_of_lenin
		cost = 10
		
		available = {
			custom_trigger_tooltip = {
				tooltip = SOV_propaganda_campaigns_taken_10_or_greater_tt
				check_variable = { SOV_propaganda_campaigns_taken = 10 compare = greater_than_or_equals }
			}
		}
		
		search_filters = {FOCUS_FILTER_RESEARCH}

		completion_reward = {
			#Academies of Sciences decisions are 50% cheaper
			divide_variable = { SOV_national_academy_of_sciences_construction_cost = 2 }
			custom_effect_tooltip = SOV_brilliant_genius_academies_of_sciences_tt

			if = {
				limit = {
					has_completed_focus = SOV_leader_of_the_party_and_the_people
				}
				swap_ruler_traits = {
					remove = stalin_inheritor_of_lenin_leader
					add = stalin_inheritor_of_lenin_final
				}
			}
			else = {
				swap_ruler_traits = {
					remove = stalin_inheritor_of_lenin
					add = stalin_inheritor_of_lenin_genius
				}
			}
		}
	}

	focus = {
		id = SOV_ban_excessive_hero_worship
		icon = GFX_focus_renounce_the_treaty_of_trianon
		prerequisite = { focus = SOV_the_faithful_servant_of_lenin }
		x = -1
		y = 1
		relative_position_id = SOV_the_faithful_servant_of_lenin
		cost = 10

		available = {
			custom_trigger_tooltip = {
				tooltip = SOV_propaganda_campaigns_taken_10_or_greater_tt
				check_variable = { SOV_propaganda_campaigns_taken = 10 compare = greater_than_or_equals }
			}
		}
		
		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_STABILITY}

		completion_reward = {
			custom_effect_tooltip = SOV_ban_excessive_hero_worship_dec_cost_tt
			SOV_foreign_politics_decision_cost_reduction_effect = yes

			if = {
				limit = {
					has_completed_focus = SOV_leader_of_the_party_and_the_people
				}
				swap_ruler_traits = {
					remove = stalin_servant_of_lenin_leader
					add = stalin_servant_of_lenin_final
				}
			}
			else = {
				swap_ruler_traits = {
					remove = stalin_servant_of_lenin
					add = stalin_servant_of_lenin_worship
				}
			}
			if = { #demoting to simulate the Malenkows desire to oppose the Leningrads defenders and power struggle - Fantom
				limit = {
					SOV_georgy_zhukov = {
						NOT = { has_character_flag = SOV_character_purged_flag }
						is_field_marshal = yes
					}
				}
				SOV_georgy_zhukov = {
					demote_leader = yes
				}
				random_unit_leader = {
					limit = {
						NOT = { has_character_flag = SOV_character_purged_flag }
						is_field_marshal = yes
					}
					demote_leader = yes
				}
			}
			else = {
				random_unit_leader = {
					limit = {
						NOT = { has_character_flag = SOV_character_purged_flag }
						is_field_marshal = yes
					}
					demote_leader = yes
				}
				random_unit_leader = {
					limit = {
						NOT = { has_character_flag = SOV_character_purged_flag }
						is_field_marshal = yes
					}
					demote_leader = yes
				}
			}
		}
	}

	focus = {
		id = SOV_leader_of_the_party_and_the_people
		icon = GFX_focus_YUG_pan_slavic_congress
		prerequisite = { focus = SOV_inheritor_of_the_mantle_of_lenin focus = SOV_the_faithful_servant_of_lenin }
		x = -1
		y = 1
		relative_position_id = SOV_inheritor_of_the_mantle_of_lenin
		cost = 5
		
		available = {
			custom_trigger_tooltip = {
				tooltip = SOV_propaganda_campaigns_taken_10_or_greater_tt
				check_variable = { SOV_propaganda_campaigns_taken = 10 compare = greater_than_or_equals }
			}
		}
		
		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_STABILITY}

		completion_reward = {
			add_political_power = 50

			#Swap Stalin's Trait
			if = { #INHERITOR BRANCH
				limit = {
					has_completed_focus = SOV_inheritor_of_the_mantle_of_lenin
				}
				if = {
					limit = {
						has_completed_focus = SOV_brilliant_genius
					}
					swap_ruler_traits = {
						remove = stalin_inheritor_of_lenin_genius
						add = stalin_inheritor_of_lenin_final
					}
				}
				else = {
					swap_ruler_traits = {
						remove = stalin_inheritor_of_lenin
						add = stalin_inheritor_of_lenin_leader
					}
				}
			}
			else_if = { #SERVANT BRANCH
				limit = {
					has_completed_focus = SOV_the_faithful_servant_of_lenin
				}
				if = {
					limit = {
						has_completed_focus = SOV_ban_excessive_hero_worship
					}
					swap_ruler_traits = {
						remove = stalin_servant_of_lenin_worship
						add = stalin_servant_of_lenin_final
					}
				}
				else = {
					swap_ruler_traits = {
						remove = stalin_servant_of_lenin
						add = stalin_servant_of_lenin_leader
					}
				}
			}
			else = {
				custom_effect_tooltip = SOV_leader_of_the_party_and_the_people_trait_tt
			}
		}
	}

	focus = {
		id = SOV_architect_of_communism
		icon = GFX_goal_generic_soviet_construction
		prerequisite = { focus = SOV_the_faithful_servant_of_lenin }
		prerequisite = { focus = SOV_leader_of_the_party_and_the_people }
		x = -1
		y = 1
		relative_position_id = SOV_leader_of_the_party_and_the_people
		cost = 5

		available = {
			custom_trigger_tooltip = {
				tooltip = SOV_propaganda_campaigns_taken_15_or_greater_tt
				check_variable = { SOV_propaganda_campaigns_taken = 15 compare = greater_than_or_equals }
			}
		}
		
		search_filters = {FOCUS_FILTER_POLITICAL}

		completion_reward = {
			add_country_leader_trait = stalin_architect_of_communism
		}
	}

	focus = {
		id = SOV_father_of_nations
		icon = GFX_focus_SOV_father_of_nations
		prerequisite = { focus = SOV_leader_of_the_party_and_the_people }
		x = 0
		y = 2
		relative_position_id = SOV_leader_of_the_party_and_the_people
		cost = 10

		available = {
			custom_trigger_tooltip = {
				tooltip = SOV_propaganda_campaigns_taken_20_or_greater_tt
				check_variable = { SOV_propaganda_campaigns_taken = 20 compare = greater_than_or_equals }
			}
		}
		
		search_filters = {FOCUS_FILTER_MANPOWER FOCUS_FILTER_STABILITY}

		completion_reward = {
			swap_ruler_traits = {
				remove = stalin_heart_of_steel
				add = stalin_father_of_nations
			}
			hidden_effect = {
				play_song = "comintern_war_1" #TODO_Manu: Too abrupt (just like speeches) -> Pending feedback for removal
			}
		}
	}



	

######################################################################################################################################

#### ##    ## ######## ######## ########  ##    ##    ###    ##             ###    ######## ########    ###    #### ########   ######  
 ##  ###   ##    ##    ##       ##     ## ###   ##   ## ##   ##            ## ##   ##       ##         ## ##    ##  ##     ## ##    ## 
 ##  ####  ##    ##    ##       ##     ## ####  ##  ##   ##  ##           ##   ##  ##       ##        ##   ##   ##  ##     ## ##       
 ##  ## ## ##    ##    ######   ########  ## ## ## ##     ## ##          ##     ## ######   ######   ##     ##  ##  ########   ######  
 ##  ##  ####    ##    ##       ##   ##   ##  #### ######### ##          ######### ##       ##       #########  ##  ##   ##         ## 
 ##  ##   ###    ##    ##       ##    ##  ##   ### ##     ## ##          ##     ## ##       ##       ##     ##  ##  ##    ##  ##    ## 
#### ##    ##    ##    ######## ##     ## ##    ## ##     ## ########    ##     ## ##       ##       ##     ## #### ##     ##  ######  
	


	focus = {
		id = SOV_addressing_internal_affairs
		icon = GFX_focus_generic_self_management
		prerequisite = { focus = SOV_the_path_of_marxism_leninism }
		x = -2
		y = 1
		

		relative_position_id = SOV_the_path_of_marxism_leninism
		cost = 5

		allow_branch = {
			if = {
				limit = {
					has_game_rule = {
						rule = obsolete_focus_branches_visibility
						option = HIDE
					}
				}
				NOT = { has_completed_focus = SOV_beaten_but_not_defeated }
				NOT = { has_completed_focus = SOV_form_a_fifth_column }
			}
		}
		
		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_STABILITY}

		completion_reward = {
			add_political_power = 50
			add_stability = 0.1
		}
	}

	focus = {
		id = SOV_nkvd_primacy
		icon = GFX_goal_HON_nkvd_assistance
		prerequisite = { focus = SOV_addressing_internal_affairs }
		x = -2
		y = 1
		relative_position_id = SOV_addressing_internal_affairs
		cost = 5

		completion_reward = {
			if = {
				limit = {
					has_dlc = "La Resistance"
					NOT = {
						has_intelligence_agency = yes
					}
				}
				create_intelligence_agency = yes				
			}			
			add_ideas = SOV_nkvd_nsb
			add_tech_bonus = {
				name = mp_tech_bonus_name
				bonus = 1
				uses = 1
				category = military_police_tech
			}			
			SOV_paranoia_medium_increase_effect = yes
		}
		search_filters = {FOCUS_FILTER_SOV_POLITICAL_PARANOIA FOCUS_FILTER_RESEARCH FOCUS_FILTER_ESPIONAGE}
	}
		

	focus = {
		id = SOV_the_new_soviet_woman
		icon = GFX_goal_womens_rights
		prerequisite = { focus = SOV_addressing_internal_affairs }
		x = 2
		y = 1
		relative_position_id = SOV_addressing_internal_affairs
		cost = 5
		
		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_STABILITY}

		completion_reward = {
			add_political_power = 70
			add_stability = 0.1
			add_popularity = {
				ideology = communism
				popularity = 0.1
			}
		}
	}

	focus = {
		id = SOV_expand_the_agitprop
		icon = GFX_goal_generic_army_mobilization2
		prerequisite = { focus = SOV_addressing_internal_affairs }
		x = 0
		y = 1
		relative_position_id = SOV_addressing_internal_affairs
		cost = 5
		
		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_PROPAGANDA}

		completion_reward = {
			add_political_power = 25
			add_popularity = {
				ideology = communism
				popularity = 0.1
			}

			hidden_effect = {
				SOV_unlock_propaganda_campaign_slot_effect = yes
			}
			unlock_decision_category_tooltip = SOV_propaganda_campaigns
		}
	}

	focus = {
		id = SOV_positive_heroism
		icon = GFX_postive_heroism
		prerequisite = { focus = SOV_expand_the_agitprop }
		x = -2
		y = 1
		relative_position_id = SOV_expand_the_agitprop
		cost = 10

		mutually_exclusive = { focus = SOV_collectivist_propaganda }
		
		search_filters = {FOCUS_FILTER_PROPAGANDA}

		completion_reward = {
			add_political_power = 25
			custom_effect_tooltip = available_military_high_command
			show_ideas_tooltip = konstantin_rokossovsky 
			custom_effect_tooltip = available_theorist
			show_ideas_tooltip = georgy_zhukov

			custom_effect_tooltip = unlock_propaganda_campaign_tt
			unlock_decision_tooltip = SOV_propaganda_heroes_forward
			custom_effect_tooltip = unlock_propaganda_campaign_slot_tt
			SOV_unlock_propaganda_campaign_slot_effect = yes

			custom_effect_tooltip = kamikaze_focus_tooltip
			hidden_effect = {
				set_rule = {
					can_use_kamikaze_pilots = yes
				}
			}
		}
	}

	focus = {
		id = SOV_revive_the_stakhanovite_movement
		icon = GFX_goal_italy_establish_the_sme
		prerequisite = { focus = SOV_positive_heroism }
		x = 0
		y = 1
		relative_position_id = SOV_positive_heroism
		cost = 10
		
		search_filters = {FOCUS_FILTER_INDUSTRY}

		completion_reward = {
			add_ideas = SOV_stakhanovite_movement
		}
	}

	focus = {
		id = SOV_war_heroes
		icon = GFX_goal_ivan_konev
		prerequisite = { focus = SOV_revive_the_stakhanovite_movement }
		x = 0
		y = 1
		relative_position_id = SOV_revive_the_stakhanovite_movement
		cost = 10

		completion_reward = {
			add_ideas = SOV_war_heroes_ns

			if = {
				limit = {
					SOV_georgy_zhukov = {
						NOT = { has_character_flag = SOV_character_purged_flag }
						is_corps_commander = yes
					}
				}
				SOV_georgy_zhukov = {
					promote_leader = yes
				}
			}
			else = {
				random_army_leader = {
					limit = {
						NOT = { has_character_flag = SOV_potential_target_flag }
						is_corps_commander = yes
						NOT = { is_character = SOV_konstantin_rokossovsky }
						NOT = { is_character = SOV_ivan_konev }
					}
					promote_leader = yes
				}
			}
			if = {
				limit = {
					SOV_konstantin_rokossovsky = {
						NOT = { has_character_flag = SOV_character_purged_flag }
						is_corps_commander = yes
					}
				}
				SOV_konstantin_rokossovsky = {
					promote_leader = yes
				}
			}
			else = {
				random_army_leader = {
					limit = {
						NOT = { has_character_flag = SOV_potential_target_flag }
						is_corps_commander = yes
						NOT = { is_character = SOV_georgy_zhukov }
						NOT = { is_character = SOV_ivan_konev }
					}
					promote_leader = yes
				}
			}
			if = {
				limit = {
					SOV_ivan_konev = {
						NOT = { has_character_flag = SOV_character_purged_flag }
						is_corps_commander = yes
					}
				}
				SOV_ivan_konev = {
					promote_leader = yes
				}
			}
			else = {
				random_army_leader = {
					limit = {
						NOT = { has_character_flag = SOV_potential_target_flag }
						is_corps_commander = yes
						NOT = { is_character = SOV_georgy_zhukov }
						NOT = { is_character = SOV_konstantin_rokossovsky }
					}
					promote_leader = yes
				}
			}
		}
	}

	focus = {
		id = SOV_collectivist_propaganda
		icon = GFX_goal_generic_worker_support
		prerequisite = { focus = SOV_expand_the_agitprop }
		x = 0
		y = 1
		relative_position_id = SOV_expand_the_agitprop
		cost = 10

		mutually_exclusive = { focus = SOV_positive_heroism }
		
		search_filters = {FOCUS_FILTER_MANPOWER FOCUS_FILTER_PROPAGANDA}

		completion_reward = {
			add_political_power = 25
			add_ideas = SOV_collectivist_propaganda_ns

			custom_effect_tooltip = unlock_propaganda_campaign_tt
			unlock_decision_tooltip = SOV_propaganda_for_the_motherland
			custom_effect_tooltip = unlock_propaganda_campaign_slot_tt
			SOV_unlock_propaganda_campaign_slot_effect = yes
		}
	}

	focus = {
		id = SOV_socialist_emulation
		icon = GFX_goal_generic_soviet_construction
		prerequisite = { focus = SOV_collectivist_propaganda }
		x = 0
		y = 1
		relative_position_id = SOV_collectivist_propaganda
		cost = 10
		
		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH}

		completion_reward = {
			add_ideas = SOV_socialist_emulation_1_ns
		}
	}

	focus = {
		id = SOV_socialist_realism
		icon = GFX_focus_YUG_pan_slavic_congress
		prerequisite = { focus = SOV_socialist_emulation }
		x = 0
		y = 1
		relative_position_id = SOV_socialist_emulation
		cost = 10
		
		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_POLITICAL}

		completion_reward = {
			swap_ideas = {
				remove_idea = SOV_socialist_emulation_1_ns
				add_idea = SOV_socialist_emulation_2_ns
			}
		}
	}

	focus = {
		id = SOV_the_komsomol
		icon = GFX_goal_communist_revolt
		prerequisite = { focus = SOV_expand_the_agitprop }
		x = 2
		y = 1
		relative_position_id = SOV_expand_the_agitprop
		cost = 5
		
		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_PROPAGANDA}

		completion_reward = {
			add_political_power = 50
			add_popularity = {
				ideology = communism
				popularity = 0.1
			}

			custom_effect_tooltip = unlock_propaganda_campaign_tt
			unlock_decision_tooltip = SOV_propaganda_knowledge
			unlock_decision_tooltip = SOV_propaganda_builders_of_communism
			unlock_decision_tooltip = SOV_propaganda_sweep_scum_out
			custom_effect_tooltip = unlock_propaganda_campaign_slot_tt
			SOV_unlock_propaganda_campaign_slot_effect = yes
		}
	}

	focus = {
		id = SOV_militarized_schools
		icon = GFX_goal_generic_army_doctrines
		prerequisite = { focus = SOV_the_komsomol }
		x = 0
		y = 2
		relative_position_id = SOV_the_komsomol
		cost = 7.2
		ai_will_do = {
			factor = 2
			modifier = {
				factor = 15
				has_war = yes
			}				
		}

		available_if_capitulated = yes

		completion_reward = {
			army_experience = 5
			every_army_leader = {
				add_planning = 1
			}
			add_ideas = militarized_schools
			add_doctrine_cost_reduction = {
				name = SOV_militarized_schools
				uses = 1
				cost_reduction = 0.5
				category = land_doctrine
            }
		}
		search_filters = { FOCUS_FILTER_RESEARCH FOCUS_FILTER_MANPOWER }
	}

	focus = {
		id = SOV_patriarch_of_all_russia
		icon = GFX_focus_SOV_patriarch_of_all_russia
		prerequisite = { focus = SOV_war_heroes focus = SOV_socialist_realism }
		x = 1
		y = 1
		relative_position_id = SOV_war_heroes
		cost = 5
		
		search_filters = {FOCUS_FILTER_STABILITY}

		completion_reward = {
			add_stability = 0.1

			custom_effect_tooltip = available_political_advisor
			show_ideas_tooltip = SOV_patriarch_sergy
		}
	}



########  #######  ########  ######## ####  ######   ##    ##     ######   #######  ##     ## ##     ## #### ######## 
##       ##     ## ##     ## ##        ##  ##    ##  ###   ##    ##    ## ##     ## ###   ### ###   ###  ##  ##       
##       ##     ## ##     ## ##        ##  ##        ####  ##    ##       ##     ## #### #### #### ####  ##  ##       
######   ##     ## ########  ######    ##  ##   #### ## ## ##    ##       ##     ## ## ### ## ## ### ##  ##  ######   
##       ##     ## ##   ##   ##        ##  ##    ##  ##  ####    ##       ##     ## ##     ## ##     ##  ##  ##       
##       ##     ## ##    ##  ##        ##  ##    ##  ##   ###    ##    ## ##     ## ##     ## ##     ##  ##  ##       
##        #######  ##     ## ######## ####  ######   ##    ##     ######   #######  ##     ## ##     ## #### ######## 



	focus = {
		id = SOV_the_comintern
		icon = GFX_goal_generic_communist_pride
		prerequisite = { focus = SOV_the_path_of_marxism_leninism }
		x = 9
		y = 0
		relative_position_id = SOV_addressing_internal_affairs
		cost = 5

		allow_branch = {
			if = {
				limit = {
					has_game_rule = {
						rule = obsolete_focus_branches_visibility
						option = HIDE
					}
				}
				NOT = { has_completed_focus = SOV_beaten_but_not_defeated }
				NOT = { has_completed_focus = SOV_form_a_fifth_column }
			}
		}
		
		search_filters = {FOCUS_FILTER_POLITICAL}

		completion_reward = {
			add_political_power = 50
			add_popularity = {
				ideology = communism
				popularity = 0.05
			}
		}
	}

	focus = {
		id = SOV_development_aid_for_eastern_allies
		icon = GFX_goal_generic_construct_civilian
		prerequisite = { focus = SOV_the_comintern }
		x = -5
		y = 1
		relative_position_id = SOV_the_comintern
		cost = 5

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_civil_war = yes
			}	
		}

		available = {
			any_allied_country = {
				capital_scope = { is_on_continent = asia }
				is_major = no
			}
			num_of_civilian_factories_available_for_projects > 2
			is_subject = no
		}

		select_effect = {
			add_ideas = SOV_development_of_eastern_allies
		}

		completion_reward = {
			#Tooltip purposes (Select Effect)
			custom_effect_tooltip = SOV_focus_select_effect_tt
			effect_tooltip = {
				add_ideas = SOV_development_of_eastern_allies
			}

			#(Complete Effect)
			custom_effect_tooltip = SOV_focus_complete_effect_tt
			every_other_country = {
				limit = {
					is_in_faction_with = ROOT
					capital_scope = { is_on_continent = asia }
					is_major = no
				}
				country_event = { id = NSB_soviet_foreign_politics_events.10 hours = 2 random_hours = 1 }
				custom_effect_tooltip = if_they_accept
				custom_effect_tooltip = SOV_development_aid_for_eastern_allies_tt
			}
			hidden_effect = {
				remove_ideas = SOV_development_of_eastern_allies
			}
		}
	}

	focus = {
		id = SOV_war_measures_in_the_east
		icon = GFX_goal_generic_peasant_army
		prerequisite = { focus = SOV_development_aid_for_eastern_allies }
		x = 0
		y = 1
		relative_position_id = SOV_development_aid_for_eastern_allies
		cost = 5

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_civil_war = yes
			}	
		}

		available = {
			is_subject = no
		}

		completion_reward = {
			custom_effect_tooltip = SOV_war_measures_scope_tt
			every_other_country = {
				limit = {
					is_in_faction_with = ROOT
					capital_scope = { is_on_continent = asia }
					is_major = no
				}
				country_event = { id = NSB_soviet_foreign_politics_events.11 hours = 2 random_hours = 1 }
				custom_effect_tooltip = if_they_accept
				effect_tooltip = {
					add_timed_idea = { idea = SOV_war_measures_allies days = 1095 }
				}
			}
		}
	}

	focus = {
		id = SOV_annex_tannu_tuva
		icon = GFX_focus_generic_treaty
		prerequisite = { focus = SOV_war_measures_in_the_east }
		x = -1
		y = 1
		relative_position_id = SOV_war_measures_in_the_east
		cost = 5

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_civil_war = yes
			}	
		}
		
		available = { 
			is_subject = no
			TAN = {
				exists = yes
				is_subject = no
			}
			if = {
				limit = {
					MON = {
						has_completed_focus = MON_cooperation_with_kuomintang
					}
				}
				NOT = {
					has_active_mission = MON_the_fate_of_tuva
				}
			}
		}

		bypass = {
			any_country = {
				OR = {
					tag = ROOT
					is_subject_of = ROOT
				}
				controls_state = 329
			}
		}
		
		search_filters = {FOCUS_FILTER_ANNEXATION}

		completion_reward = {
			TAN = {	country_event = { id = soviet.14 } }
		}
	}

	focus = {
		id = SOV_fortify_mongolian_border
		icon = GFX_goal_generic_construct_military
		prerequisite = { focus = SOV_war_measures_in_the_east }
		x = 1
		y = 1
		relative_position_id = SOV_war_measures_in_the_east
		cost = 5

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_civil_war = yes
			}	
		}
		
		available = {
			MON = {
				is_in_faction_with = ROOT
				has_full_control_of_state = 330
				has_full_control_of_state = 819
				has_full_control_of_state = 817
				has_full_control_of_state = 818

			}
			is_subject = no
		}

		completion_reward = {
			MON = { country_event = { id = NSB_soviet_foreign_politics_events.12 hours = 2 random_hours = 1 } }
			custom_effect_tooltip = if_they_accept
			custom_effect_tooltip = SOV_fortify_mongolian_border_forts_tt
		}
	}

	focus = {
		id = SOV_send_military_advisors_to_spain
		icon = GFX_focus_intervention_spain_republic
		prerequisite = { focus = SOV_the_comintern }
		x = -3
		y = 1
		relative_position_id = SOV_the_comintern
		cost = 5

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_civil_war = yes
			}	
		}
		
		available = {
			has_civil_war = no
			OR = {
				has_completed_focus = SOV_the_centre
				has_completed_focus = SOV_the_left_opposition
				has_completed_focus = SOV_the_right_opposition
			}
			if = {
				limit = {
					has_dlc = "La Resistance"
				}
				SPR_scw_in_progress = yes
				if = {
					limit = {
						NOT = { has_global_flag = spanish_civil_war }
					}
					custom_trigger_tooltip = {
					    tooltip = POR_spr_tooltip_country_exist_tt
					    country_exists = SPR
				    }
				    custom_trigger_tooltip = {
					    tooltip = POR_spr_tooltip_at_peace_tt
						NOT = { has_war_with = SPR }
				    }
				}
				else = {
					if = {
						limit = {
							has_completed_focus = SOV_covert_support_for_spanish_poum
						}
						country_exists = SPC
						NOT = { has_war_with = SPC }
					}
					else = {
						country_exists = SPD
						NOT = { has_war_with = SPD }
					}
				}
			}
			else = {
				any_other_country = {
					original_tag = SPR
					has_civil_war = yes
					NOT = { has_war_with = ROOT }
					OR = {
						has_government = democratic
						has_government = communism
					}
				}
			}
			has_government = communism
			is_subject = no
		}

		completion_reward = {
			add_timed_idea = { idea = SOV_military_advisors_in_spain days = 1095 }
			
			if = {
				limit = {
					has_dlc = "La Resistance"
					has_completed_focus = SOV_covert_support_for_spanish_poum
					has_completed_focus = SOV_coup_detat
					has_global_flag = SPR_anarchist_uprising_flag
					country_exists = SPC
					SPC = { has_completed_focus = SPR_the_anti_fascist_workers_revolution }
				}
				SPC = {
					hidden_effect = { country_event = { id = NSB_soviet_foreign_politics_events.20 hours = 2 random_hours = 1 } }
					effect_tooltip = { add_timed_idea = {idea = SOV_soviet_advisors_spr days = 1095 } }
				}
			}
			else_if = {
				limit = {
					has_dlc = "La Resistance"
					country_exists = SPD
				}
				SPD = {
					hidden_effect = { country_event = { id = NSB_soviet_foreign_politics_events.20 hours = 2 random_hours = 1 } }
					effect_tooltip = { add_timed_idea = {idea = SOV_soviet_advisors_spr days = 1095 } }
				}
			}
			else_if = {
				limit = {
					has_dlc = "La Resistance"
					NOT = { country_exists = SPD }
				}
				custom_effect_tooltip = SOV_aid_republican_spain_tt
				effect_tooltip = { add_timed_idea = {idea = SOV_soviet_advisors_spr days = 1095 } }
			}
			else = {
				random_country = {
					limit = {
						original_tag = SPR
						has_civil_war = yes
						OR = {
							has_government = communism
							has_government = democratic
						}
					}
					hidden_effect = { country_event = { id = NSB_soviet_foreign_politics_events.20 hours = 2 random_hours = 1 } }
					effect_tooltip = { add_timed_idea = {idea = SOV_soviet_advisors_spr days = 1095 } }
				}
			}
			# A Spanish General will join the USSR if his side loses the SCW
			if = {
				limit = {
					has_dlc = "La Resistance"
				}
				custom_effect_tooltip = SOV_send_military_advisors_to_spain_generals_tt
				set_country_flag = SOV_spanish_refugee_generals_welcome_flag
			}
		}
	}

	focus = {
		id = SOV_policy_of_collective_security
		icon = GFX_goal_anschluss
		prerequisite = { focus = SOV_the_comintern }
		x = -1
		y = 1
		relative_position_id = SOV_the_comintern
		cost = 5

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_civil_war = yes
			}	
		}
		
		mutually_exclusive = { focus = SOV_policy_of_individual_security }
		
		search_filters = {FOCUS_FILTER_POLITICAL}

		completion_reward = {
			add_political_power = 35
			if = {
				limit = {
					SOV_maksim_litvinov = {
						NOT = {
							has_character_flag = SOV_targeted_for_purge_flag
						}
					}
				}
				custom_effect_tooltip = available_political_advisor
				show_ideas_tooltip = SOV_maksim_litvinov
			}
		}
	}

	focus = {
		id = SOV_anti_fascist_policies
		icon = GFX_focus_generic_anti_fascist_diplomacy
		prerequisite = { focus = SOV_policy_of_collective_security }
		x = 0
		y = 1
		relative_position_id = SOV_policy_of_collective_security
		cost = 5
		
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_civil_war = yes
			}	
		}
				
		search_filters = {FOCUS_FILTER_PROPAGANDA}

		completion_reward = {
			add_named_threat = { threat = 0.2 name = SOV_anti_fascist_diplomacy_t }
			if = {
				limit = {
						has_idea = civilian_economy
					}
				swap_ideas = { remove_idea = civilian_economy add_idea = low_economic_mobilisation  }
			}
			every_other_country = {
				limit = {
					is_major = yes
					OR = {
						has_government = democratic
						has_government = communism
					}
					NOT = { has_war_with = ROOT }
				}
				add_opinion_modifier = { target = SOV modifier = SOV_anti_fascist_policies_good } 
			}

			every_other_country = {
				limit = {
					is_major = yes
					has_government = fascism
				}
				add_opinion_modifier = { target = SOV modifier = SOV_anti_fascist_policies_bad } 
			}

			if = {
				limit = {
					has_dlc = "La Resistance"
					AST = {
						NOT = { has_government = communism }
					} 	
				}
				create_operative_leader = {
					name = "Rupert Lockwood"
					portrait_path = gfx/leaders/Europe/portrait_europe_generic_operative_male_10.dds 
					traits = {  }
					bypass_recruitment = no
					available_to_spy_master = yes
					female = yes
					nationalities = { SOV AST }
				}					
			}

			if = {
				limit = {
					has_government = communism
				}
				custom_effect_tooltip = unlock_propaganda_campaign_tt
				unlock_decision_tooltip = SOV_propaganda_anti_fascism
				custom_effect_tooltip = propaganda_campaign_requirement_tt
			}
		}
	}

	focus = {
		id = SOV_seek_a_defense_pact_with_the_allies
		icon = GFX_focus_hol_the_fourth_ally
		prerequisite = { focus = SOV_anti_fascist_policies }
		x = 0
		y = 1
		relative_position_id = SOV_anti_fascist_policies
		cost = 5

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_civil_war = yes
			}	
		}
		
		bypass = {
			OR = {
				NOT = { country_exists = FRA }
				FRA = { has_capitulated = yes }
			}
			NOT = {
				any_other_country = {
					is_faction_leader = yes
					SOV_is_valid_collective_security_target = yes
				}
			}
		}

		available = {
			NOT = { has_country_flag = SOV_paranoia_system_active_flag }
			is_subject = no
		}

		completion_reward = {
			if = { #FRA is default target
				limit = {
					country_exists = FRA
					FRA = {	SOV_is_valid_collective_security_target = yes }
				}
				set_variable = { SOV_collective_security_target = FRA }
				FRA = { country_event = { id = NSB_soviet_policies_of_collective_security.1 hours = 8 random_hours = 4 } }
			}
			else_if = { #ENG is first fallback target
				limit = {
					country_exists = ENG
					is_faction_leader = yes
					ENG = {	SOV_is_valid_collective_security_target = yes }
				}
				set_variable = { SOV_collective_security_target = FRA }
				ENG = { country_event = { id = NSB_soviet_policies_of_collective_security.1 hours = 8 random_hours = 4 } }
			}
			else_if = { #Non-Fascist European faction leader is next
				limit = {
					any_country = {
						is_faction_leader = yes
						capital_scope = { is_on_continent = europe }
						SOV_is_valid_collective_security_target = yes
					}
				}
				random_other_country = {
					limit = {
						is_faction_leader = yes
						capital_scope = { is_on_continent = europe }
						SOV_is_valid_collective_security_target = yes
					}
					ROOT = { set_variable = { SOV_collective_security_target = PREV } }
					country_event = { id = NSB_soviet_policies_of_collective_security.1 hours = 8 random_hours = 4 }
				}
			}
			else_if = { #Alright I don't really care anymore, pick whoever is left alive
				limit = {
					any_other_country = {
						is_faction_leader = yes
						SOV_is_valid_collective_security_target = yes
					}
				}
				random_other_country = {
					limit = {
						is_faction_leader = yes
						SOV_is_valid_collective_security_target = yes
					}
					ROOT = { set_variable = { SOV_collective_security_target = PREV } }
					country_event = { id = NSB_soviet_policies_of_collective_security.1 hours = 8 random_hours = 4 }
				}
			}

			custom_effect_tooltip = SOV_seek_a_defense_pact_with_the_allies_event_effects_tt

			if = {
				limit = {
					country_exists = POL
					POL = { SOV_is_valid_collective_security_target = yes }
					var:SOV_collective_security_target = {
						capital_scope = { is_on_continent = europe }
					}
				}
				custom_effect_tooltip = SOV_seek_a_defense_pact_with_the_allies_poland_tt
			}
		}
	}

	focus = {
		id = SOV_the_khakimov_proposal
		icon = GFX_focus_generic_befriend_saudi_arabia
		prerequisite = { focus = SOV_seek_a_defense_pact_with_the_allies }
		x = -1
		y = 1
		relative_position_id = SOV_seek_a_defense_pact_with_the_allies
		cost = 5

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_civil_war = yes
			}	
		}
		
		available = {
			is_subject = no
			country_exists = SAU
			NOT = { has_war_with = SAU }
		}

		completion_reward = {
			SAU = {
				add_ideas = SOV_ambassador_karim_khakimov #adds +35 communism acceptance and -50 for other ideologies
				add_opinion_modifier = { target = SOV modifier = SOV_cordial_relations_developed_by_soviet_diplomat } 
				hidden_effect = {
					country_event = { id = NSB_soviet_foreign_politics_events.211 hours = 8 random_hours = 4 }
				}
			}
			activate_targeted_decision = { target = SAU decision = SOV_pressure_country_government_middle_east }
			activate_targeted_decision = { target = SAU decision = SOV_promote_ideology_rallies_middle_east }
		}
	}

	focus = {
		id = SOV_eradicate_western_fascism
		icon = GFX_focus_focus_fra_fascist_threat
		prerequisite = { focus = SOV_seek_a_defense_pact_with_the_allies }
		x = 0
		y = 2
		relative_position_id = SOV_seek_a_defense_pact_with_the_allies
		cost = 10

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_civil_war = yes
			}	
		}
		
		available = {
			NOT = { has_country_flag = SOV_paranoia_system_active_flag }
			any_country = {
				OR = {
					tag = ENG
					tag = FRA
					tag = GER
					tag = ITA
				}
				has_government = fascism
				is_major = yes
			}
			is_subject = no
		}

		completion_reward = {
			add_timed_idea = { idea = SOV_face_western_fascism_ns days = 365 }
			
			if = {
				limit = {
					ENG = {
						has_government = fascism
					}
				}
				hidden_effect = { add_ideas = SOV_targeted_bonus_against_ENG }
				create_wargoal = {
					type = puppet_wargoal_focus
					target = ENG
				}
			}
			if = {
				limit = {
					FRA = {
						has_government = fascism
					}
				}
				hidden_effect = { add_ideas = SOV_targeted_bonus_against_FRA }
				create_wargoal = {
					type = puppet_wargoal_focus
					target = FRA
				}
			}
			if = {
				limit = {
					GER = {
						has_government = fascism
					}
				}
				hidden_effect = { add_ideas = SOV_targeted_bonus_against_GER }
				create_wargoal = {
					type = puppet_wargoal_focus
					target = GER
				}
			}
			if = {
				limit = {
					ITA = {
						has_government = fascism
					}
				}
				hidden_effect = { add_ideas = SOV_targeted_bonus_against_ITA }
				create_wargoal = {
					type = puppet_wargoal_focus
					target = ITA
				}
			}
		}
	}

	focus = {
		id = SOV_policy_of_individual_security
		icon = GFX_goal_generic_defence
		prerequisite = { focus = SOV_the_comintern }
		x = 1
		y = 1
		relative_position_id = SOV_the_comintern
		cost = 5

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_civil_war = yes
			}	
		}
		
		mutually_exclusive = { focus = SOV_policy_of_collective_security }
		
		search_filters = {FOCUS_FILTER_POLITICAL}

		completion_reward = {
			add_political_power = 35

			custom_effect_tooltip = available_political_advisor
			show_ideas_tooltip = SOV_vyacheslav_molotov
		}
	}

	focus = {
		id = SOV_approach_germany
		icon = GFX_goal_germanic_brotherhood_full
		prerequisite = { focus = SOV_policy_of_individual_security }
		prerequisite = { focus = SOV_anti_capitalist_policies }
		x = 0
		y = 2
		relative_position_id = SOV_policy_of_individual_security
		cost = 5

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_civil_war = yes
			}	
		}
		
		available = {
			NOT = { has_country_flag = SOV_paranoia_system_active_flag }
			country_exists = GER
			GER = { SOV_is_valid_subject = yes }
			NOT = { has_war_with = GER }
			is_subject = no
		}

		bypass = {
			NOT = { country_exists = GER }
		}

		completion_reward = {
			GER = { country_event = { id = NSB_soviet_soviet_german_trade_agreement.1 hours = 1 } }

			custom_effect_tooltip = if_they_accept #This will also make GER more likely to take Molotov-Ribbentrop pact and less to take Anti-Soviet Pact
			effect_tooltip = {
				if = {
					limit = {
						has_dlc = "Man the Guns"
					}
					if = {
						limit = {
							NOT = { has_tech = basic_ship_hull_cruiser }
						}
						set_technology = { basic_ship_hull_cruiser = 1 }
					}
					if = {
						limit = {
							NOT = { has_tech = basic_cruiser_armor_scheme }
						}
						set_technology = { basic_cruiser_armor_scheme = 1 }
					}
					if = {
						limit = {
							has_tech = basic_medium_battery
						}
						create_equipment_variant = {
							name = "Hipper Class"
							type = ship_hull_cruiser_2
							name_group = SOV_CA_HISTORICAL
							parent_version = 0
							modules = {
								fixed_ship_battery_slot = ship_medium_battery_2
								fixed_ship_anti_air_slot = ship_anti_air_1
								fixed_ship_fire_control_system_slot = ship_fire_control_system_0
								fixed_ship_radar_slot = empty
								fixed_ship_engine_slot = cruiser_ship_engine_1
								fixed_ship_secondaries_slot = empty
								fixed_ship_armor_slot = ship_armor_cruiser_2
								front_1_custom_slot = ship_anti_air_1
								mid_1_custom_slot = ship_torpedo_1
								mid_2_custom_slot = ship_airplane_launcher_1
								rear_1_custom_slot = ship_medium_battery_2
							}
						}
					}
					else = {
						create_equipment_variant = {
							name = "Hipper Class"
							type = ship_hull_cruiser_2
							name_group = SOV_CA_HISTORICAL
							parent_version = 0
							modules = {
								fixed_ship_battery_slot = ship_medium_battery_1
								fixed_ship_anti_air_slot = ship_anti_air_1
								fixed_ship_fire_control_system_slot = ship_fire_control_system_0
								fixed_ship_radar_slot = empty
								fixed_ship_engine_slot = cruiser_ship_engine_1
								fixed_ship_secondaries_slot = empty
								fixed_ship_armor_slot = ship_armor_cruiser_2
								front_1_custom_slot = ship_anti_air_1
								mid_1_custom_slot = ship_torpedo_1
								mid_2_custom_slot = ship_airplane_launcher_1
								rear_1_custom_slot = ship_medium_battery_1
							}
						}
					}
					
					# CA: Lützow -> Petropavlovsk
					add_equipment_production = {
						equipment = {
							type = ship_hull_cruiser_2
							creator = "SOV"
							version_name = "Hipper Class"
						}
						name = "Petropavlovsk"
						requested_factories = 1
						progress = 0.5
						amount = 1
					}

					if = { #Default name
						limit = {
							has_government = communism
						}
						add_tech_bonus = {
							name = NSB_soviet_soviet_german_trade_agreement_tech_bonus_name
							bonus = 0.5
							uses = 2
							category = ship_modules_tech
							category = bb_tech
							category = dd_tech
						}
					}
					else = { #Alt name
						add_tech_bonus = {
							name = NSB_soviet_soviet_german_trade_agreement_tech_bonus_name_alt
							bonus = 0.5
							uses = 2
							category = ship_modules_tech
							category = bb_tech
							category = dd_tech
						}
					}
				}
				else = { #No MTG
					if = {
						limit = {
							NOT = { has_tech = basic_heavy_cruiser }
						}
						set_technology = { basic_heavy_cruiser = 1 }
					}
					create_equipment_variant = {
						name = "Hipper Class"
						type = heavy_cruiser_2
						parent_version = 0
						upgrades = {
							ship_reliability_upgrade = 1
							ship_engine_upgrade = 1
							ship_armor_upgrade = 2
							ship_gun_upgrade = 2
						}
					}

					add_equipment_production = {
						equipment = {
							type = heavy_cruiser_2
							creator = "SOV"
						}
						requested_factories = 1
						progress = 0.5
						amount = 1
					}

					if = { #Default name
						limit = {
							has_government = communism
						}
						add_tech_bonus = {
							name = NSB_soviet_soviet_german_trade_agreement_tech_bonus_name
							bonus = 0.5
							uses = 2
							category = ca_tech
							category = bb_tech
							category = dd_tech
						}
					}
					else = { #Alt name
						add_tech_bonus = {
							name = NSB_soviet_soviet_german_trade_agreement_tech_bonus_name_alt
							bonus = 0.5
							uses = 2
							category = ca_tech
							category = bb_tech
							category = dd_tech
						}
					}
				}

				if = { #Default name
					limit = {
						has_government = communism
					}
					add_tech_bonus = {
						name = NSB_soviet_soviet_german_trade_agreement_tech_bonus_name
						bonus = 0.5
						uses = 2
						category = air_equipment
					}
				}
				else = { #Alt name
					add_tech_bonus = {
						name = NSB_soviet_soviet_german_trade_agreement_tech_bonus_name_alt
						bonus = 0.5
						uses = 2
						category = air_equipment
					}
				}

				#Effects to Germans
				GER = {
					add_timed_idea = { idea = SOV_soviet_german_trade_agreement days = 545 } #Technically 1 year but really 18 months for Soviet payment 
					capital_scope = {
						add_dynamic_modifier = { modifier = SOV_soviet_imports }
					}
				}

				add_opinion_modifier = {
					target = GER
					modifier = SOV_strengthened_relations_with_us
				}
				GER = {
					add_opinion_modifier = {
						target = ROOT
						modifier = SOV_strengthened_relations_with_us
					}
				}
			}
		}
	}

	focus = {
		id = SOV_liberation_of_the_european_proletariat
		icon = GFX_goal_sov_east_vs_west
		prerequisite = { focus = SOV_approach_germany }
		x = 0
		y = 2
		relative_position_id = SOV_approach_germany
		cost = 10

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_civil_war = yes
			}	
		}
		
		available = {
			NOT = { has_country_flag = SOV_paranoia_system_active_flag }
			any_country = {
				OR = {
					tag = ENG
					tag = FRA
					tag = GER
					tag = ITA
				}
				has_government = democratic
				is_major = yes
				is_subject = no
			}
		}

		completion_reward = {
			add_timed_idea = { idea = SOV_liberation_of_the_european_proletariat_ns days = 365 }
			
			if = {
				limit = {
					ENG = {
						has_government = democratic
					}
				}
				hidden_effect = { add_ideas = SOV_targeted_bonus_against_ENG }
				create_wargoal = {
					type = puppet_wargoal_focus
					target = ENG
				}
			}
			if = {
				limit = {
					FRA = {
						has_government = democratic
					}
				}
				hidden_effect = { add_ideas = SOV_targeted_bonus_against_FRA }
				create_wargoal = {
					type = puppet_wargoal_focus
					target = FRA
				}
			}
			if = {
				limit = {
					GER = {
						has_government = democratic
					}
				}
				hidden_effect = { add_ideas = SOV_targeted_bonus_against_GER }
				create_wargoal = {
					type = puppet_wargoal_focus
					target = GER
				}
			}
			if = {
				limit = {
					ITA = {
						has_government = democratic
					}
				}
				hidden_effect = { add_ideas = SOV_targeted_bonus_against_ITA }
				create_wargoal = {
					type = puppet_wargoal_focus
					target = ITA
				}
			}

		}
	}



########  #######  ########  ######## ####  ######   ##    ##    ########   #######  ##       #### ######## ####  ######   ######  
##       ##     ## ##     ## ##        ##  ##    ##  ###   ##    ##     ## ##     ## ##        ##     ##     ##  ##    ## ##    ## 
##       ##     ## ##     ## ##        ##  ##        ####  ##    ##     ## ##     ## ##        ##     ##     ##  ##       ##       
######   ##     ## ########  ######    ##  ##   #### ## ## ##    ########  ##     ## ##        ##     ##     ##  ##        ######  
##       ##     ## ##   ##   ##        ##  ##    ##  ##  ####    ##        ##     ## ##        ##     ##     ##  ##             ## 
##       ##     ## ##    ##  ##        ##  ##    ##  ##   ###    ##        ##     ## ##        ##     ##     ##  ##    ## ##    ## 
##        #######  ##     ## ######## ####  ######   ##    ##    ##         #######  ######## ####    ##    ####  ######   ######  



	focus = {
		id = SOV_anti_capitalist_policies
		icon = GFX_focus_spr_class_war
		prerequisite = { focus = SOV_the_comintern }
		x = 2
		y = 1
		relative_position_id = SOV_policy_of_individual_security
		cost = 5

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_civil_war = yes
			}	
		}
		
		available = {
			NOT = { has_government = democratic }
		}

		completion_reward = {
			add_named_threat = { threat = 0.5 name = SOV_anti_capitalist_diplomacy_t }
			if = {
				limit = {
						has_idea = civilian_economy
					}
				swap_ideas = { remove_idea = civilian_economy add_idea = low_economic_mobilisation  }
			}
			every_other_country = {
				limit = {
					is_major = yes
					OR = {
						has_government = fascism
						has_government = communism
					}
					NOT = { has_war_with = ROOT }
				}
				add_opinion_modifier = { target = SOV modifier = SOV_anti_capitalist_policies_good } 
			}

			every_other_country = {
				limit = {
					is_major = yes
					has_government = democratic
				}
				add_opinion_modifier = { target = SOV modifier = SOV_anti_capitalist_policies_bad } 
			}

			if = {
				limit = {
					has_government = communism
				}
				custom_effect_tooltip = unlock_propaganda_campaign_tt
				unlock_decision_tooltip = SOV_propaganda_anti_capitalism
				custom_effect_tooltip = propaganda_campaign_requirement_tt
			}
		}
		search_filters = { FOCUS_FILTER_PROPAGANDA }
	}

	focus = {
		id = SOV_the_fight_for_the_pacific
		icon = GFX_focus_generic_navy_battleship2
		prerequisite = { focus = SOV_anti_capitalist_policies }
		x = 0
		y = 1
		relative_position_id = SOV_anti_capitalist_policies
		cost = 10

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_civil_war = yes
			}	
		}
		
		available = {
			OR = {
				has_full_control_of_state = 408
				has_full_control_of_state = 409
				has_full_control_of_state = 637
			}
			is_subject = no
		}
		
		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH}

		completion_reward = {
			#VLADIVOSTOK
			if = {
				limit = {
					408 = {
						is_controlled_by = ROOT
						free_building_slots = {
							building = dockyard
							size > 1
							include_locked = yes
						}
					}
				}
				408 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = dockyard
						level = 2
						instant_build = yes
					}
				}
			}
			else_if = {
				limit = {
					408 = {
						is_controlled_by = ROOT
						free_building_slots = {
							building = dockyard
							size > 0
							include_locked = yes
						}
					}
				}
				408 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = dockyard
						level = 1
						instant_build = yes
					}
				}
			}

			#KHABAROVSK
			if = {
				limit = {
					409 = {
						is_controlled_by = ROOT
						free_building_slots = {
							building = dockyard
							size > 1
							include_locked = yes
						}
					}
				}
				409 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = dockyard
						level = 2
						instant_build = yes
					}
				}
			}
			else_if = {
				limit = {
					409 = {
						is_controlled_by = ROOT
						free_building_slots = {
							building = dockyard
							size > 0
							include_locked = yes
						}
					}
				}
				409 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = dockyard
						level = 1
						instant_build = yes
					}
				}
			}

			#KAMCHATKA (PETROPAVLOVSK + COMMANDER ISLANDS)
			if = { #Dockyards
				limit = {
					637 = {
						is_controlled_by = ROOT #I know this is duplicated but tooltip is more readable this way
						free_building_slots = {
							building = dockyard
							size > 0
							include_locked = yes
						}
					}
				}
				637 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = dockyard
						level = 1
						instant_build = yes
					}
				}
			}
			if = { #Naval bases
				limit = {
					637 = {
						is_controlled_by = ROOT
						naval_base < 9
					}
				}
				637 = {
					add_building_construction = {
						type = naval_base
						level = 2
						instant_build = yes
						province = 4728
					}
					if = {
						limit = {
							ROOT = { has_tech = radio_detection }
							radar_station < 1
						}
						add_building_construction = {
							type = radar_station
							level = 1
							instant_build = yes
						}
					}
					else = {
						custom_effect_tooltip = SOV_reinforce_western_naval_bases_radar_tt
					}
				}
			}

			add_tech_bonus = {
				name = SOV_the_fight_for_the_pacific
				bonus = 1.0
				uses = 2
				category = cv_tech
				category = bc_tech
				category = bb_tech
				category = shbb_tech
			}
		}
	}

	focus = {
		id = SOV_recover_alaska
		icon = GFX_focus_SOV_recover_alaska
		prerequisite = { focus = SOV_the_fight_for_the_pacific }
		x = 0
		y = 1
		relative_position_id = SOV_the_fight_for_the_pacific
		cost = 10

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_civil_war = yes
			}
			modifier = {
				factor = 0
				USA = {
					NOT = {
						has_government = fascism
					}
				}
			}				
		}
		
		available = {
			is_subject = no
			NOT = { has_country_flag = SOV_paranoia_system_active_flag }
		}

		bypass = {
			463 = { is_owned_by = ROOT }
			650 = { is_owned_by = ROOT }
		}
		
		search_filters = {FOCUS_FILTER_ANNEXATION}

		completion_reward = {
			if = {
				limit = {
					463 = { NOT = { is_claimed_by = ROOT } }
				}
				add_state_claim = 463
			}
			if = {
				limit = {
					650 = { NOT = { is_claimed_by = ROOT } }
				}
				add_state_claim = 650
			}

			if = { #ONE CONTROLLER
				limit = {
					463 = {
						controller = {
							controls_state = 650
						}
					}
				}
				if = {
					limit = {
						463 = {
							controller = {
								NOT = { has_war_with = ROOT }
							}
						}
					}
					463 = {
						controller = {
							country_event = { id = NSB_soviet_foreign_politics_events.30 hours = 4 random_hours = 2 }
							custom_effect_tooltip = if_they_accept
							effect_tooltip = {
								ROOT = { transfer_state = 463 } #ALASKA
								ROOT = { transfer_state = 650 } #ATTU ISLAND
								add_opinion_modifier = {
									target = ROOT
									modifier = SOV_pressured_our_government
								}
							}
						}
					}
				}
			}
			else = { #TWO DIFFERENT CONTROLLERS
				if = {
					limit = {
						463 = {
							controller = {
								NOT = { has_war_with = ROOT }
							}
						}
					}
					463 = {
						controller = {
							country_event = { id = NSB_soviet_foreign_politics_events.30 hours = 4 random_hours = 2 }
							custom_effect_tooltip = if_they_accept
							effect_tooltip = {
								ROOT = { transfer_state = 463 } #ALASKA
								add_opinion_modifier = {
									target = ROOT
									modifier = SOV_pressured_our_government
								}
							}
						}
					}
				}
				if = {
					limit = {
						650 = {
							controller = {
								NOT = { has_war_with = ROOT }
							}
						}
					}
					650 = {
						controller = {
							country_event = { id = NSB_soviet_foreign_politics_events.30 hours = 4 random_hours = 2 }
							custom_effect_tooltip = if_they_accept
							effect_tooltip = {
								ROOT = { transfer_state = 650 } #ATTU ISLAND
								add_opinion_modifier = {
									target = ROOT
									modifier = SOV_pressured_our_government
								}
							}
						}
					}
				}
			}
		}
	}

	focus = {
		id = SOV_baltic_security
		icon = GFX_focus_SOV_baltic_security
		prerequisite = { focus = SOV_the_comintern }
		x = 3
		y = -1
		relative_position_id = SOV_anti_capitalist_policies
		cost = 5

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_civil_war = yes
			}	
		}
		
		bypass = {
			NOT = { has_country_flag = SOV_paranoia_system_active_flag }
			NOT = {
				country_exists = EST
				country_exists = LAT
				country_exists = LIT
			}
		}

		available = {
			OR = {
				NOT = { has_country_flag = SOV_paranoia_system_active_flag }  #TODO_Manu: Change for the inverse, "Political Paranoia has subsided"
			}
			is_subject = no
		}

		completion_reward = {
			if = {
				limit = {
					country_exists = EST
				}
				EST = {
					if = {
						limit = { ROOT = { has_government = fascism } }
						add_timed_idea = { idea = fascist_influence days = 1095 }
					}
					if = {
						limit = { ROOT = { has_government = democratic } }
						add_timed_idea = { idea = democratic_influence days = 1095 }
					}
					if = {
						limit = { ROOT = { has_government = communism } }
						add_timed_idea = { idea = communist_influence days = 1095 }
					}
					hidden_effect = {
						country_event = { id = generic.1 }
					}
				}
			}
			if = {
				limit = {
					country_exists = LAT
				}
				LAT = {
					if = {
						limit = { ROOT = { has_government = fascism } }
						add_timed_idea = { idea = fascist_influence days = 1095 }
					}
					if = {
						limit = { ROOT = { has_government = democratic } }
						add_timed_idea = { idea = democratic_influence days = 1095 }
					}
					if = {
						limit = { ROOT = { has_government = communism } }
						add_timed_idea = { idea = communist_influence days = 1095 }
					}
					hidden_effect = {
						country_event = { id = generic.1 }
					}
				}
			}
			if = {
				limit = {
					country_exists = LIT
				}
				LIT = {
					if = {
						limit = { ROOT = { has_government = fascism } }
						add_timed_idea = { idea = fascist_influence days = 1095 }
					}
					if = {
						limit = { ROOT = { has_government = democratic } }
						add_timed_idea = { idea = democratic_influence days = 1095 }
					}
					if = {
						limit = { ROOT = { has_government = communism } }
						add_timed_idea = { idea = communist_influence days = 1095 }
					}
					hidden_effect = {
						country_event = { id = generic.1 }
					}
				}
			}
		}
	}

	focus = {
		id = SOV_respect_baltic_self_determination
		icon = GFX_goal_SOV_true_baltic_freedom
		prerequisite = { focus = SOV_baltic_security }
		x = -1
		y = 1
		relative_position_id = SOV_baltic_security
		cost = 5

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_civil_war = yes
			}	
		}
		
		mutually_exclusive = { focus = SOV_claims_in_baltic }

		bypass = {
			NOT = {
				country_exists = EST
				country_exists = LAT
				country_exists = LIT
			}
		}

		available = {
			NOT = { has_country_flag = SOV_paranoia_system_active_flag }
			is_subject = no
		}

		completion_reward = {
			activate_targeted_decision = { target = EST decision = SOV_promote_ideology_rallies_baltic }
			activate_targeted_decision = { target = LAT decision = SOV_promote_ideology_rallies_baltic }
			activate_targeted_decision = { target = LIT decision = SOV_promote_ideology_rallies_baltic }
			activate_targeted_decision = { target = EST decision = SOV_pressure_country_government_baltic }
			activate_targeted_decision = { target = LAT decision = SOV_pressure_country_government_baltic }
			activate_targeted_decision = { target = LIT decision = SOV_pressure_country_government_baltic }
		}
	}

	focus = {
		id = SOV_claims_in_baltic
		icon = 	GFX_goal_SOV_baltic_aggression
		prerequisite = { focus = SOV_baltic_security }
		x = 1
		y = 1
		relative_position_id = SOV_baltic_security
		cost = 10

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				OR = {
					has_civil_war = yes
					date < 1939.1.1
				}
			}	
		}

		mutually_exclusive = { focus = SOV_respect_baltic_self_determination }

		available = {
			NOT = { has_country_flag = SOV_paranoia_system_active_flag }
			is_subject = no
			date > 1937.1.1
		}

		bypass = {
			all_state = {
				OR = {
					is_core_of = EST
					is_core_of = LAT
					is_core_of = LIT
				}
				NOT = { state = 188 }
				is_controlled_by = ROOT
			}
		}
		
		search_filters = {FOCUS_FILTER_ANNEXATION}

		completion_reward = {
			# Estonia + Latvia + Lithuania except Memel
			custom_effect_tooltip = SOV_claims_in_baltics_tt
			hidden_effect = {
				every_state = {
					limit = {
						OR = {
							AND = {
								NOT = {
									state = 188
								}
								region = 37
							}
							state = 784
						}
					}
					add_claim_by = ROOT
				}
			}
			#Activate targeted decisions
			unlock_decision_tooltip = SOV_send_ultimatum_to_baltic_countries

			add_named_threat = { threat = 1 name = SOV_claims_in_baltic }
		}
	}

	focus = {
		id = SOV_secure_leningrad
		icon = GFX_focus_fin_karjala_question
		prerequisite = { focus = SOV_respect_baltic_self_determination focus = SOV_claims_in_baltic }
		x = 0
		y = 1
		relative_position_id = SOV_respect_baltic_self_determination
		cost = 10
		
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_civil_war = yes
			}	
		}
		dynamic = yes 

		available = {
			NOT = { has_country_flag = SOV_paranoia_system_active_flag }
			is_subject = no
			195 = {		#sanity check if there is nothing to secure -> no reason for demands
				controls_or_subject_of = yes
			}
		}

		bypass = {
			146 = {									#basically a sanity check
				OR = {
					is_fully_controlled_by = ROOT	
					controller = {					#shall bypass if at war anyway
						has_war_with = ROOT
					}
				}
			}
		}
		
		search_filters = {FOCUS_FILTER_ANNEXATION}

		completion_reward = {
			add_state_claim = 146 # Karjala
			146 = {
				controller = {
					add_timed_idea = {
						idea = communist_pressure
						days = 365
					}
					country_event = { id = finland.1 hours = 16 random_hours = 8 }
				}
			}
		}
	}

	focus = {
		id = SOV_control_scandinavia
		icon = GFX_focus_generic_scandinavia_flags
		prerequisite = { focus = SOV_secure_leningrad }
		x = 0
		y = 1
		relative_position_id = SOV_secure_leningrad
		cost = 10

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_civil_war = yes
			}	
		}
		
		available = {
			NOT = { has_country_flag = SOV_paranoia_system_active_flag }
			is_subject = no
		}

		completion_reward = {
			every_other_country = {
				limit = {
					exists = yes
					NOT = { is_in_faction_with = ROOT }
					capital_scope = { 
						OR = {
							region = 13
							region = 12
							region = 191
							region = 192
							region = 11
							region = 10
							region = 9
							region = 206
							AND = {
								region = 6
								NOT = {
									state = 57
									state = 56
									state = 59
									state = 58
								}
							}
						}
					}  
				}
				add_timed_idea = {
					idea = communist_pressure
					days = 365
				}
				hidden_effect = {
					country_event = { id = generic.1 }
				}
			}

			custom_effect_tooltip = SOV_control_scandinavia_decisions_tt
			hidden_effect = {
				activate_targeted_decision = { target = FIN decision = SOV_promote_ideology_rallies_nordic }
				activate_targeted_decision = { target = SWE decision = SOV_promote_ideology_rallies_nordic }
				activate_targeted_decision = { target = NOR decision = SOV_promote_ideology_rallies_nordic }
				activate_targeted_decision = { target = DEN decision = SOV_promote_ideology_rallies_nordic }
				activate_targeted_decision = { target = FIN decision = SOV_pressure_country_government_nordic }
				activate_targeted_decision = { target = SWE decision = SOV_pressure_country_government_nordic }
				activate_targeted_decision = { target = NOR decision = SOV_pressure_country_government_nordic }
				activate_targeted_decision = { target = DEN decision = SOV_pressure_country_government_nordic }
			}
		}
	}

	focus = {
		id = SOV_claims_on_poland
		icon = GFX_goal_generic_occupy_states_ongoing_war
		prerequisite = { focus = SOV_respect_baltic_self_determination focus = SOV_claims_in_baltic }
		x = 0
		y = 1
		relative_position_id = SOV_claims_in_baltic
		cost = 10
		
		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0
				has_civil_war = yes
			}
			modifier = {
				factor = 0
				date < 1939.1.1
			}	
			modifier = {
				factor = 200
				GER = { has_government = democratic }
			}
		}

		available = {
			NOT = { has_country_flag = SOV_paranoia_system_active_flag }
			is_subject = no
		}

		bypass = {
			OR = {
				has_idea = SOV_molotov_ribbentrop_pact

				NOT = { country_exists = POL }

				has_non_aggression_pact_with = POL
				has_guaranteed = POL

				AND = {
					OR = { 
						owns_state = 89
						89 = { is_claimed_by = ROOT }
					}
					OR = { 
						owns_state = 91
						91 = { is_claimed_by = ROOT }
					}
					OR = { 
						owns_state = 93
						93 = { is_claimed_by = ROOT }
					}
					OR = { 
						owns_state = 94
						94 = { is_claimed_by = ROOT }
					}
					OR = { 
						owns_state = 95
						95 = { is_claimed_by = ROOT }
					}
					OR = { 
						owns_state = 935
						935 = { is_claimed_by = ROOT }
					}
					OR = { 
						owns_state = 936
						936 = { is_claimed_by = ROOT }
					}
					OR = { 
						owns_state = 784
						784 = { is_claimed_by = ROOT }
					}
					OR = { 
						owns_state = 96
						96 = { is_claimed_by = ROOT }
					}
				}
			}			
		}

		search_filters = { FOCUS_FILTER_ANNEXATION }
		completion_reward = {
			# REVISIT Covers Polish border, may want to add/remove some states
			add_state_claim = 89
			add_state_claim = 91
			add_state_claim = 93
			add_state_claim = 94
			add_state_claim = 95
			add_state_claim = 935
			add_state_claim = 936
			add_state_claim = 784
			add_state_claim = 96
			add_named_threat = { threat = 1 name = SOV_claims_on_poland }

			every_other_country = {
				limit = { 
					OR = {
						owns_state = 89
						owns_state = 91
						owns_state = 93
						owns_state = 94
						owns_state = 95
						owns_state = 935
						owns_state = 936
						owns_state = 784
						owns_state = 96
					}
				}
				add_opinion_modifier = { target = SOV modifier = claimed_eastern_poland }
			}
		}
	}

	focus = {
		id = SOV_demand_eastern_poland
		icon = GFX_goal_POL_lose_the_east
		prerequisite = { focus = SOV_claims_on_poland }
		x = -1
		y = 2
		relative_position_id = SOV_claims_on_poland
		cost = 10
		
		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0
				has_civil_war = yes
			}
			modifier = {
				factor = 0
				date < 1939.1.1
			}

			modifier = {
				factor = 0.5
				ai_irrationality > 20
			}
			modifier = {
				factor = 0.5
				ai_irrationality > 25
			}
			modifier = {
				factor = 0.5
				ai_irrationality > 30
			}
			modifier = {
				factor = 0.1
				ai_irrationality > 35
			}
		}

		mutually_exclusive = { focus = SOV_offer_poland_protection }

		available = {
			NOT = { has_country_flag = SOV_paranoia_system_active_flag }
			is_subject = no
			NOT =  { is_in_faction_with = POL }
			NOT = { has_non_aggression_pact_with = POL }
			NOT = { has_guaranteed = POL }
			NOT = { has_war_with = POL }
			OR = {
				96 = { is_owned_and_controlled_by = POL }
				95 = { is_owned_and_controlled_by = POL }
				94 = { is_owned_and_controlled_by = POL }
				93 = { is_owned_and_controlled_by = POL }
				91 = { is_owned_and_controlled_by = POL }
				89 = { is_owned_and_controlled_by = POL }
				935 = { is_owned_and_controlled_by = POL }
				936 = { is_owned_and_controlled_by = POL }
			}
		}
		
		bypass = {
			OR = {
				AND = { #North to south intentionally excluding Vilnius
					owns_state = 96
					owns_state = 936
					owns_state = 935
					owns_state = 95
					owns_state = 94
					owns_state = 93
					owns_state = 91
					owns_state = 89
				}
				NOT = {
					96 = { is_owned_and_controlled_by = POL }
					95 = { is_owned_and_controlled_by = POL }
					94 = { is_owned_and_controlled_by = POL }
					93 = { is_owned_and_controlled_by = POL }
					91 = { is_owned_and_controlled_by = POL }
					89 = { is_owned_and_controlled_by = POL }
					935 = { is_owned_and_controlled_by = POL }
					936 = { is_owned_and_controlled_by = POL }
				}
			}
		}

		search_filters = { FOCUS_FILTER_ANNEXATION }
		completion_reward = {
			add_named_threat = { threat = 2 name = SOV_demand_eastern_poland }
			POL = {
				country_event = { id = poland.2 }
				custom_effect_tooltip = needs_approval
			}
			effect_tooltip = {
				SOV = {
					if = {
						limit = { POL = { owns_state = 96 controls_state = 96 } }
						transfer_state = 96
					}
					if = {
						limit = { POL = { owns_state = 95 controls_state = 95 } }
						transfer_state = 95
					}
					if = {
						limit = { POL = { owns_state = 94 controls_state = 94 } }
						transfer_state = 94
					}
					if = {
						limit = { POL = { owns_state = 93 controls_state = 93 } }
						transfer_state = 93
					}
					if = {
						limit = { POL = { owns_state = 91 controls_state = 91 } }
						transfer_state = 91
					}
					if = {
						limit = { POL = { owns_state = 89 controls_state = 89 } }
						transfer_state = 89
					}
					if = {
						limit = { POL = { owns_state = 784 controls_state = 784 } }
						transfer_state = 784
					}
				}
			}
		}
	}

	focus = {
		id = SOV_offer_poland_protection
		icon = GFX_focus_generic_polish_deal
		prerequisite = { focus = SOV_claims_on_poland }
		x = 1
		y = 2
		relative_position_id = SOV_claims_on_poland
		cost = 10

		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0
				has_civil_war = yes
			}
			modifier = {
				factor = 0
				date < 1939.1.1
			}

			modifier = {
				factor = 0.5
				ai_irrationality < 24
			}
			modifier = {
				factor = 0.5
				ai_irrationality < 20
			}
			modifier = {
				factor = 0.5
				ai_irrationality < 15
			}
			modifier = {
				factor = 0.1
				ai_irrationality < 10
			}
		}

		available = {
			NOT = { has_country_flag = SOV_paranoia_system_active_flag }
			country_exists = POL
			NOT = { has_war_with = POL }
			POL = {
				SOV_is_valid_subject = yes
				has_capitulated = no
			}
			is_subject = no
		}

		bypass = {
			POL = { #focus to cede should be readded for them sometime
				is_subject_of = SOV
			}
		}

		mutually_exclusive = { focus = SOV_demand_eastern_poland }
		
		search_filters = { FOCUS_FILTER_ANNEXATION }
		completion_reward = {
			add_ai_strategy = {
				type = alliance
				id = POL
				value = 100
			}
			POL = {
				add_ai_strategy = {
					type = alliance
					id = ROOT
					value = 100
				}
				country_event = { id = poland.5 }
				custom_effect_tooltip = needs_approval
				effect_tooltip = {
					add_state_claim = 5
					add_state_claim = 63
					add_state_claim = 68
					add_state_claim = 66
					add_state_claim = 67
					custom_effect_tooltip = SOV_offer_poland_protection_tt
					#This will also make Poland and Soviet be more more keen on cooperating
				}
			}
			effect_tooltip = {
				SOV = {
					if = {
						limit = { POL = { owns_state = 96 controls_state = 96 } }
						transfer_state = 96
					}
					if = {
						limit = { POL = { owns_state = 95 controls_state = 95 } }
						transfer_state = 95
					}
					if = {
						limit = { POL = { owns_state = 94 controls_state = 94 } }
						transfer_state = 94
					}
					if = {
						limit = { POL = { owns_state = 93 controls_state = 93 } }
						transfer_state = 93
					}
					if = {
						limit = { POL = { owns_state = 91 controls_state = 91 } }
						transfer_state = 91
					}
					if = {
						limit = { POL = { owns_state = 89 controls_state = 89 } }
						transfer_state = 89
					}
					if = {
						limit = { POL = { owns_state = 784 controls_state = 784 } }
						transfer_state = 784
					}
				}
			}
		}
	}

	focus = {
		id = SOV_claim_on_bessarabia
		icon = GFX_focus_generic_attack_romania
		prerequisite = { focus = SOV_claims_on_poland }
		mutually_exclusive = {
			focus = SOV_invite_romania
		}		
		x = 3
		y = 1
		relative_position_id = SOV_claims_on_poland
		cost = 5

		ai_will_do = {
			factor = 2.5
			modifier = {
				factor = 0
				OR = {
					date < 1939.1.1
					has_civil_war = yes
				}
			}	
			modifier = {
				factor = 200
				GER = { has_government = democratic }
			}
		}

		available = {
			NOT = { has_country_flag = SOV_paranoia_system_active_flag }
			is_subject = no
		}

		bypass = {
			all_state = {
				OR = {
					NOT = { 
						OR = {
							state = 78
							state = 80
							state = 766
						}
					}
					is_controlled_by_ROOT_or_ally = yes
					78 = {
						owner = {
							has_war_with = ROOT
						}
					}
				}
			}
		}
		
		completion_reward = { #This is now generic and will target any potential (multiple) controllers for these states.
			every_state = {
				limit = {
					OR = {
						state = 78
						state = 80
						state = 766
					}
					CONTROLLER = {
						NOT = { is_in_faction_with = ROOT }
						NOT = { is_subject_of = ROOT }
					}
				}
				add_claim_by = ROOT
			}
			add_named_threat = { threat = 1 name = SOV_claim_on_bessarabia }
			every_other_country = {
				limit = {
					NOT = { is_in_faction_with = ROOT }
					NOT = { is_subject_of = ROOT }
					any_controlled_state = {
						OR = {
							state = 78
							state = 80
							state = 766
						}
					}
				}
				add_opinion_modifier = { target = SOV modifier = claimed_bessarabia }
				country_event = { id = romania.1 hours = 16 random_hours = 8 }
			}
		}
		search_filters = { FOCUS_FILTER_ANNEXATION }
	}
	focus = {
		id = SOV_invite_romania
		icon = GFX_goal_ROM_appoint_pro_soviet_government
		prerequisite = { focus = SOV_claims_on_poland }
		mutually_exclusive = {
			focus = SOV_claim_on_bessarabia
		}
		x = 5
		y = 1
		relative_position_id = SOV_claims_on_poland
		cost = 10

		ai_will_do = {
			factor = 1.5
			modifier = {
				factor = 0
				OR = {
					date < 1939.1.1
					has_civil_war = yes
				}
				is_historical_focus_on = yes
			}
			modifier = {
				factor = 5
				ROM = {
					has_government = communism
				}	
			}
		}

		available = {
			is_faction_leader = yes
			NOT = { has_country_flag = SOV_paranoia_system_active_flag }
			is_subject = no
			ROM = {
				is_in_faction = no
				owns_state = 78
				OR = {
					has_government = communism
					communism > 0.4
				}
			}
		}

		bypass = {
			ROM = {
				is_in_faction_with = ROOT
			}
		}
		
		completion_reward = {
			if = {
				limit = {
					is_in_faction = yes
					NOT = { is_in_faction_with = ROM }
				}
				ROM = {
					country_event = { id = generic.5 hours = 8 random_hours = 4 }
				}
			}
			if = {
				limit = {
					ROM = {
						communism > 0.4						
					}
				}
				ROM = {
					add_popularity = {
						popularity = 0.05
						ideology = communism
					}
				}
			}						
		}
		search_filters = { FOCUS_FILTER_ALLIANCE }
	}
	focus = {
		id = SOV_demand_balkan_submission
		icon = GFX_focus_generic_balkans_focus
		prerequisite = { focus = SOV_claim_on_bessarabia focus = SOV_invite_romania }
		x = 0
		y = 1
		relative_position_id = SOV_claim_on_bessarabia
		cost = 10

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_civil_war = yes
			}	
		}
		
		mutually_exclusive = { focus = SOV_seek_balkan_cooperation }
		
		available = {
			NOT = { has_country_flag = SOV_paranoia_system_active_flag }
			any_other_country = {
				BUL_is_balkan_nation = yes
			}
			is_subject = no
		}

		completion_reward = {
			every_other_country = {
				limit = {
					BUL_is_balkan_nation = yes
				}
				add_timed_idea = {
					idea = communist_pressure
					days = 365
				}
				hidden_effect = {
					country_event = { id = generic.1 }
				}
			}
			custom_effect_tooltip = SOV_demand_balkan_submission_decisions_tt
			hidden_effect = {
				activate_targeted_decision = { target = ROM decision = SOV_send_ultimatum_to_country_balkan }
				activate_targeted_decision = { target = BUL decision = SOV_send_ultimatum_to_country_balkan }
				activate_targeted_decision = { target = GRE decision = SOV_send_ultimatum_to_country_balkan }
				activate_targeted_decision = { target = YUG decision = SOV_send_ultimatum_to_country_balkan }
				activate_targeted_decision = { target = TUR decision = SOV_send_ultimatum_to_country_balkan }
			}
		}
	}

	focus = {
		id = SOV_seek_balkan_cooperation
		icon = GFX_focus_BUL_free_balkan_states
		prerequisite = { focus = SOV_claim_on_bessarabia focus = SOV_invite_romania }
		x = 2
		y = 1
		relative_position_id = SOV_claim_on_bessarabia
		cost = 10

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_civil_war = yes
			}	
		}
		
		mutually_exclusive = { focus = SOV_demand_balkan_submission }
		
		available = {
			NOT = { has_country_flag = SOV_paranoia_system_active_flag }
			any_other_country = {
				BUL_is_balkan_nation = yes
			}
			is_subject = no
		}

		completion_reward = {
			every_other_country = {
				limit = {
					BUL_is_balkan_nation = yes
				}
				add_timed_idea = {
					idea = communist_pressure
					days = 365
				}
				hidden_effect = {
					country_event = { id = generic.1 }
				}
			}
			custom_effect_tooltip = SOV_seek_balkan_cooperation_decisions_tt
			hidden_effect = {
				activate_targeted_decision = { target = ROM decision = SOV_pressure_country_government_balkan }
				activate_targeted_decision = { target = BUL decision = SOV_pressure_country_government_balkan }
				activate_targeted_decision = { target = GRE decision = SOV_pressure_country_government_balkan }
				activate_targeted_decision = { target = YUG decision = SOV_pressure_country_government_balkan }
				activate_targeted_decision = { target = TUR decision = SOV_pressure_country_government_balkan }
				activate_targeted_decision = { target = ROM decision = SOV_promote_ideology_rallies_balkan }
				activate_targeted_decision = { target = BUL decision = SOV_promote_ideology_rallies_balkan }
				activate_targeted_decision = { target = GRE decision = SOV_promote_ideology_rallies_balkan }
				activate_targeted_decision = { target = YUG decision = SOV_promote_ideology_rallies_balkan }
				activate_targeted_decision = { target = TUR decision = SOV_promote_ideology_rallies_balkan }
			}
		}
	}

	focus = {
		id = SOV_claim_on_the_straits
		icon = GFX_goal_SOV_supremacy_on_the_bosporus
		prerequisite = {  focus = SOV_demand_balkan_submission focus = SOV_seek_balkan_cooperation }
		x = 1
		y = 1
		relative_position_id = SOV_demand_balkan_submission
		cost = 10
		ai_will_do = {
			factor = 1
		}
		available = {
			is_subject = no
		}
		bypass = {
			OR = {
				AND = {
					OR = {
						owns_state = 341
						341 = { is_claimed_by = ROOT }
					}
					OR = {
						owns_state = 347
						347 = { is_claimed_by = ROOT }
					}
					OR = {
						owns_state = 340
						340 = { is_claimed_by = ROOT }
					}
					OR = {
						owns_state = 339
						339 = { is_claimed_by = ROOT }
					}
					OR = {
						owns_state = 797
						797 = { is_claimed_by = ROOT }
					}					
				}
				TUR = {
					owns_state = 797
					owns_state = 341
					owns_state = 347
					owns_state = 340
					OR = {
						is_puppet_of = ROOT
						is_in_faction_with = ROOT
					}	
					
				}
			}

		}
		completion_reward = {
			add_state_claim = 341
			add_state_claim = 347
			add_state_claim = 340
			add_state_claim = 339
			add_state_claim = 797
			add_named_threat = { threat = 2 name = SOV_claim_on_the_straits }
			every_other_country = {
				limit = {
					NOT = {
						is_in_faction_with = ROOT
					}
					OR = {
						controls_state = 341
						controls_state = 347
						controls_state = 340
						controls_state = 339
						controls_state = 797
					}
				}
				SOV = {
					create_wargoal = {
						type = take_state_focus
						target = PREV
						expire = 0
					}
				}
			}	
		}
		search_filters = { FOCUS_FILTER_ANNEXATION }
	}
	

	focus = {
		id = SOV_ultimatum_to_greece
		icon = GFX_goal_italy_attack_greece
		prerequisite = { focus = SOV_claim_on_the_straits }
		x = 0
		y = 1
		relative_position_id = SOV_claim_on_the_straits
		cost = 7.16

		available = {
			is_subject = no
			all_state = {
				OR = {
					NOT = {
						OR = {
							state = 341
							state = 347
							state = 340
							state = 339
						}
					}
					is_controlled_by_ROOT_or_ally = yes
				}
			}
		}
		bypass = {
			187 = { is_controlled_by_ROOT_or_ally = yes }
		}
		ai_will_do = {
			factor = 1
		}
		completion_reward = {
			add_named_threat = { threat = 1 name = SOV_ultimatum_to_greece_t }
			add_state_claim = 187
			if = {
				limit = { country_exists = GRE }
				GRE = { country_event = { id = greece.1 days = 1 } }
			}
		}
		search_filters = { FOCUS_FILTER_ANNEXATION }
	}

	
	

	



#   #  ##  #  #  ##  ###   ##  #  # ###  ## ###     ###  ###   ##  #  #  ##  #  # 
## ## #  # ## # #  # #  # #  # #  #  #  #    #      #  # #  # #  # ## # #  # #  # 
# # # #  # # ## #### ###  #    ####  #   #   #      ###  ###  #### # ## #    #### 
#   # #  # #  # #  # #  # #  # #  #  #    #  #      #  # #  # #  # #  # #  # #  # 
#   #  ##  #  # #  # #  #  ##  #  # ### ##   #      ###  #  # #  # #  #  ##  #  # 

	
}